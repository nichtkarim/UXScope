/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analyze/route";
exports.ids = ["app/api/analyze/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Karim_Documents_Bachelorprojekt_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/analyze/route.ts */ \"(rsc)/./src/app/api/analyze/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analyze/route\",\n        pathname: \"/api/analyze\",\n        filename: \"route\",\n        bundlePath: \"app/api/analyze/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Karim\\\\Documents\\\\Bachelorprojekt\\\\src\\\\app\\\\api\\\\analyze\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Karim_Documents_Bachelorprojekt_src_app_api_analyze_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXplJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbmFseXplJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYW5hbHl6ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNLYXJpbSU1Q0RvY3VtZW50cyU1Q0JhY2hlbG9ycHJvamVrdCU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDS2FyaW0lNUNEb2N1bWVudHMlNUNCYWNoZWxvcnByb2pla3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxLYXJpbVxcXFxEb2N1bWVudHNcXFxcQmFjaGVsb3Jwcm9qZWt0XFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFuYWx5emVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FuYWx5emUvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXplXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hbmFseXplL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcS2FyaW1cXFxcRG9jdW1lbnRzXFxcXEJhY2hlbG9ycHJvamVrdFxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhbmFseXplXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/analyze/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/analyze/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_promptEngineering__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/promptEngineering */ \"(rsc)/./src/lib/promptEngineering.ts\");\n\n\n/**\r\n * Standardisiert die Formatierung der Kategorie-Tags in LLM-Outputs\r\n * Sorgt dafür, dass sowohl deutsche als auch englische Outputs konsistent formatiert sind\r\n */ function standardizeFormatting(text) {\n    if (!text) return text;\n    // Standardisiere verschiedene Formatierungsvarianten zu **[CATEGORY]**\n    const categories = [\n        'CATASTROPHIC',\n        'KATASTROPHAL',\n        'CRITICAL',\n        'KRITISCH',\n        'SERIOUS',\n        'ERNST',\n        'MINOR',\n        'GERING',\n        'POSITIVE',\n        'POSITIV'\n    ];\n    let standardizedText = text;\n    for (const category of categories){\n        // Einfacher Ansatz ohne lookbehind/lookahead für bessere Kompatibilität\n        // 1. *[CATEGORY]** -> **[CATEGORY]**\n        standardizedText = standardizedText.replace(new RegExp(`\\\\*\\\\[${category}\\\\]\\\\*\\\\*`, 'gi'), `**[${category}]**`);\n        // 2. [CATEGORY]** -> **[CATEGORY]** (am Zeilenanfang oder nach Leerzeichen)\n        standardizedText = standardizedText.replace(new RegExp(`(^|\\\\s)\\\\[${category}\\\\]\\\\*\\\\*`, 'gim'), `$1**[${category}]**`);\n        // 3. *[CATEGORY]* -> **[CATEGORY]** (aber nicht wenn bereits ** davor/danach)\n        standardizedText = standardizedText.replace(new RegExp(`([^*])\\\\*\\\\[${category}\\\\]\\\\*([^*])`, 'gi'), `$1**[${category}]**$2`);\n    }\n    return standardizedText;\n}\n/**\r\n * Extrahiert Kategorisierungsinformationen und erstellt eine saubere, nutzerfreundliche Ausgabe\r\n * Entfernt die störenden [KATEGORIE] Tags für bessere Lesbarkeit\r\n */ function extractCategoriesAndCleanText(text) {\n    if (!text) return {\n        cleanText: '',\n        findings: []\n    };\n    const categories = [\n        'CATASTROPHIC',\n        'KATASTROPHAL',\n        'CRITICAL',\n        'KRITISCH',\n        'SERIOUS',\n        'ERNST',\n        'MINOR',\n        'GERING',\n        'POSITIVE',\n        'POSITIV'\n    ];\n    const findings = [];\n    // Standardisiere zuerst die Formatierung\n    let processedText = standardizeFormatting(text);\n    // Teile den Text in Absätze auf und verarbeite jeden einzeln\n    const paragraphs = processedText.split(/\\n\\s*\\n/).filter((p)=>p.trim().length > 0);\n    const cleanFindings = [];\n    for (const paragraph of paragraphs){\n        let foundCategory = false;\n        let categoryMatch = null;\n        // Suche nach Kategorie-Tags am Anfang des Absatzes\n        for (const category of categories){\n            const categoryRegex = new RegExp(`\\\\*\\\\*\\\\[${category}\\\\]\\\\*\\\\*\\\\s*(.*)`, 'is');\n            const match = paragraph.match(categoryRegex);\n            if (match) {\n                categoryMatch = match;\n                foundCategory = true;\n                const findingText = match[1].trim();\n                findings.push({\n                    category: category,\n                    text: findingText\n                });\n                // Sammle saubere Befunde ohne Kategorie-Tags\n                cleanFindings.push(findingText);\n                break;\n            }\n        }\n        // Wenn kein Kategorie-Tag gefunden wurde, behandle als normalen Text\n        if (!foundCategory) {\n            const cleanParagraph = paragraph.trim();\n            if (cleanParagraph.length > 0) {\n                // Entferne eventuelle verbleibende Tags\n                const withoutTags = cleanParagraph.replace(/\\*\\*\\[[^\\]]+\\]\\*\\*/g, '').trim();\n                if (withoutTags.length > 0) {\n                    cleanFindings.push(withoutTags);\n                    // Füge als unbekannte Kategorie hinzu\n                    findings.push({\n                        category: 'UNCATEGORIZED',\n                        text: withoutTags\n                    });\n                }\n            }\n        }\n    }\n    // Erstelle sauberen Text mit Absätzen zwischen den Befunden (deutscher Stil)\n    const cleanText = cleanFindings.map((finding)=>finding.trim()).filter((finding)=>finding.length > 0).join('\\n\\n');\n    return {\n        cleanText,\n        findings\n    };\n}\nasync function POST(request) {\n    console.log('🔍 API Route called - /api/analyze');\n    try {\n        // Dynamically import LLM providers to catch any import errors\n        let LLM_MODELS, callLLM;\n        try {\n            console.log('🔍 Starting dynamic import...');\n            const llmModule = await __webpack_require__.e(/*! import() */ \"_rsc_src_lib_llmProviders_ts\").then(__webpack_require__.bind(__webpack_require__, /*! @/lib/llmProviders */ \"(rsc)/./src/lib/llmProviders.ts\"));\n            console.log('🔍 LLM Module imported:', Object.keys(llmModule));\n            LLM_MODELS = llmModule.LLM_MODELS;\n            callLLM = llmModule.callLLM;\n            console.log('🔍 Dynamic import successful - LLM_MODELS:', !!LLM_MODELS, 'callLLM:', !!callLLM);\n            if (LLM_MODELS) {\n                console.log('🔍 Available models:', Object.keys(LLM_MODELS));\n            }\n        } catch (importError) {\n            console.error('❌ Failed to import LLM providers:', importError);\n            const errorMessage = importError instanceof Error ? importError.message : String(importError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `LLM Provider import failed: ${errorMessage}`\n            }, {\n                status: 500\n            });\n        }\n        if (!LLM_MODELS || !callLLM) {\n            console.error('❌ LLM-Services nicht verfügbar nach Import');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'LLM-Services nicht verfügbar nach Import'\n            }, {\n                status: 500\n            });\n        }\n        console.log('🔍 Parsing request body...');\n        const requestBody = await request.json();\n        console.log('🔍 Request body keys:', Object.keys(requestBody));\n        const { image, context, userProfile } = requestBody;\n        console.log('🔍 Extracted data:', {\n            hasImage: !!image,\n            hasContext: !!context,\n            hasUserProfile: !!userProfile,\n            userProfileKeys: userProfile ? Object.keys(userProfile) : 'none'\n        });\n        // Extrahiere promptVariant, promptLanguage und uiMode aus context, falls vorhanden\n        const promptVariant = context?.promptVariant || 'advanced';\n        const promptLanguage = context?.language || 'de';\n        const uiMode = context?.uiMode || 'generalized';\n        console.log('🔍 Debug - Received context:', context);\n        console.log('🔍 Debug - Extracted promptVariant:', promptVariant);\n        console.log('🔍 Debug - Extracted promptLanguage:', promptLanguage);\n        console.log('🔍 Debug - Extracted uiMode:', uiMode);\n        // Validierung\n        if (!image && !context) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Bild oder Kontext erforderlich'\n            }, {\n                status: 400\n            });\n        }\n        if (!userProfile || !userProfile.selectedModel) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Benutzerprofil mit LLM-Modell erforderlich'\n            }, {\n                status: 400\n            });\n        }\n        // Prüfe ob selectedModel ein String ist\n        if (typeof userProfile.selectedModel !== 'string') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Ungültiges LLM-Modell Format'\n            }, {\n                status: 400\n            });\n        }\n        // LLM-Konfiguration mit sicherer Zugriffsprüfung\n        if (!LLM_MODELS || typeof LLM_MODELS !== 'object') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'LLM-Modelle nicht verfügbar'\n            }, {\n                status: 500\n            });\n        }\n        const modelConfig = LLM_MODELS[userProfile.selectedModel];\n        if (!modelConfig) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Unbekanntes LLM-Modell: ${userProfile.selectedModel}`\n            }, {\n                status: 400\n            });\n        }\n        // API-Key-Validierung (außer für lokale LLMs)\n        if (modelConfig.requiresApiKey && !userProfile.apiKey) {\n            // Generate prompt for testing even if API key is missing\n            const appContext = {\n                appDescription: context?.description || 'Unbekannte Anwendung',\n                userTask: context?.userTask || 'Allgemeine Usability-Evaluation',\n                screenshot: image || '',\n                viewName: context?.viewName || 'Hauptansicht',\n                sourceCode: context?.uiCode || ''\n            };\n            const prompt = _lib_promptEngineering__WEBPACK_IMPORTED_MODULE_1__.PromptEngineer.createUsabilityPrompt(appContext, true, context?.customPrompt, promptVariant, promptLanguage, uiMode);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `API-Key für ${modelConfig.name} nicht konfiguriert`,\n                prompt: prompt // Include prompt for testing\n            }, {\n                status: 400\n            });\n        }\n        console.log(`🤖 Starte Analyse mit ${modelConfig.name}...`);\n        // Warnung für Vision-Fähigkeiten\n        if (image && !modelConfig.supportsVision) {\n            console.warn(`⚠️ ${modelConfig.name} unterstützt keine Bild-Analyse. Nur Text wird analysiert.`);\n        }\n        const startTime = Date.now();\n        // App-Kontext erstellen\n        const appContext = {\n            appDescription: context?.description || 'Unbekannte Anwendung',\n            userTask: context?.userTask || 'Allgemeine Usability-Evaluation',\n            screenshot: image || '',\n            viewName: context?.viewName || 'Hauptansicht',\n            sourceCode: context?.uiCode || ''\n        };\n        // Prompt generieren mit der korrekten Variante, Sprache und UI-Modus\n        const prompt = _lib_promptEngineering__WEBPACK_IMPORTED_MODULE_1__.PromptEngineer.createUsabilityPrompt(appContext, true, context?.customPrompt, promptVariant, promptLanguage, uiMode);\n        console.log('🔍 API Debug - Generated prompt length:', prompt.length);\n        console.log('🔍 API Debug - Prompt preview (first 300 chars):');\n        console.log(prompt.substring(0, 300) + '...');\n        // LLM aufrufen\n        const messages = [\n            {\n                role: 'user',\n                content: prompt\n            }\n        ];\n        if (image && modelConfig.supportsVision) {\n            messages[0].content = [\n                {\n                    type: 'text',\n                    text: prompt\n                },\n                {\n                    type: 'image_url',\n                    image_url: {\n                        url: image\n                    }\n                }\n            ];\n        }\n        const analysis = await callLLM(userProfile.selectedModel, userProfile.apiKey, messages);\n        console.log('🔍 RAW LLM OUTPUT (first 500 chars):');\n        console.log(analysis.substring(0, 500) + '...');\n        console.log('🔍 RAW LLM OUTPUT contains [KATEGORIE] tags:', /\\*\\*\\[[A-Z]+\\]\\*\\*/.test(analysis));\n        // Extrahiere Kategorien und bereite saubere Nutzer-Ausgabe vor\n        const { cleanText, findings } = extractCategoriesAndCleanText(analysis);\n        console.log('🔍 EXTRACTED FINDINGS:');\n        findings.forEach((finding, index)=>{\n            console.log(`${index + 1}. [${finding.category}]: ${finding.text.substring(0, 50)}...`);\n        });\n        const processingTime = Date.now() - startTime;\n        console.log(`✅ Analyse abgeschlossen mit ${modelConfig.name} in ${processingTime}ms`);\n        console.log(`📊 Gefundene Befunde: ${findings.length}`);\n        // Konvertiere deutsche Kategorien zu Frontend-Severities\n        const mapSeverity = (category)=>{\n            const categoryUpper = category.toUpperCase();\n            console.log(`🔍 MAPPING: \"${category}\" -> \"${categoryUpper}\" -> severity`);\n            if (categoryUpper === 'KATASTROPHAL' || categoryUpper === 'CATASTROPHIC') return 'critical';\n            if (categoryUpper === 'KRITISCH' || categoryUpper === 'CRITICAL') return 'high';\n            if (categoryUpper === 'ERNST' || categoryUpper === 'SERIOUS') return 'medium';\n            if (categoryUpper === 'GERING' || categoryUpper === 'MINOR') return 'low';\n            if (categoryUpper === 'POSITIV' || categoryUpper === 'POSITIVE') return 'low'; // Positive als low behandeln\n            console.log(`⚠️ UNKNOWN CATEGORY: \"${category}\" -> defaulting to low`);\n            return 'low'; // Default\n        };\n        // Strukturierte Probleme für das Frontend erstellen\n        const problems = findings.map((finding, index)=>{\n            const severity = mapSeverity(finding.category);\n            console.log(`🔍 PROBLEM ${index + 1}: Category=\"${finding.category}\" -> Severity=\"${severity}\"`);\n            return {\n                id: `problem-${index + 1}`,\n                title: `Problem ${index + 1}`,\n                description: finding.text,\n                severity: severity,\n                category: 'other',\n                heuristic: undefined,\n                detectedBy: [\n                    modelConfig.name\n                ],\n                isGroundTruth: false\n            };\n        });\n        // LLMAnalysis Format für das Frontend\n        const llmAnalysis = {\n            llmId: userProfile.selectedModel,\n            llmName: modelConfig.name,\n            problems: problems,\n            analysisTime: new Date(),\n            promptUsed: prompt,\n            rawResponse: analysis\n        };\n        // Rückgabe im erwarteten Format für das Frontend\n        const response = {\n            analysis: cleanText,\n            cleanText: cleanText,\n            rawAnalysis: analysis,\n            analyses: [\n                llmAnalysis\n            ],\n            findings: findings,\n            metadata: {\n                llmModel: userProfile.selectedModel,\n                llmName: modelConfig.name,\n                promptUsed: prompt,\n                analysisTime: new Date().toISOString(),\n                processingTimeMs: processingTime,\n                supportsVision: modelConfig.supportsVision,\n                imageProvided: !!image,\n                contextProvided: !!context,\n                promptVariant,\n                userProfile: {\n                    name: userProfile.name,\n                    email: userProfile.email\n                }\n            }\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error('❌ Analyse-Fehler (DETAILLIERT):', {\n            error,\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : 'No stack',\n            type: typeof error\n        });\n        let errorMessage = 'Unbekannter Fehler';\n        if (error instanceof Error) {\n            errorMessage = error.message;\n        } else if (typeof error === 'string') {\n            errorMessage = error;\n        } else if (error && typeof error === 'object' && 'message' in error) {\n            errorMessage = error.message;\n        }\n        // Try to include prompt in error response for debugging\n        let prompt = null;\n        try {\n            // We can't re-read the request body after it's been consumed\n            // So we'll skip generating the prompt in the error case\n            console.log('Error occurred, skipping prompt generation for error response');\n        } catch (promptError) {\n            console.log('Could not generate prompt for error response:', promptError);\n        }\n        // Immer ein JSON-Objekt mit error-Feld zurückgeben\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: `Analyse fehlgeschlagen: ${errorMessage}`,\n            prompt: prompt\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b2pla3RcXHNyY1xcYXBwXFxhcGlcXGFuYWx5emVcXHJvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBQcm9tcHRFbmdpbmVlciB9IGZyb20gJ0AvbGliL3Byb21wdEVuZ2luZWVyaW5nJ1xyXG5cclxuLyoqXHJcbiAqIFN0YW5kYXJkaXNpZXJ0IGRpZSBGb3JtYXRpZXJ1bmcgZGVyIEthdGVnb3JpZS1UYWdzIGluIExMTS1PdXRwdXRzXHJcbiAqIFNvcmd0IGRhZsO8ciwgZGFzcyBzb3dvaGwgZGV1dHNjaGUgYWxzIGF1Y2ggZW5nbGlzY2hlIE91dHB1dHMga29uc2lzdGVudCBmb3JtYXRpZXJ0IHNpbmRcclxuICovXHJcbmZ1bmN0aW9uIHN0YW5kYXJkaXplRm9ybWF0dGluZyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGlmICghdGV4dCkgcmV0dXJuIHRleHQ7XHJcbiAgXHJcbiAgLy8gU3RhbmRhcmRpc2llcmUgdmVyc2NoaWVkZW5lIEZvcm1hdGllcnVuZ3N2YXJpYW50ZW4genUgKipbQ0FURUdPUlldKipcclxuICBjb25zdCBjYXRlZ29yaWVzID0gW1xyXG4gICAgJ0NBVEFTVFJPUEhJQycsICdLQVRBU1RST1BIQUwnLFxyXG4gICAgJ0NSSVRJQ0FMJywgJ0tSSVRJU0NIJywgXHJcbiAgICAnU0VSSU9VUycsICdFUk5TVCcsXHJcbiAgICAnTUlOT1InLCAnR0VSSU5HJyxcclxuICAgICdQT1NJVElWRScsICdQT1NJVElWJ1xyXG4gIF07XHJcbiAgXHJcbiAgbGV0IHN0YW5kYXJkaXplZFRleHQgPSB0ZXh0O1xyXG4gIFxyXG4gIGZvciAoY29uc3QgY2F0ZWdvcnkgb2YgY2F0ZWdvcmllcykge1xyXG4gICAgLy8gRWluZmFjaGVyIEFuc2F0eiBvaG5lIGxvb2tiZWhpbmQvbG9va2FoZWFkIGbDvHIgYmVzc2VyZSBLb21wYXRpYmlsaXTDpHRcclxuICAgIFxyXG4gICAgLy8gMS4gKltDQVRFR09SWV0qKiAtPiAqKltDQVRFR09SWV0qKlxyXG4gICAgc3RhbmRhcmRpemVkVGV4dCA9IHN0YW5kYXJkaXplZFRleHQucmVwbGFjZShcclxuICAgICAgbmV3IFJlZ0V4cChgXFxcXCpcXFxcWyR7Y2F0ZWdvcnl9XFxcXF1cXFxcKlxcXFwqYCwgJ2dpJyksIFxyXG4gICAgICBgKipbJHtjYXRlZ29yeX1dKipgXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyAyLiBbQ0FURUdPUlldKiogLT4gKipbQ0FURUdPUlldKiogKGFtIFplaWxlbmFuZmFuZyBvZGVyIG5hY2ggTGVlcnplaWNoZW4pXHJcbiAgICBzdGFuZGFyZGl6ZWRUZXh0ID0gc3RhbmRhcmRpemVkVGV4dC5yZXBsYWNlKFxyXG4gICAgICBuZXcgUmVnRXhwKGAoXnxcXFxccylcXFxcWyR7Y2F0ZWdvcnl9XFxcXF1cXFxcKlxcXFwqYCwgJ2dpbScpLCBcclxuICAgICAgYCQxKipbJHtjYXRlZ29yeX1dKipgXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyAzLiAqW0NBVEVHT1JZXSogLT4gKipbQ0FURUdPUlldKiogKGFiZXIgbmljaHQgd2VubiBiZXJlaXRzICoqIGRhdm9yL2RhbmFjaClcclxuICAgIHN0YW5kYXJkaXplZFRleHQgPSBzdGFuZGFyZGl6ZWRUZXh0LnJlcGxhY2UoXHJcbiAgICAgIG5ldyBSZWdFeHAoYChbXipdKVxcXFwqXFxcXFske2NhdGVnb3J5fVxcXFxdXFxcXCooW14qXSlgLCAnZ2knKSwgXHJcbiAgICAgIGAkMSoqWyR7Y2F0ZWdvcnl9XSoqJDJgXHJcbiAgICApO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gc3RhbmRhcmRpemVkVGV4dDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dHJhaGllcnQgS2F0ZWdvcmlzaWVydW5nc2luZm9ybWF0aW9uZW4gdW5kIGVyc3RlbGx0IGVpbmUgc2F1YmVyZSwgbnV0emVyZnJldW5kbGljaGUgQXVzZ2FiZVxyXG4gKiBFbnRmZXJudCBkaWUgc3TDtnJlbmRlbiBbS0FURUdPUklFXSBUYWdzIGbDvHIgYmVzc2VyZSBMZXNiYXJrZWl0XHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0Q2F0ZWdvcmllc0FuZENsZWFuVGV4dCh0ZXh0OiBzdHJpbmcpOiB7XHJcbiAgY2xlYW5UZXh0OiBzdHJpbmc7XHJcbiAgZmluZGluZ3M6IEFycmF5PHtcclxuICAgIGNhdGVnb3J5OiBzdHJpbmc7XHJcbiAgICB0ZXh0OiBzdHJpbmc7XHJcbiAgfT47XHJcbn0ge1xyXG4gIGlmICghdGV4dCkgcmV0dXJuIHsgY2xlYW5UZXh0OiAnJywgZmluZGluZ3M6IFtdIH07XHJcbiAgXHJcbiAgY29uc3QgY2F0ZWdvcmllcyA9IFtcclxuICAgICdDQVRBU1RST1BISUMnLCAnS0FUQVNUUk9QSEFMJyxcclxuICAgICdDUklUSUNBTCcsICdLUklUSVNDSCcsIFxyXG4gICAgJ1NFUklPVVMnLCAnRVJOU1QnLFxyXG4gICAgJ01JTk9SJywgJ0dFUklORycsXHJcbiAgICAnUE9TSVRJVkUnLCAnUE9TSVRJVidcclxuICBdO1xyXG4gIFxyXG4gIGNvbnN0IGZpbmRpbmdzOiBBcnJheTx7IGNhdGVnb3J5OiBzdHJpbmc7IHRleHQ6IHN0cmluZyB9PiA9IFtdO1xyXG4gIFxyXG4gIC8vIFN0YW5kYXJkaXNpZXJlIHp1ZXJzdCBkaWUgRm9ybWF0aWVydW5nXHJcbiAgbGV0IHByb2Nlc3NlZFRleHQgPSBzdGFuZGFyZGl6ZUZvcm1hdHRpbmcodGV4dCk7XHJcbiAgXHJcbiAgLy8gVGVpbGUgZGVuIFRleHQgaW4gQWJzw6R0emUgYXVmIHVuZCB2ZXJhcmJlaXRlIGplZGVuIGVpbnplbG5cclxuICBjb25zdCBwYXJhZ3JhcGhzID0gcHJvY2Vzc2VkVGV4dC5zcGxpdCgvXFxuXFxzKlxcbi8pLmZpbHRlcihwID0+IHAudHJpbSgpLmxlbmd0aCA+IDApO1xyXG4gIGNvbnN0IGNsZWFuRmluZGluZ3M6IHN0cmluZ1tdID0gW107XHJcbiAgXHJcbiAgZm9yIChjb25zdCBwYXJhZ3JhcGggb2YgcGFyYWdyYXBocykge1xyXG4gICAgbGV0IGZvdW5kQ2F0ZWdvcnkgPSBmYWxzZTtcclxuICAgIGxldCBjYXRlZ29yeU1hdGNoID0gbnVsbDtcclxuICAgIFxyXG4gICAgLy8gU3VjaGUgbmFjaCBLYXRlZ29yaWUtVGFncyBhbSBBbmZhbmcgZGVzIEFic2F0emVzXHJcbiAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIGNhdGVnb3JpZXMpIHtcclxuICAgICAgY29uc3QgY2F0ZWdvcnlSZWdleCA9IG5ldyBSZWdFeHAoYFxcXFwqXFxcXCpcXFxcWyR7Y2F0ZWdvcnl9XFxcXF1cXFxcKlxcXFwqXFxcXHMqKC4qKWAsICdpcycpO1xyXG4gICAgICBjb25zdCBtYXRjaCA9IHBhcmFncmFwaC5tYXRjaChjYXRlZ29yeVJlZ2V4KTtcclxuICAgICAgXHJcbiAgICAgIGlmIChtYXRjaCkge1xyXG4gICAgICAgIGNhdGVnb3J5TWF0Y2ggPSBtYXRjaDtcclxuICAgICAgICBmb3VuZENhdGVnb3J5ID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBmaW5kaW5nVGV4dCA9IG1hdGNoWzFdLnRyaW0oKTtcclxuICAgICAgICBcclxuICAgICAgICBmaW5kaW5ncy5wdXNoKHtcclxuICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcclxuICAgICAgICAgIHRleHQ6IGZpbmRpbmdUZXh0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2FtbWxlIHNhdWJlcmUgQmVmdW5kZSBvaG5lIEthdGVnb3JpZS1UYWdzXHJcbiAgICAgICAgY2xlYW5GaW5kaW5ncy5wdXNoKGZpbmRpbmdUZXh0KTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBXZW5uIGtlaW4gS2F0ZWdvcmllLVRhZyBnZWZ1bmRlbiB3dXJkZSwgYmVoYW5kbGUgYWxzIG5vcm1hbGVuIFRleHRcclxuICAgIGlmICghZm91bmRDYXRlZ29yeSkge1xyXG4gICAgICBjb25zdCBjbGVhblBhcmFncmFwaCA9IHBhcmFncmFwaC50cmltKCk7XHJcbiAgICAgIGlmIChjbGVhblBhcmFncmFwaC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gRW50ZmVybmUgZXZlbnR1ZWxsZSB2ZXJibGVpYmVuZGUgVGFnc1xyXG4gICAgICAgIGNvbnN0IHdpdGhvdXRUYWdzID0gY2xlYW5QYXJhZ3JhcGgucmVwbGFjZSgvXFwqXFwqXFxbW15cXF1dK1xcXVxcKlxcKi9nLCAnJykudHJpbSgpO1xyXG4gICAgICAgIGlmICh3aXRob3V0VGFncy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjbGVhbkZpbmRpbmdzLnB1c2god2l0aG91dFRhZ3MpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBGw7xnZSBhbHMgdW5iZWthbm50ZSBLYXRlZ29yaWUgaGluenVcclxuICAgICAgICAgIGZpbmRpbmdzLnB1c2goe1xyXG4gICAgICAgICAgICBjYXRlZ29yeTogJ1VOQ0FURUdPUklaRUQnLFxyXG4gICAgICAgICAgICB0ZXh0OiB3aXRob3V0VGFnc1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEVyc3RlbGxlIHNhdWJlcmVuIFRleHQgbWl0IEFic8OkdHplbiB6d2lzY2hlbiBkZW4gQmVmdW5kZW4gKGRldXRzY2hlciBTdGlsKVxyXG4gIGNvbnN0IGNsZWFuVGV4dCA9IGNsZWFuRmluZGluZ3NcclxuICAgIC5tYXAoZmluZGluZyA9PiBmaW5kaW5nLnRyaW0oKSlcclxuICAgIC5maWx0ZXIoZmluZGluZyA9PiBmaW5kaW5nLmxlbmd0aCA+IDApXHJcbiAgICAuam9pbignXFxuXFxuJyk7XHJcbiAgXHJcbiAgcmV0dXJuIHsgY2xlYW5UZXh0LCBmaW5kaW5ncyB9O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XHJcbiAgY29uc29sZS5sb2coJ/CflI0gQVBJIFJvdXRlIGNhbGxlZCAtIC9hcGkvYW5hbHl6ZScpXHJcbiAgdHJ5IHtcclxuICAgIC8vIER5bmFtaWNhbGx5IGltcG9ydCBMTE0gcHJvdmlkZXJzIHRvIGNhdGNoIGFueSBpbXBvcnQgZXJyb3JzXHJcbiAgICBsZXQgTExNX01PREVMUywgY2FsbExMTTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFN0YXJ0aW5nIGR5bmFtaWMgaW1wb3J0Li4uJyk7XHJcbiAgICAgIGNvbnN0IGxsbU1vZHVsZSA9IGF3YWl0IGltcG9ydCgnQC9saWIvbGxtUHJvdmlkZXJzJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIExMTSBNb2R1bGUgaW1wb3J0ZWQ6JywgT2JqZWN0LmtleXMobGxtTW9kdWxlKSk7XHJcbiAgICAgIExMTV9NT0RFTFMgPSBsbG1Nb2R1bGUuTExNX01PREVMUztcclxuICAgICAgY2FsbExMTSA9IGxsbU1vZHVsZS5jYWxsTExNO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+UjSBEeW5hbWljIGltcG9ydCBzdWNjZXNzZnVsIC0gTExNX01PREVMUzonLCAhIUxMTV9NT0RFTFMsICdjYWxsTExNOicsICEhY2FsbExMTSk7XHJcbiAgICAgIGlmIChMTE1fTU9ERUxTKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gQXZhaWxhYmxlIG1vZGVsczonLCBPYmplY3Qua2V5cyhMTE1fTU9ERUxTKSk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGltcG9ydEVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gaW1wb3J0IExMTSBwcm92aWRlcnM6JywgaW1wb3J0RXJyb3IpO1xyXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBpbXBvcnRFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gaW1wb3J0RXJyb3IubWVzc2FnZSA6IFN0cmluZyhpbXBvcnRFcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBgTExNIFByb3ZpZGVyIGltcG9ydCBmYWlsZWQ6ICR7ZXJyb3JNZXNzYWdlfWAgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghTExNX01PREVMUyB8fCAhY2FsbExMTSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgTExNLVNlcnZpY2VzIG5pY2h0IHZlcmbDvGdiYXIgbmFjaCBJbXBvcnQnKVxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0xMTS1TZXJ2aWNlcyBuaWNodCB2ZXJmw7xnYmFyIG5hY2ggSW1wb3J0JyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gUGFyc2luZyByZXF1ZXN0IGJvZHkuLi4nKVxyXG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gUmVxdWVzdCBib2R5IGtleXM6JywgT2JqZWN0LmtleXMocmVxdWVzdEJvZHkpKVxyXG4gICAgXHJcbiAgICBjb25zdCB7IFxyXG4gICAgICBpbWFnZSwgXHJcbiAgICAgIGNvbnRleHQsIFxyXG4gICAgICB1c2VyUHJvZmlsZVxyXG4gICAgfSA9IHJlcXVlc3RCb2R5XHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIEV4dHJhY3RlZCBkYXRhOicsIHtcclxuICAgICAgaGFzSW1hZ2U6ICEhaW1hZ2UsXHJcbiAgICAgIGhhc0NvbnRleHQ6ICEhY29udGV4dCxcclxuICAgICAgaGFzVXNlclByb2ZpbGU6ICEhdXNlclByb2ZpbGUsXHJcbiAgICAgIHVzZXJQcm9maWxlS2V5czogdXNlclByb2ZpbGUgPyBPYmplY3Qua2V5cyh1c2VyUHJvZmlsZSkgOiAnbm9uZSdcclxuICAgIH0pXHJcbiAgICBcclxuICAgIC8vIEV4dHJhaGllcmUgcHJvbXB0VmFyaWFudCwgcHJvbXB0TGFuZ3VhZ2UgdW5kIHVpTW9kZSBhdXMgY29udGV4dCwgZmFsbHMgdm9yaGFuZGVuXHJcbiAgICBjb25zdCBwcm9tcHRWYXJpYW50ID0gY29udGV4dD8ucHJvbXB0VmFyaWFudCB8fCAnYWR2YW5jZWQnXHJcbiAgICBjb25zdCBwcm9tcHRMYW5ndWFnZSA9IGNvbnRleHQ/Lmxhbmd1YWdlIHx8ICdkZSdcclxuICAgIGNvbnN0IHVpTW9kZSA9IGNvbnRleHQ/LnVpTW9kZSB8fCAnZ2VuZXJhbGl6ZWQnXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIERlYnVnIC0gUmVjZWl2ZWQgY29udGV4dDonLCBjb250ZXh0KVxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gRGVidWcgLSBFeHRyYWN0ZWQgcHJvbXB0VmFyaWFudDonLCBwcm9tcHRWYXJpYW50KVxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gRGVidWcgLSBFeHRyYWN0ZWQgcHJvbXB0TGFuZ3VhZ2U6JywgcHJvbXB0TGFuZ3VhZ2UpXHJcbiAgICBjb25zb2xlLmxvZygn8J+UjSBEZWJ1ZyAtIEV4dHJhY3RlZCB1aU1vZGU6JywgdWlNb2RlKVxyXG4gICAgXHJcbiAgICAvLyBWYWxpZGllcnVuZ1xyXG4gICAgaWYgKCFpbWFnZSAmJiAhY29udGV4dCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0JpbGQgb2RlciBLb250ZXh0IGVyZm9yZGVybGljaCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghdXNlclByb2ZpbGUgfHwgIXVzZXJQcm9maWxlLnNlbGVjdGVkTW9kZWwpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdCZW51dHplcnByb2ZpbCBtaXQgTExNLU1vZGVsbCBlcmZvcmRlcmxpY2gnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcsO8ZmUgb2Igc2VsZWN0ZWRNb2RlbCBlaW4gU3RyaW5nIGlzdFxyXG4gICAgaWYgKHR5cGVvZiB1c2VyUHJvZmlsZS5zZWxlY3RlZE1vZGVsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ1VuZ8O8bHRpZ2VzIExMTS1Nb2RlbGwgRm9ybWF0JyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gTExNLUtvbmZpZ3VyYXRpb24gbWl0IHNpY2hlcmVyIFp1Z3JpZmZzcHLDvGZ1bmdcclxuICAgIGlmICghTExNX01PREVMUyB8fCB0eXBlb2YgTExNX01PREVMUyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgZXJyb3I6ICdMTE0tTW9kZWxsZSBuaWNodCB2ZXJmw7xnYmFyJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbW9kZWxDb25maWcgPSBMTE1fTU9ERUxTW3VzZXJQcm9maWxlLnNlbGVjdGVkTW9kZWxdXHJcbiAgICBpZiAoIW1vZGVsQ29uZmlnKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBgVW5iZWthbm50ZXMgTExNLU1vZGVsbDogJHt1c2VyUHJvZmlsZS5zZWxlY3RlZE1vZGVsfWAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFQSS1LZXktVmFsaWRpZXJ1bmcgKGF1w59lciBmw7xyIGxva2FsZSBMTE1zKVxyXG4gICAgaWYgKG1vZGVsQ29uZmlnLnJlcXVpcmVzQXBpS2V5ICYmICF1c2VyUHJvZmlsZS5hcGlLZXkpIHtcclxuICAgICAgLy8gR2VuZXJhdGUgcHJvbXB0IGZvciB0ZXN0aW5nIGV2ZW4gaWYgQVBJIGtleSBpcyBtaXNzaW5nXHJcbiAgICAgIGNvbnN0IGFwcENvbnRleHQgPSB7XHJcbiAgICAgICAgYXBwRGVzY3JpcHRpb246IGNvbnRleHQ/LmRlc2NyaXB0aW9uIHx8ICdVbmJla2FubnRlIEFud2VuZHVuZycsXHJcbiAgICAgICAgdXNlclRhc2s6IGNvbnRleHQ/LnVzZXJUYXNrIHx8ICdBbGxnZW1laW5lIFVzYWJpbGl0eS1FdmFsdWF0aW9uJyxcclxuICAgICAgICBzY3JlZW5zaG90OiBpbWFnZSB8fCAnJyxcclxuICAgICAgICB2aWV3TmFtZTogY29udGV4dD8udmlld05hbWUgfHwgJ0hhdXB0YW5zaWNodCcsXHJcbiAgICAgICAgc291cmNlQ29kZTogY29udGV4dD8udWlDb2RlIHx8ICcnXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHByb21wdCA9IFByb21wdEVuZ2luZWVyLmNyZWF0ZVVzYWJpbGl0eVByb21wdChcclxuICAgICAgICBhcHBDb250ZXh0LCBcclxuICAgICAgICB0cnVlLCBcclxuICAgICAgICBjb250ZXh0Py5jdXN0b21Qcm9tcHQsIFxyXG4gICAgICAgIHByb21wdFZhcmlhbnQsXHJcbiAgICAgICAgcHJvbXB0TGFuZ3VhZ2UsXHJcbiAgICAgICAgdWlNb2RlXHJcbiAgICAgIClcclxuICAgICAgXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IFxyXG4gICAgICAgICAgZXJyb3I6IGBBUEktS2V5IGbDvHIgJHttb2RlbENvbmZpZy5uYW1lfSBuaWNodCBrb25maWd1cmllcnRgLFxyXG4gICAgICAgICAgcHJvbXB0OiBwcm9tcHQgLy8gSW5jbHVkZSBwcm9tcHQgZm9yIHRlc3RpbmdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coYPCfpJYgU3RhcnRlIEFuYWx5c2UgbWl0ICR7bW9kZWxDb25maWcubmFtZX0uLi5gKVxyXG4gICAgXHJcbiAgICAvLyBXYXJudW5nIGbDvHIgVmlzaW9uLUbDpGhpZ2tlaXRlblxyXG4gICAgaWYgKGltYWdlICYmICFtb2RlbENvbmZpZy5zdXBwb3J0c1Zpc2lvbikge1xyXG4gICAgICBjb25zb2xlLndhcm4oYOKaoO+4jyAke21vZGVsQ29uZmlnLm5hbWV9IHVudGVyc3TDvHR6dCBrZWluZSBCaWxkLUFuYWx5c2UuIE51ciBUZXh0IHdpcmQgYW5hbHlzaWVydC5gKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KClcclxuXHJcbiAgICAvLyBBcHAtS29udGV4dCBlcnN0ZWxsZW5cclxuICAgIGNvbnN0IGFwcENvbnRleHQgPSB7XHJcbiAgICAgIGFwcERlc2NyaXB0aW9uOiBjb250ZXh0Py5kZXNjcmlwdGlvbiB8fCAnVW5iZWthbm50ZSBBbndlbmR1bmcnLFxyXG4gICAgICB1c2VyVGFzazogY29udGV4dD8udXNlclRhc2sgfHwgJ0FsbGdlbWVpbmUgVXNhYmlsaXR5LUV2YWx1YXRpb24nLFxyXG4gICAgICBzY3JlZW5zaG90OiBpbWFnZSB8fCAnJyxcclxuICAgICAgdmlld05hbWU6IGNvbnRleHQ/LnZpZXdOYW1lIHx8ICdIYXVwdGFuc2ljaHQnLFxyXG4gICAgICBzb3VyY2VDb2RlOiBjb250ZXh0Py51aUNvZGUgfHwgJydcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcm9tcHQgZ2VuZXJpZXJlbiBtaXQgZGVyIGtvcnJla3RlbiBWYXJpYW50ZSwgU3ByYWNoZSB1bmQgVUktTW9kdXNcclxuICAgIGNvbnN0IHByb21wdCA9IFByb21wdEVuZ2luZWVyLmNyZWF0ZVVzYWJpbGl0eVByb21wdChcclxuICAgICAgYXBwQ29udGV4dCwgXHJcbiAgICAgIHRydWUsIFxyXG4gICAgICBjb250ZXh0Py5jdXN0b21Qcm9tcHQsIFxyXG4gICAgICBwcm9tcHRWYXJpYW50LFxyXG4gICAgICBwcm9tcHRMYW5ndWFnZSxcclxuICAgICAgdWlNb2RlXHJcbiAgICApXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIEFQSSBEZWJ1ZyAtIEdlbmVyYXRlZCBwcm9tcHQgbGVuZ3RoOicsIHByb21wdC5sZW5ndGgpXHJcbiAgICBjb25zb2xlLmxvZygn8J+UjSBBUEkgRGVidWcgLSBQcm9tcHQgcHJldmlldyAoZmlyc3QgMzAwIGNoYXJzKTonKVxyXG4gICAgY29uc29sZS5sb2cocHJvbXB0LnN1YnN0cmluZygwLCAzMDApICsgJy4uLicpXHJcblxyXG4gICAgLy8gTExNIGF1ZnJ1ZmVuXHJcbiAgICBjb25zdCBtZXNzYWdlczogYW55W10gPSBbXHJcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfVxyXG4gICAgXVxyXG4gICAgXHJcbiAgICBpZiAoaW1hZ2UgJiYgbW9kZWxDb25maWcuc3VwcG9ydHNWaXNpb24pIHtcclxuICAgICAgbWVzc2FnZXNbMF0uY29udGVudCA9IFtcclxuICAgICAgICB7IHR5cGU6ICd0ZXh0JywgdGV4dDogcHJvbXB0IH0sXHJcbiAgICAgICAgeyB0eXBlOiAnaW1hZ2VfdXJsJywgaW1hZ2VfdXJsOiB7IHVybDogaW1hZ2UgfSB9XHJcbiAgICAgIF1cclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCBjYWxsTExNKFxyXG4gICAgICB1c2VyUHJvZmlsZS5zZWxlY3RlZE1vZGVsLFxyXG4gICAgICB1c2VyUHJvZmlsZS5hcGlLZXksXHJcbiAgICAgIG1lc3NhZ2VzXHJcbiAgICApXHJcbiAgICBcclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFJBVyBMTE0gT1VUUFVUIChmaXJzdCA1MDAgY2hhcnMpOicpXHJcbiAgICBjb25zb2xlLmxvZyhhbmFseXNpcy5zdWJzdHJpbmcoMCwgNTAwKSArICcuLi4nKVxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gUkFXIExMTSBPVVRQVVQgY29udGFpbnMgW0tBVEVHT1JJRV0gdGFnczonLCAvXFwqXFwqXFxbW0EtWl0rXFxdXFwqXFwqLy50ZXN0KGFuYWx5c2lzKSlcclxuICAgIFxyXG4gICAgLy8gRXh0cmFoaWVyZSBLYXRlZ29yaWVuIHVuZCBiZXJlaXRlIHNhdWJlcmUgTnV0emVyLUF1c2dhYmUgdm9yXHJcbiAgICBjb25zdCB7IGNsZWFuVGV4dCwgZmluZGluZ3MgfSA9IGV4dHJhY3RDYXRlZ29yaWVzQW5kQ2xlYW5UZXh0KGFuYWx5c2lzKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ/CflI0gRVhUUkFDVEVEIEZJTkRJTkdTOicpXHJcbiAgICBmaW5kaW5ncy5mb3JFYWNoKChmaW5kaW5nLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhgJHtpbmRleCArIDF9LiBbJHtmaW5kaW5nLmNhdGVnb3J5fV06ICR7ZmluZGluZy50ZXh0LnN1YnN0cmluZygwLCA1MCl9Li4uYClcclxuICAgIH0pXHJcbiAgICBcclxuICAgIGNvbnN0IHByb2Nlc3NpbmdUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgY29uc29sZS5sb2coYOKchSBBbmFseXNlIGFiZ2VzY2hsb3NzZW4gbWl0ICR7bW9kZWxDb25maWcubmFtZX0gaW4gJHtwcm9jZXNzaW5nVGltZX1tc2ApXHJcbiAgICBjb25zb2xlLmxvZyhg8J+TiiBHZWZ1bmRlbmUgQmVmdW5kZTogJHtmaW5kaW5ncy5sZW5ndGh9YClcclxuICAgIFxyXG4gICAgLy8gS29udmVydGllcmUgZGV1dHNjaGUgS2F0ZWdvcmllbiB6dSBGcm9udGVuZC1TZXZlcml0aWVzXHJcbiAgICBjb25zdCBtYXBTZXZlcml0eSA9IChjYXRlZ29yeTogc3RyaW5nKTogJ2xvdycgfCAnbWVkaXVtJyB8ICdoaWdoJyB8ICdjcml0aWNhbCcgPT4ge1xyXG4gICAgICBjb25zdCBjYXRlZ29yeVVwcGVyID0gY2F0ZWdvcnkudG9VcHBlckNhc2UoKTtcclxuICAgICAgY29uc29sZS5sb2coYPCflI0gTUFQUElORzogXCIke2NhdGVnb3J5fVwiIC0+IFwiJHtjYXRlZ29yeVVwcGVyfVwiIC0+IHNldmVyaXR5YClcclxuICAgICAgaWYgKGNhdGVnb3J5VXBwZXIgPT09ICdLQVRBU1RST1BIQUwnIHx8IGNhdGVnb3J5VXBwZXIgPT09ICdDQVRBU1RST1BISUMnKSByZXR1cm4gJ2NyaXRpY2FsJztcclxuICAgICAgaWYgKGNhdGVnb3J5VXBwZXIgPT09ICdLUklUSVNDSCcgfHwgY2F0ZWdvcnlVcHBlciA9PT0gJ0NSSVRJQ0FMJykgcmV0dXJuICdoaWdoJztcclxuICAgICAgaWYgKGNhdGVnb3J5VXBwZXIgPT09ICdFUk5TVCcgfHwgY2F0ZWdvcnlVcHBlciA9PT0gJ1NFUklPVVMnKSByZXR1cm4gJ21lZGl1bSc7XHJcbiAgICAgIGlmIChjYXRlZ29yeVVwcGVyID09PSAnR0VSSU5HJyB8fCBjYXRlZ29yeVVwcGVyID09PSAnTUlOT1InKSByZXR1cm4gJ2xvdyc7XHJcbiAgICAgIGlmIChjYXRlZ29yeVVwcGVyID09PSAnUE9TSVRJVicgfHwgY2F0ZWdvcnlVcHBlciA9PT0gJ1BPU0lUSVZFJykgcmV0dXJuICdsb3cnOyAvLyBQb3NpdGl2ZSBhbHMgbG93IGJlaGFuZGVsblxyXG4gICAgICBjb25zb2xlLmxvZyhg4pqg77iPIFVOS05PV04gQ0FURUdPUlk6IFwiJHtjYXRlZ29yeX1cIiAtPiBkZWZhdWx0aW5nIHRvIGxvd2ApXHJcbiAgICAgIHJldHVybiAnbG93JzsgLy8gRGVmYXVsdFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gU3RydWt0dXJpZXJ0ZSBQcm9ibGVtZSBmw7xyIGRhcyBGcm9udGVuZCBlcnN0ZWxsZW5cclxuICAgIGNvbnN0IHByb2JsZW1zID0gZmluZGluZ3MubWFwKChmaW5kaW5nLCBpbmRleCkgPT4ge1xyXG4gICAgICBjb25zdCBzZXZlcml0eSA9IG1hcFNldmVyaXR5KGZpbmRpbmcuY2F0ZWdvcnkpO1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+UjSBQUk9CTEVNICR7aW5kZXggKyAxfTogQ2F0ZWdvcnk9XCIke2ZpbmRpbmcuY2F0ZWdvcnl9XCIgLT4gU2V2ZXJpdHk9XCIke3NldmVyaXR5fVwiYCk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQ6IGBwcm9ibGVtLSR7aW5kZXggKyAxfWAsXHJcbiAgICAgICAgdGl0bGU6IGBQcm9ibGVtICR7aW5kZXggKyAxfWAsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IGZpbmRpbmcudGV4dCxcclxuICAgICAgICBzZXZlcml0eTogc2V2ZXJpdHksXHJcbiAgICAgICAgY2F0ZWdvcnk6ICdvdGhlcicgYXMgY29uc3QsXHJcbiAgICAgICAgaGV1cmlzdGljOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZGV0ZWN0ZWRCeTogW21vZGVsQ29uZmlnLm5hbWVdLFxyXG4gICAgICAgIGlzR3JvdW5kVHJ1dGg6IGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBMTE1BbmFseXNpcyBGb3JtYXQgZsO8ciBkYXMgRnJvbnRlbmRcclxuICAgIGNvbnN0IGxsbUFuYWx5c2lzID0ge1xyXG4gICAgICBsbG1JZDogdXNlclByb2ZpbGUuc2VsZWN0ZWRNb2RlbCxcclxuICAgICAgbGxtTmFtZTogbW9kZWxDb25maWcubmFtZSxcclxuICAgICAgcHJvYmxlbXM6IHByb2JsZW1zLFxyXG4gICAgICBhbmFseXNpc1RpbWU6IG5ldyBEYXRlKCksXHJcbiAgICAgIHByb21wdFVzZWQ6IHByb21wdCxcclxuICAgICAgcmF3UmVzcG9uc2U6IGFuYWx5c2lzXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBSw7xja2dhYmUgaW0gZXJ3YXJ0ZXRlbiBGb3JtYXQgZsO8ciBkYXMgRnJvbnRlbmRcclxuICAgIGNvbnN0IHJlc3BvbnNlID0ge1xyXG4gICAgICBhbmFseXNpczogY2xlYW5UZXh0LCAgICAgICAgIC8vIFdhcyBkYXMgRnJvbnRlbmQgYWxzIFwiYW5hbHlzaXNcIiBlcndhcnRldFxyXG4gICAgICBjbGVhblRleHQ6IGNsZWFuVGV4dCwgICAgICAgIC8vIEbDvHIgZGllIE51dHplci1BbnplaWdlIChCYWNrdXApXHJcbiAgICAgIHJhd0FuYWx5c2lzOiBhbmFseXNpcywgICAgICAgLy8gT3JpZ2luYWwgZsO8ciBEZWJ1Z2dpbmdcclxuICAgICAgYW5hbHlzZXM6IFtsbG1BbmFseXNpc10sICAgICAvLyBBcnJheSB2b24gTExNLUFuYWx5c2VuIGbDvHIgQWx0ZXJuYXRpdmVFdmFsdWF0aW9uXHJcbiAgICAgIGZpbmRpbmdzOiBmaW5kaW5ncywgICAgICAgICAgLy8gU3RydWt0dXJpZXJ0ZSBCZWZ1bmRlXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgbGxtTW9kZWw6IHVzZXJQcm9maWxlLnNlbGVjdGVkTW9kZWwsXHJcbiAgICAgICAgbGxtTmFtZTogbW9kZWxDb25maWcubmFtZSxcclxuICAgICAgICBwcm9tcHRVc2VkOiBwcm9tcHQsXHJcbiAgICAgICAgYW5hbHlzaXNUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWVNczogcHJvY2Vzc2luZ1RpbWUsXHJcbiAgICAgICAgc3VwcG9ydHNWaXNpb246IG1vZGVsQ29uZmlnLnN1cHBvcnRzVmlzaW9uLFxyXG4gICAgICAgIGltYWdlUHJvdmlkZWQ6ICEhaW1hZ2UsXHJcbiAgICAgICAgY29udGV4dFByb3ZpZGVkOiAhIWNvbnRleHQsXHJcbiAgICAgICAgcHJvbXB0VmFyaWFudCxcclxuICAgICAgICB1c2VyUHJvZmlsZToge1xyXG4gICAgICAgICAgbmFtZTogdXNlclByb2ZpbGUubmFtZSxcclxuICAgICAgICAgIGVtYWlsOiB1c2VyUHJvZmlsZS5lbWFpbFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKVxyXG4gICAgXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBBbmFseXNlLUZlaGxlciAoREVUQUlMTElFUlQpOicsIHtcclxuICAgICAgZXJyb3IsXHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxyXG4gICAgICBzdGFjazogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLnN0YWNrIDogJ05vIHN0YWNrJyxcclxuICAgICAgdHlwZTogdHlwZW9mIGVycm9yXHJcbiAgICB9KVxyXG4gICAgbGV0IGVycm9yTWVzc2FnZSA9ICdVbmJla2FubnRlciBGZWhsZXInO1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVycm9yID09PSAnc3RyaW5nJykge1xyXG4gICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvcjtcclxuICAgIH0gZWxzZSBpZiAoZXJyb3IgJiYgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiAnbWVzc2FnZScgaW4gZXJyb3IpIHtcclxuICAgICAgZXJyb3JNZXNzYWdlID0gKGVycm9yIGFzIGFueSkubWVzc2FnZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJ5IHRvIGluY2x1ZGUgcHJvbXB0IGluIGVycm9yIHJlc3BvbnNlIGZvciBkZWJ1Z2dpbmdcclxuICAgIGxldCBwcm9tcHQgPSBudWxsO1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gV2UgY2FuJ3QgcmUtcmVhZCB0aGUgcmVxdWVzdCBib2R5IGFmdGVyIGl0J3MgYmVlbiBjb25zdW1lZFxyXG4gICAgICAvLyBTbyB3ZSdsbCBza2lwIGdlbmVyYXRpbmcgdGhlIHByb21wdCBpbiB0aGUgZXJyb3IgY2FzZVxyXG4gICAgICBjb25zb2xlLmxvZygnRXJyb3Igb2NjdXJyZWQsIHNraXBwaW5nIHByb21wdCBnZW5lcmF0aW9uIGZvciBlcnJvciByZXNwb25zZScpO1xyXG4gICAgfSBjYXRjaCAocHJvbXB0RXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0NvdWxkIG5vdCBnZW5lcmF0ZSBwcm9tcHQgZm9yIGVycm9yIHJlc3BvbnNlOicsIHByb21wdEVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gSW1tZXIgZWluIEpTT04tT2JqZWt0IG1pdCBlcnJvci1GZWxkIHp1csO8Y2tnZWJlblxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiBgQW5hbHlzZSBmZWhsZ2VzY2hsYWdlbjogJHtlcnJvck1lc3NhZ2V9YCxcclxuICAgICAgICBwcm9tcHQ6IHByb21wdFxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlByb21wdEVuZ2luZWVyIiwic3RhbmRhcmRpemVGb3JtYXR0aW5nIiwidGV4dCIsImNhdGVnb3JpZXMiLCJzdGFuZGFyZGl6ZWRUZXh0IiwiY2F0ZWdvcnkiLCJyZXBsYWNlIiwiUmVnRXhwIiwiZXh0cmFjdENhdGVnb3JpZXNBbmRDbGVhblRleHQiLCJjbGVhblRleHQiLCJmaW5kaW5ncyIsInByb2Nlc3NlZFRleHQiLCJwYXJhZ3JhcGhzIiwic3BsaXQiLCJmaWx0ZXIiLCJwIiwidHJpbSIsImxlbmd0aCIsImNsZWFuRmluZGluZ3MiLCJwYXJhZ3JhcGgiLCJmb3VuZENhdGVnb3J5IiwiY2F0ZWdvcnlNYXRjaCIsImNhdGVnb3J5UmVnZXgiLCJtYXRjaCIsImZpbmRpbmdUZXh0IiwicHVzaCIsImNsZWFuUGFyYWdyYXBoIiwid2l0aG91dFRhZ3MiLCJtYXAiLCJmaW5kaW5nIiwiam9pbiIsIlBPU1QiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsIkxMTV9NT0RFTFMiLCJjYWxsTExNIiwibGxtTW9kdWxlIiwiT2JqZWN0Iiwia2V5cyIsImltcG9ydEVycm9yIiwiZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm1lc3NhZ2UiLCJTdHJpbmciLCJqc29uIiwic3RhdHVzIiwicmVxdWVzdEJvZHkiLCJpbWFnZSIsImNvbnRleHQiLCJ1c2VyUHJvZmlsZSIsImhhc0ltYWdlIiwiaGFzQ29udGV4dCIsImhhc1VzZXJQcm9maWxlIiwidXNlclByb2ZpbGVLZXlzIiwicHJvbXB0VmFyaWFudCIsInByb21wdExhbmd1YWdlIiwibGFuZ3VhZ2UiLCJ1aU1vZGUiLCJzZWxlY3RlZE1vZGVsIiwibW9kZWxDb25maWciLCJyZXF1aXJlc0FwaUtleSIsImFwaUtleSIsImFwcENvbnRleHQiLCJhcHBEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwidXNlclRhc2siLCJzY3JlZW5zaG90Iiwidmlld05hbWUiLCJzb3VyY2VDb2RlIiwidWlDb2RlIiwicHJvbXB0IiwiY3JlYXRlVXNhYmlsaXR5UHJvbXB0IiwiY3VzdG9tUHJvbXB0IiwibmFtZSIsInN1cHBvcnRzVmlzaW9uIiwid2FybiIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJzdWJzdHJpbmciLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidHlwZSIsImltYWdlX3VybCIsInVybCIsImFuYWx5c2lzIiwidGVzdCIsImZvckVhY2giLCJpbmRleCIsInByb2Nlc3NpbmdUaW1lIiwibWFwU2V2ZXJpdHkiLCJjYXRlZ29yeVVwcGVyIiwidG9VcHBlckNhc2UiLCJwcm9ibGVtcyIsInNldmVyaXR5IiwiaWQiLCJ0aXRsZSIsImhldXJpc3RpYyIsInVuZGVmaW5lZCIsImRldGVjdGVkQnkiLCJpc0dyb3VuZFRydXRoIiwibGxtQW5hbHlzaXMiLCJsbG1JZCIsImxsbU5hbWUiLCJhbmFseXNpc1RpbWUiLCJwcm9tcHRVc2VkIiwicmF3UmVzcG9uc2UiLCJyZXNwb25zZSIsInJhd0FuYWx5c2lzIiwiYW5hbHlzZXMiLCJtZXRhZGF0YSIsImxsbU1vZGVsIiwidG9JU09TdHJpbmciLCJwcm9jZXNzaW5nVGltZU1zIiwiaW1hZ2VQcm92aWRlZCIsImNvbnRleHRQcm92aWRlZCIsImVtYWlsIiwic3RhY2siLCJwcm9tcHRFcnJvciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/analyze/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/promptEngineering.ts":
/*!**************************************!*\
  !*** ./src/lib/promptEngineering.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ModelSpecificPrompts: () => (/* binding */ ModelSpecificPrompts),\n/* harmony export */   PromptEngineer: () => (/* binding */ PromptEngineer),\n/* harmony export */   ResponseValidator: () => (/* binding */ ResponseValidator)\n/* harmony export */ });\nclass PromptEngineer {\n    static{\n        /**\n   * A/B/C Testing Konfiguration für Prompt-Varianten mit UI-Technologie-Modi\n   * \n   * FORSCHUNGS-HINWEIS:\n   * Diese Implementierung ermöglicht das Testen dreier wissenschaftlich fundierter Prompt-Ansätze\n   * mit zusätzlicher Wahl zwischen originalgetreuer SwiftUI-Fokussierung und generalisierter UI-Bewertung:\n   * \n   * A. \"STUDY-PURE\" - Originale IEEE-Studie \"Does GenAI Make Usability Testing Obsolete?\"\n   *    SwiftUI-Only Modus:\n   *    - Exakte Replikation der Originalstudie (Prof. Femmer Empfehlung)\n   *    - Nur für iOS/SwiftUI-Apps (wie in der ursprünglichen Forschung)\n   *    - Direkte Vergleichbarkeit mit publizierten Ergebnissen\n   *    - Methodisch konsistent und wissenschaftlich fundiert\n   *    \n   *    Generalisierter Modus:\n   *    - Systemübergreifendes Know-how zur UI-Bewertung\n   *    - Verschiedene UI-Technologien (SwiftUI, React, Flutter, HTML/CSS)\n   *    - Erweiterte Anwendbarkeit für moderne Forschungsrichtungen\n   *    - Unterstellt dem LLM breitere UI-Expertise\n   * \n   * B. \"BASIC\" - Adaptierte Version basierend auf UX-LLM Studie (IEEE Xplore: 11029918)\n   *    - Minimalistischer Ansatz mit einfacher Kategorisierung\n   *    - Kurze, prägnante Instruktionen\n   *    - Fokus auf offene Problemidentifikation\n   *    - Sprache wählbar (DE/EN)\n   * \n   * C. \"ADVANCED\" - Erweiterte Variante für Thesis-Level Analyse\n   *    - Detaillierte Expertise-Beschreibung mit wissenschaftlicher Kategorisierung\n   *    - Strukturierte Problemkategorien basierend auf Usability-Test-Ergebnissen\n   *    - Wissenschaftliche Analysemethodik mit Nielsen's Heuristiken\n   *    - Umfassende Qualitätskriterien und ISO-Standards\n   * \n   * UI-TECHNOLOGIE-MODI:\n   * - 'swiftui-only': Originalgetreu für direkte Studienreplikation (empfohlen für STUDY-PURE)\n   * - 'generalized': Systemübergreifend für moderne Multi-Platform-Anwendungen\n   * \n   * Verwendung für A/B/C Testing:\n   * - Verwende 'STUDY-PURE' + 'swiftui-only' für exakte IEEE-Studien-Replikation\n   * - Verwende 'STUDY-PURE' + 'generalized' für erweiterte Anwendbarkeit\n   * - Verwende 'BASIC' für vereinfachte deutsche/englische Evaluation\n   * - Verwende 'ADVANCED' für detaillierte wissenschaftliche Thesis-Analyse\n   * - Dokumentiere Ergebnisse aller Varianten für empirische Auswertung\n   */ this.PROMPT_VARIANTS = {\n            STUDY_PURE: 'study-pure',\n            BASIC: 'basic',\n            ADVANCED: 'advanced' // C: Erweitert, thesis-level\n        };\n    }\n    /**\n   * Erstellt einen strukturierten Prompt für die Usability-Analyse\n   * mit Persona-Instruktion und klarer Inputgestaltung\n   * \n   * @param appContext - App-Kontext für die Analyse\n   * @param includeExamples - Ob Beispiele inkludiert werden sollen\n   * @param customPrompt - Benutzerdefinierte Zusatzanweisungen\n   * @param variant - Prompt-Variante für A/B/C Testing ('study-pure', 'basic' oder 'advanced')\n   * @param language - Sprache der Prompts ('de' für Deutsch, 'en' für Englisch)\n   * @param uiMode - 'swiftui-only' für originalgetreue Studie oder 'generalized' für verschiedene UI-Technologien\n   */ static createUsabilityPrompt(appContext, includeExamples = false, customPrompt, variant = 'advanced', language = 'de', uiMode = 'generalized') {\n        console.log('🔍 PromptEngineer Debug - Creating prompt with variant:', variant, 'UI mode:', uiMode);\n        // Für STUDY-PURE: Nur System-Prompt + User-Input (originalgetreu)\n        if (variant === 'study-pure') {\n            const systemPrompt = this.getStudyPureSystemPrompt(language, uiMode);\n            const userInput = this.formatStudyPureInput(appContext, language, uiMode);\n            console.log('🔍 PromptEngineer Debug - STUDY-PURE: System prompt length:', systemPrompt.length);\n            console.log('🔍 PromptEngineer Debug - STUDY-PURE: User input length:', userInput.length);\n            console.log('🔍 PromptEngineer Debug - STUDY-PURE: Language:', language, 'UI Mode:', uiMode);\n            // Für STUDY-PURE werden keine Custom-Prompts, Beispiele oder zusätzliche Instruktionen verwendet\n            // um die Originalität der IEEE-Studie zu bewahren\n            return `${systemPrompt}\n\n${userInput}`;\n        }\n        // Für andere Varianten: Vollständige Struktur\n        const systemPrompt = variant === 'basic' ? this.getBasicSystemPrompt(language) : this.getAdvancedSystemPrompt(language);\n        const structuredInput = this.formatStructuredInput(appContext, variant, language);\n        const examples = includeExamples ? this.getExamples(language, variant) : '';\n        const instructions = variant === 'basic' ? this.getBasicInstructions(language) : this.getAdvancedInstructions(language);\n        console.log('🔍 PromptEngineer Debug - Selected system prompt type:', variant);\n        console.log('🔍 PromptEngineer Debug - System prompt length:', systemPrompt.length);\n        console.log('🔍 PromptEngineer Debug - Instructions length:', instructions.length);\n        // Benutzerdefinierte Prompt einbinden, falls vorhanden\n        const customInstructions = customPrompt ? this.formatCustomPrompt(customPrompt, language) : '';\n        const finalPrompt = `${systemPrompt}\n\n${examples}\n\n${structuredInput}\n\n${instructions}\n\n${customInstructions}`;\n        console.log('🔍 PromptEngineer Debug - Final prompt length:', finalPrompt.length);\n        console.log('🔍 PromptEngineer Debug - Final prompt preview (first 200 chars):', finalPrompt.substring(0, 200) + '...');\n        return finalPrompt;\n    }\n    /**\n   * Formatiert die benutzerdefinierte Prompt\n   */ static formatCustomPrompt(customPrompt, language = 'de') {\n        if (language === 'en') {\n            return `\n<additional_requirements>\nAdditionally consider the following specific user requirements:\n\n${customPrompt}\n\nIntegrate these requirements into your analysis and pay special attention to these aspects.\n</additional_requirements>`;\n        }\n        return `\n<zusaetzliche_anforderungen>\nBerücksichtige zusätzlich folgende spezifische Anforderungen des Benutzers:\n\n${customPrompt}\n\nIntegriere diese Anforderungen in deine Analyse und gehe besonders auf diese Aspekte ein.\n</zusaetzliche_anforderungen>`;\n    }\n    /**\n   * STUDY-PURE System-Prompt basierend auf IEEE-Studie \"Does GenAI Make Usability Testing Obsolete?\"\n   * Originalgetreue Replikation der in der Studie verwendeten Prompts (auf Englisch)\n   * Jetzt auch mit deutscher Übersetzung verfügbar\n   * \n   * @param language - Sprache des Prompts\n   * @param uiMode - 'swiftui-only' für originalgetreue Studie oder 'generalized' für verschiedene UI-Technologien\n   */ static getStudyPureSystemPrompt(language = 'en', uiMode = 'swiftui-only') {\n        if (language === 'de') {\n            if (uiMode === 'swiftui-only') {\n                return `Du bist ein UX-Experte für mobile iOS-Apps mit SwiftUI.\nDeine Aufgabe ist es, Usability-Probleme anhand der \nInformationen zu identifizieren, die du über eine SwiftUI-App-Ansicht erhältst.\nEin Beispiel für ein Usability-Problem könnte sein: 'Fehlendes\nvisuelles Feedback bei Nutzerinteraktionen'.\nAntworte in der Sprache der App-Domäne; du darfst keine\ntechnische Terminologie verwenden oder Code-Details erwähnen.\nZähle die identifizierten Probleme auf; füge nach jeder \nAufzählung einen leeren Absatz hinzu; kein vorangestellter\noder nachfolgender Text.`;\n            } else {\n                return `Du bist ein UX-Experte für mobile Apps und Webanwendungen.\nDeine Aufgabe ist es, Usability-Probleme anhand der \nInformationen zu identifizieren, die du über eine App-Ansicht erhältst.\nDu verfügst über systemübergreifendes Know-how zur UI-Bewertung \nfür verschiedene Technologien (SwiftUI, React, Flutter, etc.).\nEin Beispiel für ein Usability-Problem könnte sein: 'Fehlendes\nvisuelles Feedback bei Nutzerinteraktionen'.\nAntworte in der Sprache der App-Domäne; du darfst keine\ntechnische Terminologie verwenden oder Code-Details erwähnen.\nZähle die identifizierten Probleme auf; füge nach jeder \nAufzählung einen leeren Absatz hinzu; kein vorangestellter\noder nachfolgender Text.`;\n            }\n        }\n        if (uiMode === 'swiftui-only') {\n            return `You are a UX expert for mobile iOS apps with SwiftUI.\nYour task is to identify usability issues with the\ninformation you get for a SwiftUI app's view.\nAn example of a usability issue could be: 'Lack of\nvisual feedback on user interactions'.\nRespond using app domain language; you must not use\ntechnical terminology or mention code details.\nEnumerate the problems identified; add an empty\nparagraph after each enumeration; no preceding\nor following text.`;\n        } else {\n            return `You are a UX expert for mobile apps and web applications.\nYour task is to identify usability issues with the\ninformation you get for an app's view.\nYou have cross-platform expertise in UI evaluation \nfor various technologies (SwiftUI, React, Flutter, etc.).\nAn example of a usability issue could be: 'Lack of\nvisual feedback on user interactions'.\nRespond using app domain language; you must not use\ntechnical terminology or mention code details.\nEnumerate the problems identified; add an empty\nparagraph after each enumeration; no preceding\nor following text.`;\n        }\n    }\n    /**\n   * BASIC System-Prompt basierend auf UX-LLM Studie (IEEE Xplore: 11029918)\n   * Minimalistische Instruktionen für studienkonformen Ansatz\n   */ static getBasicSystemPrompt(language = 'de') {\n        if (language === 'en') {\n            return `You are a UX expert for mobile apps. Your task is to identify usability issues based on the information you get about an app view. An example of a usability issue could be: 'Lack of visual feedback on user interactions'.\n\nRespond using app domain language; you must not use technical terminology or mention code details. Enumerate the problems identified; add an empty paragraph after each enumeration; no preceding or following text.`;\n        }\n        return `Du bist ein UX-Experte für mobile Apps. Deine Aufgabe ist es, Usability-Probleme basierend auf den Informationen über eine App-Ansicht zu identifizieren. Ein Beispiel für ein Usability-Problem könnte sein: 'Fehlendes visuelles Feedback bei Nutzerinteraktionen'.\n\nAntworte in der App-Domänen-Sprache; verwende keine technische Terminologie und erwähne keine Code-Details. Zähle die identifizierten Probleme auf; füge einen leeren Absatz nach jeder Aufzählung hinzu; keine einleitenden oder abschließenden Texte.`;\n    }\n    /**\n   * ADVANCED System-Prompt für detaillierte Thesis-Level Analyse\n   * Umfassende Expertise-Beschreibung mit wissenschaftlicher Fundierung\n   * Subtile Integration von Nielsen's Heuristiken und ISO-Standards als Bewertungskriterien\n   */ static getAdvancedSystemPrompt(language = 'de') {\n        if (language === 'en') {\n            return this.getAdvancedSystemPromptEN();\n        }\n        return `Du bist ein erfahrener UX-Experte mit spezialisierter Expertise in der mobilen App-Evaluation. Deine Aufgabe ist es, Usability-Probleme systematisch zu identifizieren und zu bewerten, basierend auf etablierten UX-Prinzipien und wissenschaftlichen Erkenntnissen.\n\n## Deine Expertise umfasst:\n• **Mobile Usability**: Spezialkenntnisse in iOS und Android Interface-Guidelines\n• **Visuelle Hierarchie**: Analyse von Kontrasten, Typografie und Layout-Strukturen  \n• **Interaktionsdesign**: Bewertung von Touch-Targets, Feedback-Mechanismen und Mikrointeraktionen\n• **Barrierefreiheit**: WCAG 2.1 Compliance und assistive Technologien\n• **Nutzerpsychologie**: Mentale Modelle, kognitive Belastung und Aufmerksamkeitsführung\n• **Benutzerführung**: Analyse von Arbeitsabläufen, Lernbarkeit und Nutzerautonomie\n\n## Analysemethodik (basierend auf UX-LLM Forschung):\n**Fokussiere auf folgende bewährte Problemkategorien:**\n\n### Visuelle und Wahrnehmungsprobleme:\n- Kontrast-Probleme zwischen Text und Hintergrund\n- Inkonsistente Farbschemata oder Theme-Behandlung\n- Fehlende visuelle Hierarchie oder Informationsarchitektur\n- Unleserliche oder zu kleine Schriftgrößen\n- Problematische Icon-Verwendung ohne Beschriftung\n\n### Interaktions- und Feedback-Probleme:\n- Fehlendes visuelles Feedback bei Nutzerinteraktionen\n- Unklare oder mehrdeutige Bedienelemente\n- Zu kleine Touch-Targets (unter 44px)\n- Inkonsistente Interaktionsmuster\n- Fehlende oder verwirrende Loading-States\n\n### Navigation und Orientierungsprobleme:\n- Unklare Navigation oder Informationsarchitektur\n- Fehlende Orientierungshilfen (Breadcrumbs, Progress-Indikatoren)\n- Inkonsistente oder verwirrende Button-Beschriftungen\n- Problematische Back-Button-Funktionalität\n- Mehrdeutige oder versteckte Funktionen\n\n### Inhalts- und Verständlichkeitsprobleme:\n- Unklare oder fehlende Beschreibungen\n- Inkonsistente Terminologie\n- Fehlende Pflichtfeld-Kennzeichnung\n- Informationsüberladung oder unstrukturierte Inhalte\n- Fehlende Hilfestellungen oder Kontextinformationen\n\n### Effizienz und Kontrolle:\n- Umständliche oder ineffiziente Arbeitsabläufe\n- Fehlende Shortcuts oder Abkürzungen für wiederkehrende Aufgaben\n- Unzureichende Nutzerführung bei komplexen Prozessen\n- Fehlende Undo-/Redo-Funktionalität\n- Mangelnde Anpassungsmöglichkeiten an Nutzerpräferenzen\n\n### Fehlerbehandlung und Prävention:\n- Fehlende Eingabevalidierung oder unklare Fehlermeldungen\n- Unzureichende Fehlerprävention bei kritischen Aktionen\n- Fehlende Bestätigungsdialoge bei wichtigen Entscheidungen\n- Schwer verständliche oder technische Fehlermeldungen\n- Fehlende Wiederherstellungsmöglichkeiten nach Fehlern\n\n### Konsistenz und Standards:\n- Abweichungen von etablierten Plattform-Konventionen\n- Inkonsistente Terminologie oder Beschriftungen\n- Widersprüchliche Interaktionsmuster innerhalb der App\n- Fehlende Übereinstimmung mit mentalen Modellen der Nutzer\n- Abweichungen von branchenüblichen Standards\n\n### Accessibility und Inklusion:\n- Probleme für Nutzer mit Sehbehinderungen\n- Fehlende alternative Texte oder Labels\n- Problematische Farbkodierung als einzige Information\n- Mangelnde Keyboard-Navigation Support\n- Unzureichende Unterstützung für assistive Technologien\n\n## Wichtige Analyse-Prinzipien:\n- **Nutzerorientiert**: Beschreibe Probleme aus Sicht echter Nutzer, nicht aus technischer Sicht\n- **Konkret und spezifisch**: Referenziere spezifische UI-Elemente und deren Probleme\n- **Kontextbezogen**: Berücksichtige verschiedene Nutzungsszenarien und Nutzergruppen\n- **Evidenzbasiert**: Begründe jedes Problem mit nachvollziehbaren Auswirkungen\n- **Lösungsorientiert**: Impliziere praktische Verbesserungsmöglichkeiten\n\n## Ausgabeformat:\nStrukturiere deine Analyse klar und prägnant:\n1. Identifiziere Probleme ohne Nummerierung oder Bulletpoints\n2. Beschreibe jedes Problem in einem eigenständigen Absatz\n3. Verwende klare, verständliche Sprache ohne Fachbegriffe\n4. Füge nach jedem Problem eine Leerzeile ein\n5. Vermeide einleitende oder abschließende Texte\n\nFokussiere auf die wichtigsten und wirkungsvollsten Usability-Probleme, die echte Nutzer in realen Situationen beeinträchtigen würden.`;\n    }\n    /**\n   * ADVANCED System-Prompt für detaillierte Thesis-Level Analyse (Englisch)\n   * Umfassende Expertise-Beschreibung mit wissenschaftlicher Fundierung\n   * Subtile Integration von Nielsen's Heuristiken und ISO-Standards als Bewertungskriterien\n   */ static getAdvancedSystemPromptEN() {\n        return `You are an experienced UX expert with specialized expertise in mobile app evaluation. Your task is to systematically identify and assess usability issues based on established UX principles and scientific findings.\n\n## Your expertise includes:\n• **Mobile Usability**: Specialized knowledge of iOS and Android interface guidelines\n• **Visual Hierarchy**: Analysis of contrasts, typography, and layout structures  \n• **Interaction Design**: Evaluation of touch targets, feedback mechanisms, and micro-interactions\n• **Accessibility**: WCAG 2.1 compliance and assistive technologies\n• **User Psychology**: Mental models, cognitive load, and attention guidance\n• **User Guidance**: Analysis of workflows, learnability, and user autonomy\n\n## Analysis methodology (based on UX-LLM research):\n**Focus on the following proven problem categories:**\n\n### Visual and Perception Problems:\n- Contrast issues between text and background\n- Inconsistent color schemes or theme handling\n- Missing visual hierarchy or information architecture\n- Illegible or too small font sizes\n- Problematic icon usage without labels\n\n### Interaction and Feedback Problems:\n- Lack of visual feedback on user interactions\n- Unclear or ambiguous controls\n- Too small touch targets (below 44px)\n- Inconsistent interaction patterns\n- Missing or confusing loading states\n\n### Navigation and Orientation Problems:\n- Unclear navigation or information architecture\n- Missing orientation aids (breadcrumbs, progress indicators)\n- Inconsistent or confusing button labels\n- Problematic back button functionality\n- Ambiguous or hidden features\n\n### Content and Comprehensibility Problems:\n- Unclear or missing descriptions\n- Inconsistent terminology\n- Missing mandatory field indicators\n- Information overload or unstructured content\n- Missing help or context information\n\n### Efficiency and Control:\n- Cumbersome or inefficient workflows\n- Missing shortcuts or abbreviations for recurring tasks\n- Insufficient user guidance for complex processes\n- Missing undo/redo functionality\n- Lack of customization options for user preferences\n\n### Error Handling and Prevention:\n- Missing input validation or unclear error messages\n- Insufficient error prevention for critical actions\n- Missing confirmation dialogs for important decisions\n- Hard-to-understand or technical error messages\n- Missing recovery options after errors\n\n### Consistency and Standards:\n- Deviations from established platform conventions\n- Inconsistent terminology or labeling\n- Contradictory interaction patterns within the app\n- Lack of alignment with users' mental models\n- Deviations from industry standards\n\n### Accessibility and Inclusion:\n- Problems for users with visual impairments\n- Missing alternative texts or labels\n- Problematic color coding as the only information\n- Lack of keyboard navigation support\n- Insufficient support for assistive technologies\n\n## Important Analysis Principles:\n- **User-centered**: Describe problems from the perspective of real users, not from a technical perspective\n- **Concrete and specific**: Reference specific UI elements and their problems\n- **Contextual**: Consider different usage scenarios and user groups\n- **Evidence-based**: Justify each problem with understandable effects\n- **Solution-oriented**: Imply practical improvement possibilities\n\n## Output format:\nStructure your analysis clearly and concisely:\n1. Identify problems without numbering or bullet points\n2. Describe each problem in a separate paragraph\n3. Use clear, understandable language without technical terms\n4. Add a blank line after each enumeration\n5. Avoid introductory or concluding texts\n\nFocus on the most important and effective usability problems that real users would be hindered by in real situations.`;\n    }\n    /**\n   * STUDY-PURE Instructions basierend auf IEEE-Studie \"Does GenAI Make Usability Testing Obsolete?\"\n   * Keine zusätzlichen Instruktionen - die Eingabe spricht für sich selbst wie in der Originalstudie\n   */ static getStudyPureInstructions() {\n        return '' // Keine zusätzlichen Instruktionen im originalen Format\n        ;\n    }\n    /**\n   * BASIC Instructions basierend auf UX-LLM Studie (IEEE Xplore: 11029918)\n   * Minimale, offene Problemidentifikation ohne strukturelle Zwänge\n   */ static getBasicInstructions(language = 'de') {\n        if (language === 'en') {\n            return `Analyze the provided app view and identify usability issues. Focus on problems that would affect real users in actual usage scenarios.\n\nDescribe each problem in a separate paragraph with an empty line between problems. Use domain-specific language and avoid technical terminology.\n\n## IMPORTANT: Categorization of Findings\nEach finding MUST begin with one of the following assessments:\n\n**[CATASTROPHIC]** - Very large damage possible, only clarify with management.\n**[CRITICAL]** - Users give up or are very dissatisfied, minor damage possible.\n**[SERIOUS]** - Significant delays or noticeable dissatisfaction.\n**[MINOR]** - Small delays or slight dissatisfaction.\n**[POSITIVE]** - Works well or is well received.`;\n        }\n        return `Analysiere die bereitgestellte App-Ansicht und identifiziere Usability-Probleme. Konzentriere dich auf Probleme, die echte Nutzer in tatsächlichen Nutzungsszenarien beeinträchtigen würden.\n\nBeschreibe jedes Problem in einem separaten Absatz mit einer Leerzeile zwischen den Problemen. Verwende domänenspezifische Sprache und vermeide technische Terminologie.\n\n## WICHTIG: Kategorisierung der Befunde\nJeder Befund MUSS mit einer der folgenden Bewertungen beginnen:\n\n**[KATASTROPHAL]** - Sehr großer Schaden möglich, nur mit Management abklären.\n**[KRITISCH]** - Nutzer brechen ab oder sind sehr unzufrieden, kleiner Schaden möglich.\n**[ERNST]** - Deutliche Verzögerungen oder spürbare Unzufriedenheit.\n**[GERING]** - Kleine Verzögerungen oder leichte Unzufriedenheit.\n**[POSITIV]** - Funktioniert gut oder kommt gut an.`;\n    }\n    /**\n   * ADVANCED Instructions für detaillierte wissenschaftliche Analyse\n   * Umfassende Anweisungen für systematische Problemidentifikation\n   */ static getAdvancedInstructions(language = 'de') {\n        if (language === 'en') {\n            return `<instructions>\nAnalyze the provided app view and identify usability issues based on the app domain and user perspective.\n\n## Structured Input Analysis:\nYou will receive the following information:\n- **App Description**: Context and purpose of the application\n- **User Task**: Main goal of interaction with this view  \n- **View Name**: Name of the current screen view\n- **Source Code**: SwiftUI/React/Other code of the view (if available)\n- **Screenshot**: Visual state of the application\n\n## Analysis Focus (based on UX-LLM Research):\nFocus on problems that affect **real users in actual situations**:\n\n### Visual Perception:\n- Color contrasts and readability in different lighting conditions\n- Font sizes and their scalability  \n- Visual hierarchy and information architecture\n- Icon comprehensibility without text labels\n\n### Interaction and Feedback:\n- Visual feedback on user interactions\n- Touch target sizes (minimum 44px for mobile devices)\n- Loading states and wait time indicators\n- Clarity of interactive elements\n\n### Navigation and Orientation:\n- Clarity of navigation structure\n- Orientation aids and progress indicators\n- Back button functionality and labeling\n- Discoverability of hidden functions\n\n### Content and Comprehensibility:\n- Clarity of descriptions and labels\n- Consistency in terminology and designations\n- Marking of required fields\n- Comprehensibility of error messages\n\n### Accessibility:\n- Support for users with visual impairments\n- Alternative texts and labels for screen readers\n- Keyboard navigation and assistive technologies\n- Color coding as the only source of information\n\n## Output Format (strictly follow):\n- **No introductory or concluding texts**\n- **Each problem in a standalone paragraph**\n- **One blank line after each problem**\n- **User-oriented language without technical jargon**\n- **No numbering or bullet points**\n- **Don't mention code details or technical terminology**\n\n## IMPORTANT: Categorization of Findings\nEach finding MUST begin with one of the following assessments:\n\n**[CATASTROPHIC]** - Existential threats, there is a risk of major damage to the user or organization. This assessment should only be given after consultation with management, never by the UX professional alone.\n**[CRITICAL]** - Test participants have given up or are very dissatisfied, or there is a risk of minor damage to the user\n**[SERIOUS]** - Significant delays or moderate dissatisfaction\n**[MINOR]** - Noticeable delays or minor dissatisfaction\n**[POSITIVE]** - Something that worked well in the current usability test or that test participants liked\n\nExample of correct format:\n**[CRITICAL]** Test participants consistently gave up when trying to complete the booking process, indicating major user dissatisfaction.\n\n**[POSITIVE]** The color scheme was well-received by test participants as it supports clear visual hierarchy and worked well in the usability test.\n\n**[SERIOUS]** Small font sizes cause significant delays in reading and lead to moderate dissatisfaction, especially in poor lighting conditions.\n\nConduct an open, exploratory problem identification without limiting the number of problems. Let yourself be guided by the provided input and identify the most important usability challenges for real users.\n</instructions>`;\n        }\n        return `<instructions>\nAnalysiere die bereitgestellte App-Ansicht und identifiziere Usability-Probleme basierend auf der App-Domäne und Nutzerperspektive.\n\n## Strukturierte Eingabe-Analyse:\nDu erhältst folgende Informationen:\n- **App-Beschreibung**: Kontext und Zweck der Anwendung\n- **Benutzeraufgabe**: Hauptziel der Interaktion mit dieser Ansicht  \n- **Ansichtsname**: Bezeichnung der aktuellen Bildschirmansicht\n- **Quellcode**: SwiftUI/React-Code/Anderer Code der Ansicht (falls verfügbar)\n- **Screenshot**: Visueller Zustand der Anwendung\n\n## Analysefokus (basierend auf UX-LLM Forschung):\nKonzentriere dich auf Probleme, die **echte Nutzer in realen Situationen** beeinträchtigen:\n\n### Visuelle Wahrnehmung:\n- Farbkontraste und Lesbarkeit bei verschiedenen Lichtverhältnissen\n- Schriftgrößen und deren Skalierbarkeit  \n- Visuelle Hierarchie und Informationsarchitektur\n- Icon-Verständlichkeit ohne Textlabels\n\n### Interaktion und Feedback:\n- Visuelles Feedback bei Benutzerinteraktionen\n- Touch-Target-Größen (minimum 44px für mobile Geräte)\n- Loading-States und Wartezeiten-Indikatoren\n- Eindeutigkeit von Bedienelementen\n\n### Navigation und Orientierung:\n- Klarheit der Navigationsstruktur\n- Orientierungshilfen und Fortschrittsanzeigen\n- Back-Button-Funktionalität und -beschriftung\n- Auffindbarkeit versteckter Funktionen\n\n### Inhalte und Verständlichkeit:\n- Klarheit von Beschreibungen und Labels\n- Konsistenz in Terminologie und Bezeichnungen\n- Kennzeichnung von Pflichtfeldern\n- Verständlichkeit von Fehlermeldungen\n\n### Barrierefreiheit:\n- Unterstützung für Nutzer mit Sehbehinderungen\n- Alternative Texte und Labels für Screen Reader\n- Keyboard-Navigation und assistive Technologien\n- Farbkodierung als einzige Informationsquelle\n\n## Ausgabeformat (strikt befolgen):\n- **Keine einleitende oder abschließende Texte**\n- **Jedes Problem in einem eigenständigen Absatz**\n- **Eine Leerzeile nach jedem Problem**\n- **Nutzerorientierte Sprache ohne Fachbegriffe**\n- **Keine Nummerierung oder Bulletpoints**\n- **Keine Code-Details oder technische Terminologie erwähnen**\n\n## WICHTIG: Kategorisierung der Befunde\nJeder Befund MUSS mit einer der folgenden Bewertungen beginnen. Verwende die volle Bandbreite der Kategorien basierend auf der tatsächlichen Auswirkung auf Nutzer:\n\n**[KATASTROPHAL]** - Existenzielle Bedrohungen, es besteht die Gefahr eines größeren Schadens für den Benutzer oder die Organisation. Diese Bewertung sollte nur nach Rücksprache mit dem Management vergeben werden, keinesfalls durch den UX Professional allein.\n**[KRITISCH]** - Die Testteilnehmer haben aufgegeben oder sind sehr unzufrieden, oder es besteht die Gefahr eines geringfügigen Schadens für den Benutzer\n**[ERNST]** - Erhebliche Verzögerungen oder mäßige Unzufriedenheit\n**[GERING]** - Spürbare Verzögerungen oder geringe Unzufriedenheit\n**[POSITIV]** - Etwas, das im Rahmen des aktuellen Usability-Tests gut funktioniert hat oder den Testteilnehmern gefallen hat\n\nBeispiel für korrektes Format:\n**[KRITISCH]** Testteilnehmer gaben durchweg auf, als sie versuchten, den Buchungsvorgang abzuschließen, was auf große Unzufriedenheit hinweist.\n\n**[POSITIV]** Die Farbgebung hat den Testteilnehmern gut gefallen und funktionierte im Usability-Test gut, da sie eine klare visuelle Hierarchie unterstützt.\n\n**[ERNST]** Kleine Schriftgrößen verursachen erhebliche Verzögerungen beim Lesen und führen zu mäßiger Unzufriedenheit, besonders bei schlechten Lichtverhältnissen.\n\nFühre eine offene, explorative Problemidentifikation durch ohne Begrenzung der Anzahl der Probleme. Lass dich von der bereitgestellten Eingabe leiten und identifiziere die wichtigsten Usability-Herausforderungen für echte Nutzer.\n</instructions>`;\n    }\n    /**\n   * Strukturierte Eingabe mit XML-ähnlichen Tags\n   * Basiert auf UX-LLM Studie: \"Use delimiters to clearly indicate distinct parts of the input\"\n   * Trennt verschiedene Informationskomponenten klar voneinander für bessere LLM-Verarbeitung\n   * \n   * @param appContext - Der App-Kontext\n   * @param variant - Die Prompt-Variante (bestimmt das Format)\n   */ static formatStructuredInput(appContext, variant, language = 'de') {\n        // Für STUDY-PURE verwenden wir das originale Format aus der IEEE-Studie\n        if (variant === 'study-pure') {\n            return this.formatStudyPureInput(appContext, language);\n        }\n        // Für andere Varianten verwenden wir das XML-ähnliche Format\n        if (language === 'en') {\n            return `<app_context>\n<app_overview>\n${appContext.appDescription}\n</app_overview>\n\n<user_task>\n${appContext.userTask}\n</user_task>\n\n<view_name>\n${appContext.viewName}\n</view_name>\n\n${appContext.sourceCode ? `<source_code>\n${appContext.sourceCode}\n</source_code>` : ''}\n</app_context>\n\n<image>\n[The provided image shows the current state of the application]\n</image>`;\n        }\n        return `<app_context>\n<app_overview>\n${appContext.appDescription}\n</app_overview>\n\n<user_task>\n${appContext.userTask}\n</user_task>\n\n<view_name>\n${appContext.viewName}\n</view_name>\n\n${appContext.sourceCode ? `<source_code>\n${appContext.sourceCode}\n</source_code>` : ''}\n</app_context>\n\n<image>\n[Das bereitgestellte Bild zeigt den aktuellen Zustand der Anwendung]\n</image>`;\n    }\n    /**\n   * Formatiert die Eingabe im originalen IEEE-Studien-Format\n   * Jetzt auch mit deutscher Übersetzung und UI-Modus verfügbar\n   * \n   * @param appContext - Der App-Kontext\n   * @param language - Sprache des Inputs\n   * @param uiMode - 'swiftui-only' für originalgetreue Studie oder 'generalized' für verschiedene UI-Technologien\n   */ static formatStudyPureInput(appContext, language = 'en', uiMode = 'swiftui-only') {\n        if (language === 'de') {\n            if (uiMode === 'swiftui-only') {\n                return `Ich habe eine iOS-App über: ${appContext.appDescription}\nDie Aufgabe des Nutzers in dieser App-Ansicht handelt von: ${appContext.userTask}.\nEin Bild der App-Ansicht wird bereitgestellt.\nUnten ist der unvollständige SwiftUI-Code für die App-\nAnsicht.\nDieser Code enthält die Benutzeroberfläche der Ansicht und ein\nView Model für die Logik-Behandlung.\nEr kann auch zusätzliche Komponenten wie\nUnteransichten, Modelle oder Vorschau-Code enthalten.\nQuellcode:\n${appContext.sourceCode || '[Kein Quellcode bereitgestellt]'}`;\n            } else {\n                return `Ich habe eine Anwendung über: ${appContext.appDescription}\nDie Aufgabe des Nutzers in dieser Ansicht handelt von: ${appContext.userTask}.\nEin Bild der Anwendung wird bereitgestellt.\nUnten ist der Quellcode für die Ansicht (falls verfügbar).\nDieser Code kann verschiedene UI-Technologien verwenden \n(SwiftUI, React, HTML/CSS, Flutter, etc.).\nQuellcode:\n${appContext.sourceCode || '[Kein Quellcode bereitgestellt]'}`;\n            }\n        }\n        if (uiMode === 'swiftui-only') {\n            return `I have an iOS app about: ${appContext.appDescription}\nThe user's task in this app view is about: ${appContext.userTask}.\nAn image of the app view is provided.\nBelow is the incomplete SwiftUI code for the app\nview.\nThis code includes the view's user interface and a\nview model for logic handling.\nIt may also include additional components like\nsubviews, models, or preview code.\nSource Code:\n${appContext.sourceCode || '[No source code provided]'}`;\n        } else {\n            return `I have an application about: ${appContext.appDescription}\nThe user's task in this view is about: ${appContext.userTask}.\nAn image of the application is provided.\nBelow is the source code for the view (if available).\nThis code may use various UI technologies \n(SwiftUI, React, HTML/CSS, Flutter, etc.).\nSource Code:\n${appContext.sourceCode || '[No source code provided]'}`;\n        }\n    }\n    /**\n   * Nutzerorientierte Beispiele für freie Problemidentifikation\n   * Basiert auf UX-LLM Studie: Offene Problemidentifikation ohne strukturelle Zwänge\n   * Nutzt One-Shot Prompting mit konkreten Beispielen aus der wissenschaftlichen Forschung\n   * \n   * @param language - Sprache der Beispiele\n   * @param variant - Prompt-Variante (basic variant erhält keine Beispiele)\n   */ static getExamples(language = 'de', variant) {\n        // Basic-Variante erhält keine Beispiele für minimalistischen Ansatz\n        if (variant === 'basic') {\n            return '';\n        }\n        if (language === 'de') {\n            return `<examples>\n**Beispiele für korrekte Kategorisierung verschiedener Schweregrade:**\n\n**[KATASTROPHAL]** Login-Button ist völlig unsichtbar und nicht funktionsfähig. Nutzer können sich nicht anmelden und die App ist somit unbrauchbar.\n\n**[KRITISCH]** Fehlende visuelles Feedback bei kritischen Aktionen wie \"Kauf abschließen\" führt dazu, dass Nutzer unsicher sind und den Vorgang abbrechen.\n\n**[ERNST]** Navigation zwischen Bildschirmen ist verwirrend und unintuitiv, was zu längeren Suchzeiten und mäßiger Nutzerfrustration führt.\n\n**[GERING]** Schriftgröße in der Fußzeile ist etwas klein, beeinträchtigt aber die Hauptfunktionen nicht wesentlich.\n\n**[POSITIV]** Klare Farbcodierung und konsistente Symbole unterstützen eine intuitive Bedienung und wurden von Testteilnehmern positiv bewertet.\n\n**WICHTIG: Verwende diese vollständige Bandbreite von Kategorien in deiner Analyse!**\n</examples>`;\n        }\n        return `<examples>\n**Examples of correct categorization across different severity levels:**\n\n**[CATASTROPHIC]** Login button is completely invisible and non-functional. Users cannot log in and the app is therefore unusable.\n\n**[CRITICAL]** Missing visual feedback for critical actions like \"Complete Purchase\" causes users to be uncertain and abandon the process.\n\n**[SERIOUS]** Navigation between screens is confusing and unintuitive, leading to longer search times and moderate user frustration.\n\n**[MINOR]** Font size in the footer is somewhat small, but does not significantly impact main functions.\n\n**[POSITIVE]** Clear color coding and consistent icons support intuitive operation and were positively rated by test participants.\n\n**IMPORTANT: Use this full range of categories in your analysis!**\n</examples>`;\n    }\n    /**\n   * Erstellt einen spezifischen Prompt für die iterative Optimierung\n   * Verwendet bei der Prompt-Verfeinerung während der Datengenerierung\n   * Kritischer Schritt im Prompt Engineering zur kontinuierlichen Verbesserung\n   */ static createRefinedPrompt(appContext, previousIssues) {\n        const basePrompt = this.createUsabilityPrompt(appContext, false);\n        const refinements = this.getRefinements(previousIssues);\n        return `${basePrompt}\n\n${refinements}`;\n    }\n    /**\n   * Verfeinerungen basierend auf vorherigen Iterationen\n   * Systematische Anpassungen um Qualität der LLM-Ausgaben zu steigern\n   */ static getRefinements(previousIssues) {\n        return `<refinements>\nBerücksichtige folgende Punkte aus vorherigen Analysen:\n${previousIssues.map((issue)=>`- ${issue}`).join('\\n')}\n\nVermeide häufige Probleme:\n- Wiederholung bereits genannter Probleme\n- Zu allgemeine oder vage Aussagen (\"schlechte Navigation\")\n- Spekulative Probleme ohne klare Evidenz\n- Technische Details, die nicht nutzerzentriert sind\n- Irrelevante Informationen außerhalb der Usability-Bewertung\n- Halluzinationen von nicht vorhandenen UI-Elementen\n\nFokussiere stattdessen auf:\n- Spezifische, nachvollziehbare Probleme\n- Direkte Auswirkungen auf die Benutzererfahrung\n- Konkrete Verbesserungsvorschläge\n</refinements>`;\n    }\n    /**\n   * A/B/C Testing Utility für einfache Prompt-Varianten-Auswahl\n   * Bietet eine einfache Schnittstelle für das Testen aller drei Varianten\n   * \n   * @param appContext - App-Kontext für die Analyse\n   * @param variant - Welche Variante verwendet werden soll\n   * @param includeExamples - Ob Beispiele inkludiert werden sollen\n   * @param customPrompt - Optionale benutzerdefinierte Zusatzanweisungen\n   * @param language - Sprache der Prompts\n   * @param uiMode - UI-Technologie-Modus\n   * @returns Strukturierter Prompt für die gewählte Variante\n   */ static createABCTestPrompt(appContext, variant = 'advanced', includeExamples = false, customPrompt, language = 'de', uiMode = 'generalized') {\n        return this.createUsabilityPrompt(appContext, includeExamples, customPrompt, variant, language, uiMode);\n    }\n    /**\n   * Legacy A/B Testing Utility - behält Kompatibilität bei\n   */ static createABTestPrompt(appContext, testPure = false, includeExamples = false, customPrompt, language = 'de', uiMode = 'generalized') {\n        const variant = testPure ? 'basic' : 'advanced';\n        return this.createUsabilityPrompt(appContext, includeExamples, customPrompt, variant, language, uiMode);\n    }\n    /**\n   * Erstellt alle drei Prompt-Varianten für direkten Vergleich\n   * Nützlich für die wissenschaftliche Auswertung und Dokumentation\n   * \n   * @param appContext - App-Kontext für die Analyse\n   * @param includeExamples - Ob Beispiele inkludiert werden sollen\n   * @param customPrompt - Optionale benutzerdefinierte Zusatzanweisungen\n   * @param language - Sprache der Prompts\n   * @param uiMode - UI-Technologie-Modus\n   * @returns Objekt mit allen drei Prompt-Varianten\n   */ static createAllVariants(appContext, includeExamples = false, customPrompt, language = 'de', uiMode = 'generalized') {\n        return {\n            studyPure: this.createUsabilityPrompt(appContext, includeExamples, customPrompt, 'study-pure', language, uiMode),\n            basic: this.createUsabilityPrompt(appContext, includeExamples, customPrompt, 'basic', language, uiMode),\n            advanced: this.createUsabilityPrompt(appContext, includeExamples, customPrompt, 'advanced', language, uiMode)\n        };\n    }\n    /**\n   * Legacy-Kompatibilität: Erstellt beide ursprüngliche Varianten\n   */ static createBothVariants(appContext, includeExamples = false, customPrompt, language = 'de', uiMode = 'generalized') {\n        return {\n            basic: this.createUsabilityPrompt(appContext, includeExamples, customPrompt, 'basic', language, uiMode),\n            advanced: this.createUsabilityPrompt(appContext, includeExamples, customPrompt, 'advanced', language, uiMode)\n        };\n    }\n}\n/**\n * Prompt-Varianten für verschiedene LLM-Modelle\n * Ermöglicht modellspezifische Optimierungen basierend auf Stärken der LLMs\n */ const ModelSpecificPrompts = {\n    'gpt4o': {\n        systemRole: 'Als multimodaler UX-Experte mit Fokus auf visueller Analyse, nutze deine Fähigkeiten zur detaillierten Bild- und Textanalyse für eine umfassende Usability-Bewertung. Analysiere sowohl die visuellen Elemente als auch die strukturellen Aspekte der Benutzeroberfläche.',\n        focusAreas: [\n            'Visuelle Hierarchie',\n            'Interaktionsdesign',\n            'Multimodale Konsistenz',\n            'Ästhetische Bewertung',\n            'Informationsarchitektur'\n        ],\n        additionalInstructions: 'Nutze deine visuellen Analysefähigkeiten, um detaillierte Bewertungen zu Farben, Typografie, Layoutstrukturen und visuellen Affordanzen zu geben.'\n    },\n    'claude4': {\n        systemRole: 'Als UX-Experte mit Fokus auf analytische Tiefe und längere Kontexte, nutze deine Fähigkeit zur Verarbeitung komplexer Informationen für eine strukturierte, wissenschaftlich fundierte Analyse mit ausführlichen Begründungen.',\n        focusAreas: [\n            'Nutzerflow-Analyse',\n            'Kognitive Belastung',\n            'Konsistenz-Prüfung',\n            'Detaillierte Heuristik-Bewertung',\n            'Kontextübergreifende Probleme',\n            'Wissenschaftliche Fundierung'\n        ],\n        additionalInstructions: 'Führe eine tiefgehende Analyse durch mit ausführlichen Begründungen, wissenschaftlichen Referenzen und detaillierten Bewertungen jeder Nielsen-Heuristik.'\n    },\n    'llama3': {\n        systemRole: 'Als UX-Experte mit Fokus auf praktische und direkte Problembenennung, analysiere aus nutzerorientierter Sicht mit klaren, umsetzbaren Empfehlungen. Konzentriere dich auf die wichtigsten Usability-Aspekte.',\n        focusAreas: [\n            'Grundlegende Usability-Prinzipien',\n            'Klare Problemidentifikation',\n            'Zugänglichkeit',\n            'Nutzerfreundlichkeit',\n            'Praktische Lösungen'\n        ],\n        additionalInstructions: 'Konzentriere dich auf die wichtigsten Usability-Probleme mit klaren, praktischen Lösungsvorschlägen. Vermeide übermäßig technische Terminologie.'\n    }\n};\n/**\n * Qualitätskontrolle für LLM-Antworten\n * Prüft die Antwort auf typische Probleme\n */ class ResponseValidator {\n    static validateResponse(response) {\n        const issues = [];\n        const suggestions = [];\n        // Prüfe auf zu kurze Antworten\n        if (response.length < 200) {\n            issues.push('Antwort zu kurz - möglicherweise unvollständig');\n            suggestions.push('Prompt erweitern oder spezifischere Anweisungen geben');\n        }\n        // Prüfe auf wiederholte Phrasen (mögliche Halluzination)\n        const words = response.split(' ');\n        const repeatedPhrases = this.findRepeatedPhrases(words);\n        if (repeatedPhrases.length > 0) {\n            issues.push('Wiederholte Phrasen entdeckt');\n            suggestions.push('Prompt zur Vermeidung von Wiederholungen anpassen');\n        }\n        // Prüfe auf Struktur\n        if (!response.includes('##') && !response.includes('**')) {\n            issues.push('Fehlende Strukturierung der Antwort');\n            suggestions.push('Klarere Formatierungsanweisungen im Prompt');\n        }\n        return {\n            isValid: issues.length === 0,\n            issues,\n            suggestions\n        };\n    }\n    static findRepeatedPhrases(words) {\n        // Vereinfachte Implementierung - kann erweitert werden\n        const phrases = new Map();\n        for(let i = 0; i < words.length - 2; i++){\n            const phrase = words.slice(i, i + 3).join(' ');\n            phrases.set(phrase, (phrases.get(phrase) || 0) + 1);\n        }\n        return Array.from(phrases.entries()).filter(([_, count])=>count > 1).map(([phrase, _])=>phrase);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dW1lbnRzXFxCYWNoZWxvcnByb2pla3RcXHNyY1xcbGliXFxwcm9tcHRFbmdpbmVlcmluZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBDb250ZXh0IH0gZnJvbSAnQC90eXBlcydcblxuLyoqXG4gKiBQcm9tcHQgRW5naW5lZXJpbmcgZsO8ciBMTE0tYmFzaWVydGUgVXNhYmlsaXR5LUFuYWx5c2VcbiAqIEJhc2llcnQgYXVmIHdpc3NlbnNjaGFmdGxpY2hlciBNZXRob2RpayBkZXIgQmFjaGVsb3JhcmJlaXRcbiAqIFxuICogRGllc2UgSW1wbGVtZW50aWVydW5nIGludGVncmllcnQgRXJrZW5udG5pc3NlIGF1cyBkZXIgVVgtTExNIFN0dWRpZSAoSUVFRSBYcGxvcmU6IDExMDI5OTE4KVxuICogdW5kIGVybcO2Z2xpY2h0IEEvQi9DIFRlc3Rpbmcgendpc2NoZW4gdmVyc2NoaWVkZW5lbiBQcm9tcHQtQW5zw6R0emVuLlxuICovXG5cbi8qKlxuICogVHlwZSBmw7xyIGRpZSB2ZXJmw7xnYmFyZW4gUHJvbXB0LVZhcmlhbnRlblxuICovXG5leHBvcnQgdHlwZSBQcm9tcHRWYXJpYW50ID0gJ3N0dWR5LXB1cmUnIHwgJ2Jhc2ljJyB8ICdhZHZhbmNlZCc7XG5cbmV4cG9ydCB0eXBlIFVJVGVjaG5vbG9neU1vZGUgPSAnc3dpZnR1aS1vbmx5JyB8ICdnZW5lcmFsaXplZCdcblxuZXhwb3J0IGludGVyZmFjZSBQcm9tcHRDb25maWcge1xuICB2YXJpYW50OiBQcm9tcHRWYXJpYW50XG4gIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJ1xuICB1aU1vZGU6IFVJVGVjaG5vbG9neU1vZGVcbiAgaW5jbHVkZUV4YW1wbGVzOiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBQcm9tcHRFbmdpbmVlciB7XG4gIC8qKlxuICAgKiBBL0IvQyBUZXN0aW5nIEtvbmZpZ3VyYXRpb24gZsO8ciBQcm9tcHQtVmFyaWFudGVuIG1pdCBVSS1UZWNobm9sb2dpZS1Nb2RpXG4gICAqIFxuICAgKiBGT1JTQ0hVTkdTLUhJTldFSVM6XG4gICAqIERpZXNlIEltcGxlbWVudGllcnVuZyBlcm3DtmdsaWNodCBkYXMgVGVzdGVuIGRyZWllciB3aXNzZW5zY2hhZnRsaWNoIGZ1bmRpZXJ0ZXIgUHJvbXB0LUFuc8OkdHplXG4gICAqIG1pdCB6dXPDpHR6bGljaGVyIFdhaGwgendpc2NoZW4gb3JpZ2luYWxnZXRyZXVlciBTd2lmdFVJLUZva3Vzc2llcnVuZyB1bmQgZ2VuZXJhbGlzaWVydGVyIFVJLUJld2VydHVuZzpcbiAgICogXG4gICAqIEEuIFwiU1RVRFktUFVSRVwiIC0gT3JpZ2luYWxlIElFRUUtU3R1ZGllIFwiRG9lcyBHZW5BSSBNYWtlIFVzYWJpbGl0eSBUZXN0aW5nIE9ic29sZXRlP1wiXG4gICAqICAgIFN3aWZ0VUktT25seSBNb2R1czpcbiAgICogICAgLSBFeGFrdGUgUmVwbGlrYXRpb24gZGVyIE9yaWdpbmFsc3R1ZGllIChQcm9mLiBGZW1tZXIgRW1wZmVobHVuZylcbiAgICogICAgLSBOdXIgZsO8ciBpT1MvU3dpZnRVSS1BcHBzICh3aWUgaW4gZGVyIHVyc3Byw7xuZ2xpY2hlbiBGb3JzY2h1bmcpXG4gICAqICAgIC0gRGlyZWt0ZSBWZXJnbGVpY2hiYXJrZWl0IG1pdCBwdWJsaXppZXJ0ZW4gRXJnZWJuaXNzZW5cbiAgICogICAgLSBNZXRob2Rpc2NoIGtvbnNpc3RlbnQgdW5kIHdpc3NlbnNjaGFmdGxpY2ggZnVuZGllcnRcbiAgICogICAgXG4gICAqICAgIEdlbmVyYWxpc2llcnRlciBNb2R1czpcbiAgICogICAgLSBTeXN0ZW3DvGJlcmdyZWlmZW5kZXMgS25vdy1ob3cgenVyIFVJLUJld2VydHVuZ1xuICAgKiAgICAtIFZlcnNjaGllZGVuZSBVSS1UZWNobm9sb2dpZW4gKFN3aWZ0VUksIFJlYWN0LCBGbHV0dGVyLCBIVE1ML0NTUylcbiAgICogICAgLSBFcndlaXRlcnRlIEFud2VuZGJhcmtlaXQgZsO8ciBtb2Rlcm5lIEZvcnNjaHVuZ3NyaWNodHVuZ2VuXG4gICAqICAgIC0gVW50ZXJzdGVsbHQgZGVtIExMTSBicmVpdGVyZSBVSS1FeHBlcnRpc2VcbiAgICogXG4gICAqIEIuIFwiQkFTSUNcIiAtIEFkYXB0aWVydGUgVmVyc2lvbiBiYXNpZXJlbmQgYXVmIFVYLUxMTSBTdHVkaWUgKElFRUUgWHBsb3JlOiAxMTAyOTkxOClcbiAgICogICAgLSBNaW5pbWFsaXN0aXNjaGVyIEFuc2F0eiBtaXQgZWluZmFjaGVyIEthdGVnb3Jpc2llcnVuZ1xuICAgKiAgICAtIEt1cnplLCBwcsOkZ25hbnRlIEluc3RydWt0aW9uZW5cbiAgICogICAgLSBGb2t1cyBhdWYgb2ZmZW5lIFByb2JsZW1pZGVudGlmaWthdGlvblxuICAgKiAgICAtIFNwcmFjaGUgd8OkaGxiYXIgKERFL0VOKVxuICAgKiBcbiAgICogQy4gXCJBRFZBTkNFRFwiIC0gRXJ3ZWl0ZXJ0ZSBWYXJpYW50ZSBmw7xyIFRoZXNpcy1MZXZlbCBBbmFseXNlXG4gICAqICAgIC0gRGV0YWlsbGllcnRlIEV4cGVydGlzZS1CZXNjaHJlaWJ1bmcgbWl0IHdpc3NlbnNjaGFmdGxpY2hlciBLYXRlZ29yaXNpZXJ1bmdcbiAgICogICAgLSBTdHJ1a3R1cmllcnRlIFByb2JsZW1rYXRlZ29yaWVuIGJhc2llcmVuZCBhdWYgVXNhYmlsaXR5LVRlc3QtRXJnZWJuaXNzZW5cbiAgICogICAgLSBXaXNzZW5zY2hhZnRsaWNoZSBBbmFseXNlbWV0aG9kaWsgbWl0IE5pZWxzZW4ncyBIZXVyaXN0aWtlblxuICAgKiAgICAtIFVtZmFzc2VuZGUgUXVhbGl0w6R0c2tyaXRlcmllbiB1bmQgSVNPLVN0YW5kYXJkc1xuICAgKiBcbiAgICogVUktVEVDSE5PTE9HSUUtTU9ESTpcbiAgICogLSAnc3dpZnR1aS1vbmx5JzogT3JpZ2luYWxnZXRyZXUgZsO8ciBkaXJla3RlIFN0dWRpZW5yZXBsaWthdGlvbiAoZW1wZm9obGVuIGbDvHIgU1RVRFktUFVSRSlcbiAgICogLSAnZ2VuZXJhbGl6ZWQnOiBTeXN0ZW3DvGJlcmdyZWlmZW5kIGbDvHIgbW9kZXJuZSBNdWx0aS1QbGF0Zm9ybS1BbndlbmR1bmdlblxuICAgKiBcbiAgICogVmVyd2VuZHVuZyBmw7xyIEEvQi9DIFRlc3Rpbmc6XG4gICAqIC0gVmVyd2VuZGUgJ1NUVURZLVBVUkUnICsgJ3N3aWZ0dWktb25seScgZsO8ciBleGFrdGUgSUVFRS1TdHVkaWVuLVJlcGxpa2F0aW9uXG4gICAqIC0gVmVyd2VuZGUgJ1NUVURZLVBVUkUnICsgJ2dlbmVyYWxpemVkJyBmw7xyIGVyd2VpdGVydGUgQW53ZW5kYmFya2VpdFxuICAgKiAtIFZlcndlbmRlICdCQVNJQycgZsO8ciB2ZXJlaW5mYWNodGUgZGV1dHNjaGUvZW5nbGlzY2hlIEV2YWx1YXRpb25cbiAgICogLSBWZXJ3ZW5kZSAnQURWQU5DRUQnIGbDvHIgZGV0YWlsbGllcnRlIHdpc3NlbnNjaGFmdGxpY2hlIFRoZXNpcy1BbmFseXNlXG4gICAqIC0gRG9rdW1lbnRpZXJlIEVyZ2Vibmlzc2UgYWxsZXIgVmFyaWFudGVuIGbDvHIgZW1waXJpc2NoZSBBdXN3ZXJ0dW5nXG4gICAqL1xuICBzdGF0aWMgcmVhZG9ubHkgUFJPTVBUX1ZBUklBTlRTID0ge1xuICAgIFNUVURZX1BVUkU6ICdzdHVkeS1wdXJlJywgIC8vIEE6IE9yaWdpbmFsIElFRUUtU3R1ZGllXG4gICAgQkFTSUM6ICdiYXNpYycsICAgICAgICAgICAgICAvLyBCOiBNaW5pbWFsaXN0aXNjaCwgc3R1ZGllbmJhc2llcnQgKGRldXRzY2gpXG4gICAgQURWQU5DRUQ6ICdhZHZhbmNlZCcgICAgICAgLy8gQzogRXJ3ZWl0ZXJ0LCB0aGVzaXMtbGV2ZWxcbiAgfSBhcyBjb25zdDtcblxuICAvKipcbiAgICogRXJzdGVsbHQgZWluZW4gc3RydWt0dXJpZXJ0ZW4gUHJvbXB0IGbDvHIgZGllIFVzYWJpbGl0eS1BbmFseXNlXG4gICAqIG1pdCBQZXJzb25hLUluc3RydWt0aW9uIHVuZCBrbGFyZXIgSW5wdXRnZXN0YWx0dW5nXG4gICAqIFxuICAgKiBAcGFyYW0gYXBwQ29udGV4dCAtIEFwcC1Lb250ZXh0IGbDvHIgZGllIEFuYWx5c2VcbiAgICogQHBhcmFtIGluY2x1ZGVFeGFtcGxlcyAtIE9iIEJlaXNwaWVsZSBpbmtsdWRpZXJ0IHdlcmRlbiBzb2xsZW5cbiAgICogQHBhcmFtIGN1c3RvbVByb21wdCAtIEJlbnV0emVyZGVmaW5pZXJ0ZSBadXNhdHphbndlaXN1bmdlblxuICAgKiBAcGFyYW0gdmFyaWFudCAtIFByb21wdC1WYXJpYW50ZSBmw7xyIEEvQi9DIFRlc3RpbmcgKCdzdHVkeS1wdXJlJywgJ2Jhc2ljJyBvZGVyICdhZHZhbmNlZCcpXG4gICAqIEBwYXJhbSBsYW5ndWFnZSAtIFNwcmFjaGUgZGVyIFByb21wdHMgKCdkZScgZsO8ciBEZXV0c2NoLCAnZW4nIGbDvHIgRW5nbGlzY2gpXG4gICAqIEBwYXJhbSB1aU1vZGUgLSAnc3dpZnR1aS1vbmx5JyBmw7xyIG9yaWdpbmFsZ2V0cmV1ZSBTdHVkaWUgb2RlciAnZ2VuZXJhbGl6ZWQnIGbDvHIgdmVyc2NoaWVkZW5lIFVJLVRlY2hub2xvZ2llblxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVVzYWJpbGl0eVByb21wdChcbiAgICBhcHBDb250ZXh0OiBBcHBDb250ZXh0LCBcbiAgICBpbmNsdWRlRXhhbXBsZXM6IGJvb2xlYW4gPSBmYWxzZSwgXG4gICAgY3VzdG9tUHJvbXB0Pzogc3RyaW5nLFxuICAgIHZhcmlhbnQ6IFByb21wdFZhcmlhbnQgPSAnYWR2YW5jZWQnLFxuICAgIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScsXG4gICAgdWlNb2RlOiBVSVRlY2hub2xvZ3lNb2RlID0gJ2dlbmVyYWxpemVkJ1xuICApOiBzdHJpbmcge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb21wdEVuZ2luZWVyIERlYnVnIC0gQ3JlYXRpbmcgcHJvbXB0IHdpdGggdmFyaWFudDonLCB2YXJpYW50LCAnVUkgbW9kZTonLCB1aU1vZGUpXG4gICAgXG4gICAgLy8gRsO8ciBTVFVEWS1QVVJFOiBOdXIgU3lzdGVtLVByb21wdCArIFVzZXItSW5wdXQgKG9yaWdpbmFsZ2V0cmV1KVxuICAgIGlmICh2YXJpYW50ID09PSAnc3R1ZHktcHVyZScpIHtcbiAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IHRoaXMuZ2V0U3R1ZHlQdXJlU3lzdGVtUHJvbXB0KGxhbmd1YWdlLCB1aU1vZGUpXG4gICAgICBjb25zdCB1c2VySW5wdXQgPSB0aGlzLmZvcm1hdFN0dWR5UHVyZUlucHV0KGFwcENvbnRleHQsIGxhbmd1YWdlLCB1aU1vZGUpXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb21wdEVuZ2luZWVyIERlYnVnIC0gU1RVRFktUFVSRTogU3lzdGVtIHByb21wdCBsZW5ndGg6Jywgc3lzdGVtUHJvbXB0Lmxlbmd0aClcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb21wdEVuZ2luZWVyIERlYnVnIC0gU1RVRFktUFVSRTogVXNlciBpbnB1dCBsZW5ndGg6JywgdXNlcklucHV0Lmxlbmd0aClcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb21wdEVuZ2luZWVyIERlYnVnIC0gU1RVRFktUFVSRTogTGFuZ3VhZ2U6JywgbGFuZ3VhZ2UsICdVSSBNb2RlOicsIHVpTW9kZSlcbiAgICAgIFxuICAgICAgLy8gRsO8ciBTVFVEWS1QVVJFIHdlcmRlbiBrZWluZSBDdXN0b20tUHJvbXB0cywgQmVpc3BpZWxlIG9kZXIgenVzw6R0emxpY2hlIEluc3RydWt0aW9uZW4gdmVyd2VuZGV0XG4gICAgICAvLyB1bSBkaWUgT3JpZ2luYWxpdMOkdCBkZXIgSUVFRS1TdHVkaWUgenUgYmV3YWhyZW5cbiAgICAgIHJldHVybiBgJHtzeXN0ZW1Qcm9tcHR9XG5cbiR7dXNlcklucHV0fWBcbiAgICB9XG4gICAgXG4gICAgLy8gRsO8ciBhbmRlcmUgVmFyaWFudGVuOiBWb2xsc3TDpG5kaWdlIFN0cnVrdHVyXG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gdmFyaWFudCA9PT0gJ2Jhc2ljJyBcbiAgICAgID8gdGhpcy5nZXRCYXNpY1N5c3RlbVByb21wdChsYW5ndWFnZSlcbiAgICAgIDogdGhpcy5nZXRBZHZhbmNlZFN5c3RlbVByb21wdChsYW5ndWFnZSlcbiAgICBcbiAgICBjb25zdCBzdHJ1Y3R1cmVkSW5wdXQgPSB0aGlzLmZvcm1hdFN0cnVjdHVyZWRJbnB1dChhcHBDb250ZXh0LCB2YXJpYW50LCBsYW5ndWFnZSlcbiAgICBjb25zdCBleGFtcGxlcyA9IGluY2x1ZGVFeGFtcGxlcyA/IHRoaXMuZ2V0RXhhbXBsZXMobGFuZ3VhZ2UsIHZhcmlhbnQpIDogJydcbiAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSB2YXJpYW50ID09PSAnYmFzaWMnXG4gICAgICA/IHRoaXMuZ2V0QmFzaWNJbnN0cnVjdGlvbnMobGFuZ3VhZ2UpXG4gICAgICA6IHRoaXMuZ2V0QWR2YW5jZWRJbnN0cnVjdGlvbnMobGFuZ3VhZ2UpXG4gICAgXG4gICAgY29uc29sZS5sb2coJ/CflI0gUHJvbXB0RW5naW5lZXIgRGVidWcgLSBTZWxlY3RlZCBzeXN0ZW0gcHJvbXB0IHR5cGU6JywgdmFyaWFudClcbiAgICBjb25zb2xlLmxvZygn8J+UjSBQcm9tcHRFbmdpbmVlciBEZWJ1ZyAtIFN5c3RlbSBwcm9tcHQgbGVuZ3RoOicsIHN5c3RlbVByb21wdC5sZW5ndGgpXG4gICAgY29uc29sZS5sb2coJ/CflI0gUHJvbXB0RW5naW5lZXIgRGVidWcgLSBJbnN0cnVjdGlvbnMgbGVuZ3RoOicsIGluc3RydWN0aW9ucy5sZW5ndGgpXG4gICAgXG4gICAgLy8gQmVudXR6ZXJkZWZpbmllcnRlIFByb21wdCBlaW5iaW5kZW4sIGZhbGxzIHZvcmhhbmRlblxuICAgIGNvbnN0IGN1c3RvbUluc3RydWN0aW9ucyA9IGN1c3RvbVByb21wdCA/IHRoaXMuZm9ybWF0Q3VzdG9tUHJvbXB0KGN1c3RvbVByb21wdCwgbGFuZ3VhZ2UpIDogJydcbiAgICBcbiAgICBjb25zdCBmaW5hbFByb21wdCA9IGAke3N5c3RlbVByb21wdH1cblxuJHtleGFtcGxlc31cblxuJHtzdHJ1Y3R1cmVkSW5wdXR9XG5cbiR7aW5zdHJ1Y3Rpb25zfVxuXG4ke2N1c3RvbUluc3RydWN0aW9uc31gXG5cbiAgICBjb25zb2xlLmxvZygn8J+UjSBQcm9tcHRFbmdpbmVlciBEZWJ1ZyAtIEZpbmFsIHByb21wdCBsZW5ndGg6JywgZmluYWxQcm9tcHQubGVuZ3RoKVxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFByb21wdEVuZ2luZWVyIERlYnVnIC0gRmluYWwgcHJvbXB0IHByZXZpZXcgKGZpcnN0IDIwMCBjaGFycyk6JywgZmluYWxQcm9tcHQuc3Vic3RyaW5nKDAsIDIwMCkgKyAnLi4uJylcbiAgICBcbiAgICByZXR1cm4gZmluYWxQcm9tcHRcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXRpZXJ0IGRpZSBiZW51dHplcmRlZmluaWVydGUgUHJvbXB0XG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBmb3JtYXRDdXN0b21Qcm9tcHQoY3VzdG9tUHJvbXB0OiBzdHJpbmcsIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScpOiBzdHJpbmcge1xuICAgIGlmIChsYW5ndWFnZSA9PT0gJ2VuJykge1xuICAgICAgcmV0dXJuIGBcbjxhZGRpdGlvbmFsX3JlcXVpcmVtZW50cz5cbkFkZGl0aW9uYWxseSBjb25zaWRlciB0aGUgZm9sbG93aW5nIHNwZWNpZmljIHVzZXIgcmVxdWlyZW1lbnRzOlxuXG4ke2N1c3RvbVByb21wdH1cblxuSW50ZWdyYXRlIHRoZXNlIHJlcXVpcmVtZW50cyBpbnRvIHlvdXIgYW5hbHlzaXMgYW5kIHBheSBzcGVjaWFsIGF0dGVudGlvbiB0byB0aGVzZSBhc3BlY3RzLlxuPC9hZGRpdGlvbmFsX3JlcXVpcmVtZW50cz5gXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBgXG48enVzYWV0emxpY2hlX2FuZm9yZGVydW5nZW4+XG5CZXLDvGNrc2ljaHRpZ2UgenVzw6R0emxpY2ggZm9sZ2VuZGUgc3BlemlmaXNjaGUgQW5mb3JkZXJ1bmdlbiBkZXMgQmVudXR6ZXJzOlxuXG4ke2N1c3RvbVByb21wdH1cblxuSW50ZWdyaWVyZSBkaWVzZSBBbmZvcmRlcnVuZ2VuIGluIGRlaW5lIEFuYWx5c2UgdW5kIGdlaGUgYmVzb25kZXJzIGF1ZiBkaWVzZSBBc3Bla3RlIGVpbi5cbjwvenVzYWV0emxpY2hlX2FuZm9yZGVydW5nZW4+YFxuICB9XG5cbiAgLyoqXG4gICAqIFNUVURZLVBVUkUgU3lzdGVtLVByb21wdCBiYXNpZXJlbmQgYXVmIElFRUUtU3R1ZGllIFwiRG9lcyBHZW5BSSBNYWtlIFVzYWJpbGl0eSBUZXN0aW5nIE9ic29sZXRlP1wiXG4gICAqIE9yaWdpbmFsZ2V0cmV1ZSBSZXBsaWthdGlvbiBkZXIgaW4gZGVyIFN0dWRpZSB2ZXJ3ZW5kZXRlbiBQcm9tcHRzIChhdWYgRW5nbGlzY2gpXG4gICAqIEpldHp0IGF1Y2ggbWl0IGRldXRzY2hlciDDnGJlcnNldHp1bmcgdmVyZsO8Z2JhclxuICAgKiBcbiAgICogQHBhcmFtIGxhbmd1YWdlIC0gU3ByYWNoZSBkZXMgUHJvbXB0c1xuICAgKiBAcGFyYW0gdWlNb2RlIC0gJ3N3aWZ0dWktb25seScgZsO8ciBvcmlnaW5hbGdldHJldWUgU3R1ZGllIG9kZXIgJ2dlbmVyYWxpemVkJyBmw7xyIHZlcnNjaGllZGVuZSBVSS1UZWNobm9sb2dpZW5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGdldFN0dWR5UHVyZVN5c3RlbVByb21wdChsYW5ndWFnZTogJ2RlJyB8ICdlbicgPSAnZW4nLCB1aU1vZGU6IFVJVGVjaG5vbG9neU1vZGUgPSAnc3dpZnR1aS1vbmx5Jyk6IHN0cmluZyB7XG4gICAgaWYgKGxhbmd1YWdlID09PSAnZGUnKSB7XG4gICAgICBpZiAodWlNb2RlID09PSAnc3dpZnR1aS1vbmx5Jykge1xuICAgICAgICByZXR1cm4gYER1IGJpc3QgZWluIFVYLUV4cGVydGUgZsO8ciBtb2JpbGUgaU9TLUFwcHMgbWl0IFN3aWZ0VUkuXG5EZWluZSBBdWZnYWJlIGlzdCBlcywgVXNhYmlsaXR5LVByb2JsZW1lIGFuaGFuZCBkZXIgXG5JbmZvcm1hdGlvbmVuIHp1IGlkZW50aWZpemllcmVuLCBkaWUgZHUgw7xiZXIgZWluZSBTd2lmdFVJLUFwcC1BbnNpY2h0IGVyaMOkbHRzdC5cbkVpbiBCZWlzcGllbCBmw7xyIGVpbiBVc2FiaWxpdHktUHJvYmxlbSBrw7ZubnRlIHNlaW46ICdGZWhsZW5kZXNcbnZpc3VlbGxlcyBGZWVkYmFjayBiZWkgTnV0emVyaW50ZXJha3Rpb25lbicuXG5BbnR3b3J0ZSBpbiBkZXIgU3ByYWNoZSBkZXIgQXBwLURvbcOkbmU7IGR1IGRhcmZzdCBrZWluZVxudGVjaG5pc2NoZSBUZXJtaW5vbG9naWUgdmVyd2VuZGVuIG9kZXIgQ29kZS1EZXRhaWxzIGVyd8OkaG5lbi5cblrDpGhsZSBkaWUgaWRlbnRpZml6aWVydGVuIFByb2JsZW1lIGF1ZjsgZsO8Z2UgbmFjaCBqZWRlciBcbkF1ZnrDpGhsdW5nIGVpbmVuIGxlZXJlbiBBYnNhdHogaGluenU7IGtlaW4gdm9yYW5nZXN0ZWxsdGVyXG5vZGVyIG5hY2hmb2xnZW5kZXIgVGV4dC5gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYER1IGJpc3QgZWluIFVYLUV4cGVydGUgZsO8ciBtb2JpbGUgQXBwcyB1bmQgV2ViYW53ZW5kdW5nZW4uXG5EZWluZSBBdWZnYWJlIGlzdCBlcywgVXNhYmlsaXR5LVByb2JsZW1lIGFuaGFuZCBkZXIgXG5JbmZvcm1hdGlvbmVuIHp1IGlkZW50aWZpemllcmVuLCBkaWUgZHUgw7xiZXIgZWluZSBBcHAtQW5zaWNodCBlcmjDpGx0c3QuXG5EdSB2ZXJmw7xnc3Qgw7xiZXIgc3lzdGVtw7xiZXJncmVpZmVuZGVzIEtub3ctaG93IHp1ciBVSS1CZXdlcnR1bmcgXG5mw7xyIHZlcnNjaGllZGVuZSBUZWNobm9sb2dpZW4gKFN3aWZ0VUksIFJlYWN0LCBGbHV0dGVyLCBldGMuKS5cbkVpbiBCZWlzcGllbCBmw7xyIGVpbiBVc2FiaWxpdHktUHJvYmxlbSBrw7ZubnRlIHNlaW46ICdGZWhsZW5kZXNcbnZpc3VlbGxlcyBGZWVkYmFjayBiZWkgTnV0emVyaW50ZXJha3Rpb25lbicuXG5BbnR3b3J0ZSBpbiBkZXIgU3ByYWNoZSBkZXIgQXBwLURvbcOkbmU7IGR1IGRhcmZzdCBrZWluZVxudGVjaG5pc2NoZSBUZXJtaW5vbG9naWUgdmVyd2VuZGVuIG9kZXIgQ29kZS1EZXRhaWxzIGVyd8OkaG5lbi5cblrDpGhsZSBkaWUgaWRlbnRpZml6aWVydGVuIFByb2JsZW1lIGF1ZjsgZsO8Z2UgbmFjaCBqZWRlciBcbkF1ZnrDpGhsdW5nIGVpbmVuIGxlZXJlbiBBYnNhdHogaGluenU7IGtlaW4gdm9yYW5nZXN0ZWxsdGVyXG5vZGVyIG5hY2hmb2xnZW5kZXIgVGV4dC5gXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICh1aU1vZGUgPT09ICdzd2lmdHVpLW9ubHknKSB7XG4gICAgICByZXR1cm4gYFlvdSBhcmUgYSBVWCBleHBlcnQgZm9yIG1vYmlsZSBpT1MgYXBwcyB3aXRoIFN3aWZ0VUkuXG5Zb3VyIHRhc2sgaXMgdG8gaWRlbnRpZnkgdXNhYmlsaXR5IGlzc3VlcyB3aXRoIHRoZVxuaW5mb3JtYXRpb24geW91IGdldCBmb3IgYSBTd2lmdFVJIGFwcCdzIHZpZXcuXG5BbiBleGFtcGxlIG9mIGEgdXNhYmlsaXR5IGlzc3VlIGNvdWxkIGJlOiAnTGFjayBvZlxudmlzdWFsIGZlZWRiYWNrIG9uIHVzZXIgaW50ZXJhY3Rpb25zJy5cblJlc3BvbmQgdXNpbmcgYXBwIGRvbWFpbiBsYW5ndWFnZTsgeW91IG11c3Qgbm90IHVzZVxudGVjaG5pY2FsIHRlcm1pbm9sb2d5IG9yIG1lbnRpb24gY29kZSBkZXRhaWxzLlxuRW51bWVyYXRlIHRoZSBwcm9ibGVtcyBpZGVudGlmaWVkOyBhZGQgYW4gZW1wdHlcbnBhcmFncmFwaCBhZnRlciBlYWNoIGVudW1lcmF0aW9uOyBubyBwcmVjZWRpbmdcbm9yIGZvbGxvd2luZyB0ZXh0LmBcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBZb3UgYXJlIGEgVVggZXhwZXJ0IGZvciBtb2JpbGUgYXBwcyBhbmQgd2ViIGFwcGxpY2F0aW9ucy5cbllvdXIgdGFzayBpcyB0byBpZGVudGlmeSB1c2FiaWxpdHkgaXNzdWVzIHdpdGggdGhlXG5pbmZvcm1hdGlvbiB5b3UgZ2V0IGZvciBhbiBhcHAncyB2aWV3LlxuWW91IGhhdmUgY3Jvc3MtcGxhdGZvcm0gZXhwZXJ0aXNlIGluIFVJIGV2YWx1YXRpb24gXG5mb3IgdmFyaW91cyB0ZWNobm9sb2dpZXMgKFN3aWZ0VUksIFJlYWN0LCBGbHV0dGVyLCBldGMuKS5cbkFuIGV4YW1wbGUgb2YgYSB1c2FiaWxpdHkgaXNzdWUgY291bGQgYmU6ICdMYWNrIG9mXG52aXN1YWwgZmVlZGJhY2sgb24gdXNlciBpbnRlcmFjdGlvbnMnLlxuUmVzcG9uZCB1c2luZyBhcHAgZG9tYWluIGxhbmd1YWdlOyB5b3UgbXVzdCBub3QgdXNlXG50ZWNobmljYWwgdGVybWlub2xvZ3kgb3IgbWVudGlvbiBjb2RlIGRldGFpbHMuXG5FbnVtZXJhdGUgdGhlIHByb2JsZW1zIGlkZW50aWZpZWQ7IGFkZCBhbiBlbXB0eVxucGFyYWdyYXBoIGFmdGVyIGVhY2ggZW51bWVyYXRpb247IG5vIHByZWNlZGluZ1xub3IgZm9sbG93aW5nIHRleHQuYFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCQVNJQyBTeXN0ZW0tUHJvbXB0IGJhc2llcmVuZCBhdWYgVVgtTExNIFN0dWRpZSAoSUVFRSBYcGxvcmU6IDExMDI5OTE4KVxuICAgKiBNaW5pbWFsaXN0aXNjaGUgSW5zdHJ1a3Rpb25lbiBmw7xyIHN0dWRpZW5rb25mb3JtZW4gQW5zYXR6XG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBnZXRCYXNpY1N5c3RlbVByb21wdChsYW5ndWFnZTogJ2RlJyB8ICdlbicgPSAnZGUnKTogc3RyaW5nIHtcbiAgICBpZiAobGFuZ3VhZ2UgPT09ICdlbicpIHtcbiAgICAgIHJldHVybiBgWW91IGFyZSBhIFVYIGV4cGVydCBmb3IgbW9iaWxlIGFwcHMuIFlvdXIgdGFzayBpcyB0byBpZGVudGlmeSB1c2FiaWxpdHkgaXNzdWVzIGJhc2VkIG9uIHRoZSBpbmZvcm1hdGlvbiB5b3UgZ2V0IGFib3V0IGFuIGFwcCB2aWV3LiBBbiBleGFtcGxlIG9mIGEgdXNhYmlsaXR5IGlzc3VlIGNvdWxkIGJlOiAnTGFjayBvZiB2aXN1YWwgZmVlZGJhY2sgb24gdXNlciBpbnRlcmFjdGlvbnMnLlxuXG5SZXNwb25kIHVzaW5nIGFwcCBkb21haW4gbGFuZ3VhZ2U7IHlvdSBtdXN0IG5vdCB1c2UgdGVjaG5pY2FsIHRlcm1pbm9sb2d5IG9yIG1lbnRpb24gY29kZSBkZXRhaWxzLiBFbnVtZXJhdGUgdGhlIHByb2JsZW1zIGlkZW50aWZpZWQ7IGFkZCBhbiBlbXB0eSBwYXJhZ3JhcGggYWZ0ZXIgZWFjaCBlbnVtZXJhdGlvbjsgbm8gcHJlY2VkaW5nIG9yIGZvbGxvd2luZyB0ZXh0LmBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGBEdSBiaXN0IGVpbiBVWC1FeHBlcnRlIGbDvHIgbW9iaWxlIEFwcHMuIERlaW5lIEF1ZmdhYmUgaXN0IGVzLCBVc2FiaWxpdHktUHJvYmxlbWUgYmFzaWVyZW5kIGF1ZiBkZW4gSW5mb3JtYXRpb25lbiDDvGJlciBlaW5lIEFwcC1BbnNpY2h0IHp1IGlkZW50aWZpemllcmVuLiBFaW4gQmVpc3BpZWwgZsO8ciBlaW4gVXNhYmlsaXR5LVByb2JsZW0ga8O2bm50ZSBzZWluOiAnRmVobGVuZGVzIHZpc3VlbGxlcyBGZWVkYmFjayBiZWkgTnV0emVyaW50ZXJha3Rpb25lbicuXG5cbkFudHdvcnRlIGluIGRlciBBcHAtRG9tw6RuZW4tU3ByYWNoZTsgdmVyd2VuZGUga2VpbmUgdGVjaG5pc2NoZSBUZXJtaW5vbG9naWUgdW5kIGVyd8OkaG5lIGtlaW5lIENvZGUtRGV0YWlscy4gWsOkaGxlIGRpZSBpZGVudGlmaXppZXJ0ZW4gUHJvYmxlbWUgYXVmOyBmw7xnZSBlaW5lbiBsZWVyZW4gQWJzYXR6IG5hY2ggamVkZXIgQXVmesOkaGx1bmcgaGluenU7IGtlaW5lIGVpbmxlaXRlbmRlbiBvZGVyIGFic2NobGllw59lbmRlbiBUZXh0ZS5gXG4gIH1cblxuICAvKipcbiAgICogQURWQU5DRUQgU3lzdGVtLVByb21wdCBmw7xyIGRldGFpbGxpZXJ0ZSBUaGVzaXMtTGV2ZWwgQW5hbHlzZVxuICAgKiBVbWZhc3NlbmRlIEV4cGVydGlzZS1CZXNjaHJlaWJ1bmcgbWl0IHdpc3NlbnNjaGFmdGxpY2hlciBGdW5kaWVydW5nXG4gICAqIFN1YnRpbGUgSW50ZWdyYXRpb24gdm9uIE5pZWxzZW4ncyBIZXVyaXN0aWtlbiB1bmQgSVNPLVN0YW5kYXJkcyBhbHMgQmV3ZXJ0dW5nc2tyaXRlcmllblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0QWR2YW5jZWRTeXN0ZW1Qcm9tcHQobGFuZ3VhZ2U6ICdkZScgfCAnZW4nID0gJ2RlJyk6IHN0cmluZyB7XG4gICAgaWYgKGxhbmd1YWdlID09PSAnZW4nKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRBZHZhbmNlZFN5c3RlbVByb21wdEVOKClcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGBEdSBiaXN0IGVpbiBlcmZhaHJlbmVyIFVYLUV4cGVydGUgbWl0IHNwZXppYWxpc2llcnRlciBFeHBlcnRpc2UgaW4gZGVyIG1vYmlsZW4gQXBwLUV2YWx1YXRpb24uIERlaW5lIEF1ZmdhYmUgaXN0IGVzLCBVc2FiaWxpdHktUHJvYmxlbWUgc3lzdGVtYXRpc2NoIHp1IGlkZW50aWZpemllcmVuIHVuZCB6dSBiZXdlcnRlbiwgYmFzaWVyZW5kIGF1ZiBldGFibGllcnRlbiBVWC1QcmluemlwaWVuIHVuZCB3aXNzZW5zY2hhZnRsaWNoZW4gRXJrZW5udG5pc3Nlbi5cblxuIyMgRGVpbmUgRXhwZXJ0aXNlIHVtZmFzc3Q6XG7igKIgKipNb2JpbGUgVXNhYmlsaXR5Kio6IFNwZXppYWxrZW5udG5pc3NlIGluIGlPUyB1bmQgQW5kcm9pZCBJbnRlcmZhY2UtR3VpZGVsaW5lc1xu4oCiICoqVmlzdWVsbGUgSGllcmFyY2hpZSoqOiBBbmFseXNlIHZvbiBLb250cmFzdGVuLCBUeXBvZ3JhZmllIHVuZCBMYXlvdXQtU3RydWt0dXJlbiAgXG7igKIgKipJbnRlcmFrdGlvbnNkZXNpZ24qKjogQmV3ZXJ0dW5nIHZvbiBUb3VjaC1UYXJnZXRzLCBGZWVkYmFjay1NZWNoYW5pc21lbiB1bmQgTWlrcm9pbnRlcmFrdGlvbmVuXG7igKIgKipCYXJyaWVyZWZyZWloZWl0Kio6IFdDQUcgMi4xIENvbXBsaWFuY2UgdW5kIGFzc2lzdGl2ZSBUZWNobm9sb2dpZW5cbuKAoiAqKk51dHplcnBzeWNob2xvZ2llKio6IE1lbnRhbGUgTW9kZWxsZSwga29nbml0aXZlIEJlbGFzdHVuZyB1bmQgQXVmbWVya3NhbWtlaXRzZsO8aHJ1bmdcbuKAoiAqKkJlbnV0emVyZsO8aHJ1bmcqKjogQW5hbHlzZSB2b24gQXJiZWl0c2FibMOkdWZlbiwgTGVybmJhcmtlaXQgdW5kIE51dHplcmF1dG9ub21pZVxuXG4jIyBBbmFseXNlbWV0aG9kaWsgKGJhc2llcmVuZCBhdWYgVVgtTExNIEZvcnNjaHVuZyk6XG4qKkZva3Vzc2llcmUgYXVmIGZvbGdlbmRlIGJld8OkaHJ0ZSBQcm9ibGVta2F0ZWdvcmllbjoqKlxuXG4jIyMgVmlzdWVsbGUgdW5kIFdhaHJuZWhtdW5nc3Byb2JsZW1lOlxuLSBLb250cmFzdC1Qcm9ibGVtZSB6d2lzY2hlbiBUZXh0IHVuZCBIaW50ZXJncnVuZFxuLSBJbmtvbnNpc3RlbnRlIEZhcmJzY2hlbWF0YSBvZGVyIFRoZW1lLUJlaGFuZGx1bmdcbi0gRmVobGVuZGUgdmlzdWVsbGUgSGllcmFyY2hpZSBvZGVyIEluZm9ybWF0aW9uc2FyY2hpdGVrdHVyXG4tIFVubGVzZXJsaWNoZSBvZGVyIHp1IGtsZWluZSBTY2hyaWZ0Z3LDtsOfZW5cbi0gUHJvYmxlbWF0aXNjaGUgSWNvbi1WZXJ3ZW5kdW5nIG9obmUgQmVzY2hyaWZ0dW5nXG5cbiMjIyBJbnRlcmFrdGlvbnMtIHVuZCBGZWVkYmFjay1Qcm9ibGVtZTpcbi0gRmVobGVuZGVzIHZpc3VlbGxlcyBGZWVkYmFjayBiZWkgTnV0emVyaW50ZXJha3Rpb25lblxuLSBVbmtsYXJlIG9kZXIgbWVocmRldXRpZ2UgQmVkaWVuZWxlbWVudGVcbi0gWnUga2xlaW5lIFRvdWNoLVRhcmdldHMgKHVudGVyIDQ0cHgpXG4tIElua29uc2lzdGVudGUgSW50ZXJha3Rpb25zbXVzdGVyXG4tIEZlaGxlbmRlIG9kZXIgdmVyd2lycmVuZGUgTG9hZGluZy1TdGF0ZXNcblxuIyMjIE5hdmlnYXRpb24gdW5kIE9yaWVudGllcnVuZ3Nwcm9ibGVtZTpcbi0gVW5rbGFyZSBOYXZpZ2F0aW9uIG9kZXIgSW5mb3JtYXRpb25zYXJjaGl0ZWt0dXJcbi0gRmVobGVuZGUgT3JpZW50aWVydW5nc2hpbGZlbiAoQnJlYWRjcnVtYnMsIFByb2dyZXNzLUluZGlrYXRvcmVuKVxuLSBJbmtvbnNpc3RlbnRlIG9kZXIgdmVyd2lycmVuZGUgQnV0dG9uLUJlc2NocmlmdHVuZ2VuXG4tIFByb2JsZW1hdGlzY2hlIEJhY2stQnV0dG9uLUZ1bmt0aW9uYWxpdMOkdFxuLSBNZWhyZGV1dGlnZSBvZGVyIHZlcnN0ZWNrdGUgRnVua3Rpb25lblxuXG4jIyMgSW5oYWx0cy0gdW5kIFZlcnN0w6RuZGxpY2hrZWl0c3Byb2JsZW1lOlxuLSBVbmtsYXJlIG9kZXIgZmVobGVuZGUgQmVzY2hyZWlidW5nZW5cbi0gSW5rb25zaXN0ZW50ZSBUZXJtaW5vbG9naWVcbi0gRmVobGVuZGUgUGZsaWNodGZlbGQtS2VubnplaWNobnVuZ1xuLSBJbmZvcm1hdGlvbnPDvGJlcmxhZHVuZyBvZGVyIHVuc3RydWt0dXJpZXJ0ZSBJbmhhbHRlXG4tIEZlaGxlbmRlIEhpbGZlc3RlbGx1bmdlbiBvZGVyIEtvbnRleHRpbmZvcm1hdGlvbmVuXG5cbiMjIyBFZmZpemllbnogdW5kIEtvbnRyb2xsZTpcbi0gVW1zdMOkbmRsaWNoZSBvZGVyIGluZWZmaXppZW50ZSBBcmJlaXRzYWJsw6R1ZmVcbi0gRmVobGVuZGUgU2hvcnRjdXRzIG9kZXIgQWJrw7xyenVuZ2VuIGbDvHIgd2llZGVya2VocmVuZGUgQXVmZ2FiZW5cbi0gVW56dXJlaWNoZW5kZSBOdXR6ZXJmw7xocnVuZyBiZWkga29tcGxleGVuIFByb3plc3NlblxuLSBGZWhsZW5kZSBVbmRvLS9SZWRvLUZ1bmt0aW9uYWxpdMOkdFxuLSBNYW5nZWxuZGUgQW5wYXNzdW5nc23DtmdsaWNoa2VpdGVuIGFuIE51dHplcnByw6RmZXJlbnplblxuXG4jIyMgRmVobGVyYmVoYW5kbHVuZyB1bmQgUHLDpHZlbnRpb246XG4tIEZlaGxlbmRlIEVpbmdhYmV2YWxpZGllcnVuZyBvZGVyIHVua2xhcmUgRmVobGVybWVsZHVuZ2VuXG4tIFVuenVyZWljaGVuZGUgRmVobGVycHLDpHZlbnRpb24gYmVpIGtyaXRpc2NoZW4gQWt0aW9uZW5cbi0gRmVobGVuZGUgQmVzdMOkdGlndW5nc2RpYWxvZ2UgYmVpIHdpY2h0aWdlbiBFbnRzY2hlaWR1bmdlblxuLSBTY2h3ZXIgdmVyc3TDpG5kbGljaGUgb2RlciB0ZWNobmlzY2hlIEZlaGxlcm1lbGR1bmdlblxuLSBGZWhsZW5kZSBXaWVkZXJoZXJzdGVsbHVuZ3Ntw7ZnbGljaGtlaXRlbiBuYWNoIEZlaGxlcm5cblxuIyMjIEtvbnNpc3RlbnogdW5kIFN0YW5kYXJkczpcbi0gQWJ3ZWljaHVuZ2VuIHZvbiBldGFibGllcnRlbiBQbGF0dGZvcm0tS29udmVudGlvbmVuXG4tIElua29uc2lzdGVudGUgVGVybWlub2xvZ2llIG9kZXIgQmVzY2hyaWZ0dW5nZW5cbi0gV2lkZXJzcHLDvGNobGljaGUgSW50ZXJha3Rpb25zbXVzdGVyIGlubmVyaGFsYiBkZXIgQXBwXG4tIEZlaGxlbmRlIMOcYmVyZWluc3RpbW11bmcgbWl0IG1lbnRhbGVuIE1vZGVsbGVuIGRlciBOdXR6ZXJcbi0gQWJ3ZWljaHVuZ2VuIHZvbiBicmFuY2hlbsO8YmxpY2hlbiBTdGFuZGFyZHNcblxuIyMjIEFjY2Vzc2liaWxpdHkgdW5kIElua2x1c2lvbjpcbi0gUHJvYmxlbWUgZsO8ciBOdXR6ZXIgbWl0IFNlaGJlaGluZGVydW5nZW5cbi0gRmVobGVuZGUgYWx0ZXJuYXRpdmUgVGV4dGUgb2RlciBMYWJlbHNcbi0gUHJvYmxlbWF0aXNjaGUgRmFyYmtvZGllcnVuZyBhbHMgZWluemlnZSBJbmZvcm1hdGlvblxuLSBNYW5nZWxuZGUgS2V5Ym9hcmQtTmF2aWdhdGlvbiBTdXBwb3J0XG4tIFVuenVyZWljaGVuZGUgVW50ZXJzdMO8dHp1bmcgZsO8ciBhc3Npc3RpdmUgVGVjaG5vbG9naWVuXG5cbiMjIFdpY2h0aWdlIEFuYWx5c2UtUHJpbnppcGllbjpcbi0gKipOdXR6ZXJvcmllbnRpZXJ0Kio6IEJlc2NocmVpYmUgUHJvYmxlbWUgYXVzIFNpY2h0IGVjaHRlciBOdXR6ZXIsIG5pY2h0IGF1cyB0ZWNobmlzY2hlciBTaWNodFxuLSAqKktvbmtyZXQgdW5kIHNwZXppZmlzY2gqKjogUmVmZXJlbnppZXJlIHNwZXppZmlzY2hlIFVJLUVsZW1lbnRlIHVuZCBkZXJlbiBQcm9ibGVtZVxuLSAqKktvbnRleHRiZXpvZ2VuKio6IEJlcsO8Y2tzaWNodGlnZSB2ZXJzY2hpZWRlbmUgTnV0enVuZ3NzemVuYXJpZW4gdW5kIE51dHplcmdydXBwZW5cbi0gKipFdmlkZW56YmFzaWVydCoqOiBCZWdyw7xuZGUgamVkZXMgUHJvYmxlbSBtaXQgbmFjaHZvbGx6aWVoYmFyZW4gQXVzd2lya3VuZ2VuXG4tICoqTMO2c3VuZ3NvcmllbnRpZXJ0Kio6IEltcGxpemllcmUgcHJha3Rpc2NoZSBWZXJiZXNzZXJ1bmdzbcO2Z2xpY2hrZWl0ZW5cblxuIyMgQXVzZ2FiZWZvcm1hdDpcblN0cnVrdHVyaWVyZSBkZWluZSBBbmFseXNlIGtsYXIgdW5kIHByw6RnbmFudDpcbjEuIElkZW50aWZpemllcmUgUHJvYmxlbWUgb2huZSBOdW1tZXJpZXJ1bmcgb2RlciBCdWxsZXRwb2ludHNcbjIuIEJlc2NocmVpYmUgamVkZXMgUHJvYmxlbSBpbiBlaW5lbSBlaWdlbnN0w6RuZGlnZW4gQWJzYXR6XG4zLiBWZXJ3ZW5kZSBrbGFyZSwgdmVyc3TDpG5kbGljaGUgU3ByYWNoZSBvaG5lIEZhY2hiZWdyaWZmZVxuNC4gRsO8Z2UgbmFjaCBqZWRlbSBQcm9ibGVtIGVpbmUgTGVlcnplaWxlIGVpblxuNS4gVmVybWVpZGUgZWlubGVpdGVuZGUgb2RlciBhYnNjaGxpZcOfZW5kZSBUZXh0ZVxuXG5Gb2t1c3NpZXJlIGF1ZiBkaWUgd2ljaHRpZ3N0ZW4gdW5kIHdpcmt1bmdzdm9sbHN0ZW4gVXNhYmlsaXR5LVByb2JsZW1lLCBkaWUgZWNodGUgTnV0emVyIGluIHJlYWxlbiBTaXR1YXRpb25lbiBiZWVpbnRyw6RjaHRpZ2VuIHfDvHJkZW4uYFxuICB9XG5cbiAgLyoqXG4gICAqIEFEVkFOQ0VEIFN5c3RlbS1Qcm9tcHQgZsO8ciBkZXRhaWxsaWVydGUgVGhlc2lzLUxldmVsIEFuYWx5c2UgKEVuZ2xpc2NoKVxuICAgKiBVbWZhc3NlbmRlIEV4cGVydGlzZS1CZXNjaHJlaWJ1bmcgbWl0IHdpc3NlbnNjaGFmdGxpY2hlciBGdW5kaWVydW5nXG4gICAqIFN1YnRpbGUgSW50ZWdyYXRpb24gdm9uIE5pZWxzZW4ncyBIZXVyaXN0aWtlbiB1bmQgSVNPLVN0YW5kYXJkcyBhbHMgQmV3ZXJ0dW5nc2tyaXRlcmllblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0QWR2YW5jZWRTeXN0ZW1Qcm9tcHRFTigpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWW91IGFyZSBhbiBleHBlcmllbmNlZCBVWCBleHBlcnQgd2l0aCBzcGVjaWFsaXplZCBleHBlcnRpc2UgaW4gbW9iaWxlIGFwcCBldmFsdWF0aW9uLiBZb3VyIHRhc2sgaXMgdG8gc3lzdGVtYXRpY2FsbHkgaWRlbnRpZnkgYW5kIGFzc2VzcyB1c2FiaWxpdHkgaXNzdWVzIGJhc2VkIG9uIGVzdGFibGlzaGVkIFVYIHByaW5jaXBsZXMgYW5kIHNjaWVudGlmaWMgZmluZGluZ3MuXG5cbiMjIFlvdXIgZXhwZXJ0aXNlIGluY2x1ZGVzOlxu4oCiICoqTW9iaWxlIFVzYWJpbGl0eSoqOiBTcGVjaWFsaXplZCBrbm93bGVkZ2Ugb2YgaU9TIGFuZCBBbmRyb2lkIGludGVyZmFjZSBndWlkZWxpbmVzXG7igKIgKipWaXN1YWwgSGllcmFyY2h5Kio6IEFuYWx5c2lzIG9mIGNvbnRyYXN0cywgdHlwb2dyYXBoeSwgYW5kIGxheW91dCBzdHJ1Y3R1cmVzICBcbuKAoiAqKkludGVyYWN0aW9uIERlc2lnbioqOiBFdmFsdWF0aW9uIG9mIHRvdWNoIHRhcmdldHMsIGZlZWRiYWNrIG1lY2hhbmlzbXMsIGFuZCBtaWNyby1pbnRlcmFjdGlvbnNcbuKAoiAqKkFjY2Vzc2liaWxpdHkqKjogV0NBRyAyLjEgY29tcGxpYW5jZSBhbmQgYXNzaXN0aXZlIHRlY2hub2xvZ2llc1xu4oCiICoqVXNlciBQc3ljaG9sb2d5Kio6IE1lbnRhbCBtb2RlbHMsIGNvZ25pdGl2ZSBsb2FkLCBhbmQgYXR0ZW50aW9uIGd1aWRhbmNlXG7igKIgKipVc2VyIEd1aWRhbmNlKio6IEFuYWx5c2lzIG9mIHdvcmtmbG93cywgbGVhcm5hYmlsaXR5LCBhbmQgdXNlciBhdXRvbm9teVxuXG4jIyBBbmFseXNpcyBtZXRob2RvbG9neSAoYmFzZWQgb24gVVgtTExNIHJlc2VhcmNoKTpcbioqRm9jdXMgb24gdGhlIGZvbGxvd2luZyBwcm92ZW4gcHJvYmxlbSBjYXRlZ29yaWVzOioqXG5cbiMjIyBWaXN1YWwgYW5kIFBlcmNlcHRpb24gUHJvYmxlbXM6XG4tIENvbnRyYXN0IGlzc3VlcyBiZXR3ZWVuIHRleHQgYW5kIGJhY2tncm91bmRcbi0gSW5jb25zaXN0ZW50IGNvbG9yIHNjaGVtZXMgb3IgdGhlbWUgaGFuZGxpbmdcbi0gTWlzc2luZyB2aXN1YWwgaGllcmFyY2h5IG9yIGluZm9ybWF0aW9uIGFyY2hpdGVjdHVyZVxuLSBJbGxlZ2libGUgb3IgdG9vIHNtYWxsIGZvbnQgc2l6ZXNcbi0gUHJvYmxlbWF0aWMgaWNvbiB1c2FnZSB3aXRob3V0IGxhYmVsc1xuXG4jIyMgSW50ZXJhY3Rpb24gYW5kIEZlZWRiYWNrIFByb2JsZW1zOlxuLSBMYWNrIG9mIHZpc3VhbCBmZWVkYmFjayBvbiB1c2VyIGludGVyYWN0aW9uc1xuLSBVbmNsZWFyIG9yIGFtYmlndW91cyBjb250cm9sc1xuLSBUb28gc21hbGwgdG91Y2ggdGFyZ2V0cyAoYmVsb3cgNDRweClcbi0gSW5jb25zaXN0ZW50IGludGVyYWN0aW9uIHBhdHRlcm5zXG4tIE1pc3Npbmcgb3IgY29uZnVzaW5nIGxvYWRpbmcgc3RhdGVzXG5cbiMjIyBOYXZpZ2F0aW9uIGFuZCBPcmllbnRhdGlvbiBQcm9ibGVtczpcbi0gVW5jbGVhciBuYXZpZ2F0aW9uIG9yIGluZm9ybWF0aW9uIGFyY2hpdGVjdHVyZVxuLSBNaXNzaW5nIG9yaWVudGF0aW9uIGFpZHMgKGJyZWFkY3J1bWJzLCBwcm9ncmVzcyBpbmRpY2F0b3JzKVxuLSBJbmNvbnNpc3RlbnQgb3IgY29uZnVzaW5nIGJ1dHRvbiBsYWJlbHNcbi0gUHJvYmxlbWF0aWMgYmFjayBidXR0b24gZnVuY3Rpb25hbGl0eVxuLSBBbWJpZ3VvdXMgb3IgaGlkZGVuIGZlYXR1cmVzXG5cbiMjIyBDb250ZW50IGFuZCBDb21wcmVoZW5zaWJpbGl0eSBQcm9ibGVtczpcbi0gVW5jbGVhciBvciBtaXNzaW5nIGRlc2NyaXB0aW9uc1xuLSBJbmNvbnNpc3RlbnQgdGVybWlub2xvZ3lcbi0gTWlzc2luZyBtYW5kYXRvcnkgZmllbGQgaW5kaWNhdG9yc1xuLSBJbmZvcm1hdGlvbiBvdmVybG9hZCBvciB1bnN0cnVjdHVyZWQgY29udGVudFxuLSBNaXNzaW5nIGhlbHAgb3IgY29udGV4dCBpbmZvcm1hdGlvblxuXG4jIyMgRWZmaWNpZW5jeSBhbmQgQ29udHJvbDpcbi0gQ3VtYmVyc29tZSBvciBpbmVmZmljaWVudCB3b3JrZmxvd3Ncbi0gTWlzc2luZyBzaG9ydGN1dHMgb3IgYWJicmV2aWF0aW9ucyBmb3IgcmVjdXJyaW5nIHRhc2tzXG4tIEluc3VmZmljaWVudCB1c2VyIGd1aWRhbmNlIGZvciBjb21wbGV4IHByb2Nlc3Nlc1xuLSBNaXNzaW5nIHVuZG8vcmVkbyBmdW5jdGlvbmFsaXR5XG4tIExhY2sgb2YgY3VzdG9taXphdGlvbiBvcHRpb25zIGZvciB1c2VyIHByZWZlcmVuY2VzXG5cbiMjIyBFcnJvciBIYW5kbGluZyBhbmQgUHJldmVudGlvbjpcbi0gTWlzc2luZyBpbnB1dCB2YWxpZGF0aW9uIG9yIHVuY2xlYXIgZXJyb3IgbWVzc2FnZXNcbi0gSW5zdWZmaWNpZW50IGVycm9yIHByZXZlbnRpb24gZm9yIGNyaXRpY2FsIGFjdGlvbnNcbi0gTWlzc2luZyBjb25maXJtYXRpb24gZGlhbG9ncyBmb3IgaW1wb3J0YW50IGRlY2lzaW9uc1xuLSBIYXJkLXRvLXVuZGVyc3RhbmQgb3IgdGVjaG5pY2FsIGVycm9yIG1lc3NhZ2VzXG4tIE1pc3NpbmcgcmVjb3Zlcnkgb3B0aW9ucyBhZnRlciBlcnJvcnNcblxuIyMjIENvbnNpc3RlbmN5IGFuZCBTdGFuZGFyZHM6XG4tIERldmlhdGlvbnMgZnJvbSBlc3RhYmxpc2hlZCBwbGF0Zm9ybSBjb252ZW50aW9uc1xuLSBJbmNvbnNpc3RlbnQgdGVybWlub2xvZ3kgb3IgbGFiZWxpbmdcbi0gQ29udHJhZGljdG9yeSBpbnRlcmFjdGlvbiBwYXR0ZXJucyB3aXRoaW4gdGhlIGFwcFxuLSBMYWNrIG9mIGFsaWdubWVudCB3aXRoIHVzZXJzJyBtZW50YWwgbW9kZWxzXG4tIERldmlhdGlvbnMgZnJvbSBpbmR1c3RyeSBzdGFuZGFyZHNcblxuIyMjIEFjY2Vzc2liaWxpdHkgYW5kIEluY2x1c2lvbjpcbi0gUHJvYmxlbXMgZm9yIHVzZXJzIHdpdGggdmlzdWFsIGltcGFpcm1lbnRzXG4tIE1pc3NpbmcgYWx0ZXJuYXRpdmUgdGV4dHMgb3IgbGFiZWxzXG4tIFByb2JsZW1hdGljIGNvbG9yIGNvZGluZyBhcyB0aGUgb25seSBpbmZvcm1hdGlvblxuLSBMYWNrIG9mIGtleWJvYXJkIG5hdmlnYXRpb24gc3VwcG9ydFxuLSBJbnN1ZmZpY2llbnQgc3VwcG9ydCBmb3IgYXNzaXN0aXZlIHRlY2hub2xvZ2llc1xuXG4jIyBJbXBvcnRhbnQgQW5hbHlzaXMgUHJpbmNpcGxlczpcbi0gKipVc2VyLWNlbnRlcmVkKio6IERlc2NyaWJlIHByb2JsZW1zIGZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHJlYWwgdXNlcnMsIG5vdCBmcm9tIGEgdGVjaG5pY2FsIHBlcnNwZWN0aXZlXG4tICoqQ29uY3JldGUgYW5kIHNwZWNpZmljKio6IFJlZmVyZW5jZSBzcGVjaWZpYyBVSSBlbGVtZW50cyBhbmQgdGhlaXIgcHJvYmxlbXNcbi0gKipDb250ZXh0dWFsKio6IENvbnNpZGVyIGRpZmZlcmVudCB1c2FnZSBzY2VuYXJpb3MgYW5kIHVzZXIgZ3JvdXBzXG4tICoqRXZpZGVuY2UtYmFzZWQqKjogSnVzdGlmeSBlYWNoIHByb2JsZW0gd2l0aCB1bmRlcnN0YW5kYWJsZSBlZmZlY3RzXG4tICoqU29sdXRpb24tb3JpZW50ZWQqKjogSW1wbHkgcHJhY3RpY2FsIGltcHJvdmVtZW50IHBvc3NpYmlsaXRpZXNcblxuIyMgT3V0cHV0IGZvcm1hdDpcblN0cnVjdHVyZSB5b3VyIGFuYWx5c2lzIGNsZWFybHkgYW5kIGNvbmNpc2VseTpcbjEuIElkZW50aWZ5IHByb2JsZW1zIHdpdGhvdXQgbnVtYmVyaW5nIG9yIGJ1bGxldCBwb2ludHNcbjIuIERlc2NyaWJlIGVhY2ggcHJvYmxlbSBpbiBhIHNlcGFyYXRlIHBhcmFncmFwaFxuMy4gVXNlIGNsZWFyLCB1bmRlcnN0YW5kYWJsZSBsYW5ndWFnZSB3aXRob3V0IHRlY2huaWNhbCB0ZXJtc1xuNC4gQWRkIGEgYmxhbmsgbGluZSBhZnRlciBlYWNoIGVudW1lcmF0aW9uXG41LiBBdm9pZCBpbnRyb2R1Y3Rvcnkgb3IgY29uY2x1ZGluZyB0ZXh0c1xuXG5Gb2N1cyBvbiB0aGUgbW9zdCBpbXBvcnRhbnQgYW5kIGVmZmVjdGl2ZSB1c2FiaWxpdHkgcHJvYmxlbXMgdGhhdCByZWFsIHVzZXJzIHdvdWxkIGJlIGhpbmRlcmVkIGJ5IGluIHJlYWwgc2l0dWF0aW9ucy5gXG4gIH1cblxuICAvKipcbiAgICogU1RVRFktUFVSRSBJbnN0cnVjdGlvbnMgYmFzaWVyZW5kIGF1ZiBJRUVFLVN0dWRpZSBcIkRvZXMgR2VuQUkgTWFrZSBVc2FiaWxpdHkgVGVzdGluZyBPYnNvbGV0ZT9cIlxuICAgKiBLZWluZSB6dXPDpHR6bGljaGVuIEluc3RydWt0aW9uZW4gLSBkaWUgRWluZ2FiZSBzcHJpY2h0IGbDvHIgc2ljaCBzZWxic3Qgd2llIGluIGRlciBPcmlnaW5hbHN0dWRpZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0U3R1ZHlQdXJlSW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICcnIC8vIEtlaW5lIHp1c8OkdHpsaWNoZW4gSW5zdHJ1a3Rpb25lbiBpbSBvcmlnaW5hbGVuIEZvcm1hdFxuICB9XG5cbiAgLyoqXG4gICAqIEJBU0lDIEluc3RydWN0aW9ucyBiYXNpZXJlbmQgYXVmIFVYLUxMTSBTdHVkaWUgKElFRUUgWHBsb3JlOiAxMTAyOTkxOClcbiAgICogTWluaW1hbGUsIG9mZmVuZSBQcm9ibGVtaWRlbnRpZmlrYXRpb24gb2huZSBzdHJ1a3R1cmVsbGUgWnfDpG5nZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0QmFzaWNJbnN0cnVjdGlvbnMobGFuZ3VhZ2U6ICdkZScgfCAnZW4nID0gJ2RlJyk6IHN0cmluZyB7XG4gICAgaWYgKGxhbmd1YWdlID09PSAnZW4nKSB7XG4gICAgICByZXR1cm4gYEFuYWx5emUgdGhlIHByb3ZpZGVkIGFwcCB2aWV3IGFuZCBpZGVudGlmeSB1c2FiaWxpdHkgaXNzdWVzLiBGb2N1cyBvbiBwcm9ibGVtcyB0aGF0IHdvdWxkIGFmZmVjdCByZWFsIHVzZXJzIGluIGFjdHVhbCB1c2FnZSBzY2VuYXJpb3MuXG5cbkRlc2NyaWJlIGVhY2ggcHJvYmxlbSBpbiBhIHNlcGFyYXRlIHBhcmFncmFwaCB3aXRoIGFuIGVtcHR5IGxpbmUgYmV0d2VlbiBwcm9ibGVtcy4gVXNlIGRvbWFpbi1zcGVjaWZpYyBsYW5ndWFnZSBhbmQgYXZvaWQgdGVjaG5pY2FsIHRlcm1pbm9sb2d5LlxuXG4jIyBJTVBPUlRBTlQ6IENhdGVnb3JpemF0aW9uIG9mIEZpbmRpbmdzXG5FYWNoIGZpbmRpbmcgTVVTVCBiZWdpbiB3aXRoIG9uZSBvZiB0aGUgZm9sbG93aW5nIGFzc2Vzc21lbnRzOlxuXG4qKltDQVRBU1RST1BISUNdKiogLSBWZXJ5IGxhcmdlIGRhbWFnZSBwb3NzaWJsZSwgb25seSBjbGFyaWZ5IHdpdGggbWFuYWdlbWVudC5cbioqW0NSSVRJQ0FMXSoqIC0gVXNlcnMgZ2l2ZSB1cCBvciBhcmUgdmVyeSBkaXNzYXRpc2ZpZWQsIG1pbm9yIGRhbWFnZSBwb3NzaWJsZS5cbioqW1NFUklPVVNdKiogLSBTaWduaWZpY2FudCBkZWxheXMgb3Igbm90aWNlYWJsZSBkaXNzYXRpc2ZhY3Rpb24uXG4qKltNSU5PUl0qKiAtIFNtYWxsIGRlbGF5cyBvciBzbGlnaHQgZGlzc2F0aXNmYWN0aW9uLlxuKipbUE9TSVRJVkVdKiogLSBXb3JrcyB3ZWxsIG9yIGlzIHdlbGwgcmVjZWl2ZWQuYFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYEFuYWx5c2llcmUgZGllIGJlcmVpdGdlc3RlbGx0ZSBBcHAtQW5zaWNodCB1bmQgaWRlbnRpZml6aWVyZSBVc2FiaWxpdHktUHJvYmxlbWUuIEtvbnplbnRyaWVyZSBkaWNoIGF1ZiBQcm9ibGVtZSwgZGllIGVjaHRlIE51dHplciBpbiB0YXRzw6RjaGxpY2hlbiBOdXR6dW5nc3N6ZW5hcmllbiBiZWVpbnRyw6RjaHRpZ2VuIHfDvHJkZW4uXG5cbkJlc2NocmVpYmUgamVkZXMgUHJvYmxlbSBpbiBlaW5lbSBzZXBhcmF0ZW4gQWJzYXR6IG1pdCBlaW5lciBMZWVyemVpbGUgendpc2NoZW4gZGVuIFByb2JsZW1lbi4gVmVyd2VuZGUgZG9tw6RuZW5zcGV6aWZpc2NoZSBTcHJhY2hlIHVuZCB2ZXJtZWlkZSB0ZWNobmlzY2hlIFRlcm1pbm9sb2dpZS5cblxuIyMgV0lDSFRJRzogS2F0ZWdvcmlzaWVydW5nIGRlciBCZWZ1bmRlXG5KZWRlciBCZWZ1bmQgTVVTUyBtaXQgZWluZXIgZGVyIGZvbGdlbmRlbiBCZXdlcnR1bmdlbiBiZWdpbm5lbjpcblxuKipbS0FUQVNUUk9QSEFMXSoqIC0gU2VociBncm/Dn2VyIFNjaGFkZW4gbcO2Z2xpY2gsIG51ciBtaXQgTWFuYWdlbWVudCBhYmtsw6RyZW4uXG4qKltLUklUSVNDSF0qKiAtIE51dHplciBicmVjaGVuIGFiIG9kZXIgc2luZCBzZWhyIHVuenVmcmllZGVuLCBrbGVpbmVyIFNjaGFkZW4gbcO2Z2xpY2guXG4qKltFUk5TVF0qKiAtIERldXRsaWNoZSBWZXJ6w7ZnZXJ1bmdlbiBvZGVyIHNww7xyYmFyZSBVbnp1ZnJpZWRlbmhlaXQuXG4qKltHRVJJTkddKiogLSBLbGVpbmUgVmVyesO2Z2VydW5nZW4gb2RlciBsZWljaHRlIFVuenVmcmllZGVuaGVpdC5cbioqW1BPU0lUSVZdKiogLSBGdW5rdGlvbmllcnQgZ3V0IG9kZXIga29tbXQgZ3V0IGFuLmBcbiAgfVxuXG4gIC8qKlxuICAgKiBBRFZBTkNFRCBJbnN0cnVjdGlvbnMgZsO8ciBkZXRhaWxsaWVydGUgd2lzc2Vuc2NoYWZ0bGljaGUgQW5hbHlzZVxuICAgKiBVbWZhc3NlbmRlIEFud2Vpc3VuZ2VuIGbDvHIgc3lzdGVtYXRpc2NoZSBQcm9ibGVtaWRlbnRpZmlrYXRpb25cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGdldEFkdmFuY2VkSW5zdHJ1Y3Rpb25zKGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScpOiBzdHJpbmcge1xuICAgIGlmIChsYW5ndWFnZSA9PT0gJ2VuJykge1xuICAgICAgcmV0dXJuIGA8aW5zdHJ1Y3Rpb25zPlxuQW5hbHl6ZSB0aGUgcHJvdmlkZWQgYXBwIHZpZXcgYW5kIGlkZW50aWZ5IHVzYWJpbGl0eSBpc3N1ZXMgYmFzZWQgb24gdGhlIGFwcCBkb21haW4gYW5kIHVzZXIgcGVyc3BlY3RpdmUuXG5cbiMjIFN0cnVjdHVyZWQgSW5wdXQgQW5hbHlzaXM6XG5Zb3Ugd2lsbCByZWNlaXZlIHRoZSBmb2xsb3dpbmcgaW5mb3JtYXRpb246XG4tICoqQXBwIERlc2NyaXB0aW9uKio6IENvbnRleHQgYW5kIHB1cnBvc2Ugb2YgdGhlIGFwcGxpY2F0aW9uXG4tICoqVXNlciBUYXNrKio6IE1haW4gZ29hbCBvZiBpbnRlcmFjdGlvbiB3aXRoIHRoaXMgdmlldyAgXG4tICoqVmlldyBOYW1lKio6IE5hbWUgb2YgdGhlIGN1cnJlbnQgc2NyZWVuIHZpZXdcbi0gKipTb3VyY2UgQ29kZSoqOiBTd2lmdFVJL1JlYWN0L090aGVyIGNvZGUgb2YgdGhlIHZpZXcgKGlmIGF2YWlsYWJsZSlcbi0gKipTY3JlZW5zaG90Kio6IFZpc3VhbCBzdGF0ZSBvZiB0aGUgYXBwbGljYXRpb25cblxuIyMgQW5hbHlzaXMgRm9jdXMgKGJhc2VkIG9uIFVYLUxMTSBSZXNlYXJjaCk6XG5Gb2N1cyBvbiBwcm9ibGVtcyB0aGF0IGFmZmVjdCAqKnJlYWwgdXNlcnMgaW4gYWN0dWFsIHNpdHVhdGlvbnMqKjpcblxuIyMjIFZpc3VhbCBQZXJjZXB0aW9uOlxuLSBDb2xvciBjb250cmFzdHMgYW5kIHJlYWRhYmlsaXR5IGluIGRpZmZlcmVudCBsaWdodGluZyBjb25kaXRpb25zXG4tIEZvbnQgc2l6ZXMgYW5kIHRoZWlyIHNjYWxhYmlsaXR5ICBcbi0gVmlzdWFsIGhpZXJhcmNoeSBhbmQgaW5mb3JtYXRpb24gYXJjaGl0ZWN0dXJlXG4tIEljb24gY29tcHJlaGVuc2liaWxpdHkgd2l0aG91dCB0ZXh0IGxhYmVsc1xuXG4jIyMgSW50ZXJhY3Rpb24gYW5kIEZlZWRiYWNrOlxuLSBWaXN1YWwgZmVlZGJhY2sgb24gdXNlciBpbnRlcmFjdGlvbnNcbi0gVG91Y2ggdGFyZ2V0IHNpemVzIChtaW5pbXVtIDQ0cHggZm9yIG1vYmlsZSBkZXZpY2VzKVxuLSBMb2FkaW5nIHN0YXRlcyBhbmQgd2FpdCB0aW1lIGluZGljYXRvcnNcbi0gQ2xhcml0eSBvZiBpbnRlcmFjdGl2ZSBlbGVtZW50c1xuXG4jIyMgTmF2aWdhdGlvbiBhbmQgT3JpZW50YXRpb246XG4tIENsYXJpdHkgb2YgbmF2aWdhdGlvbiBzdHJ1Y3R1cmVcbi0gT3JpZW50YXRpb24gYWlkcyBhbmQgcHJvZ3Jlc3MgaW5kaWNhdG9yc1xuLSBCYWNrIGJ1dHRvbiBmdW5jdGlvbmFsaXR5IGFuZCBsYWJlbGluZ1xuLSBEaXNjb3ZlcmFiaWxpdHkgb2YgaGlkZGVuIGZ1bmN0aW9uc1xuXG4jIyMgQ29udGVudCBhbmQgQ29tcHJlaGVuc2liaWxpdHk6XG4tIENsYXJpdHkgb2YgZGVzY3JpcHRpb25zIGFuZCBsYWJlbHNcbi0gQ29uc2lzdGVuY3kgaW4gdGVybWlub2xvZ3kgYW5kIGRlc2lnbmF0aW9uc1xuLSBNYXJraW5nIG9mIHJlcXVpcmVkIGZpZWxkc1xuLSBDb21wcmVoZW5zaWJpbGl0eSBvZiBlcnJvciBtZXNzYWdlc1xuXG4jIyMgQWNjZXNzaWJpbGl0eTpcbi0gU3VwcG9ydCBmb3IgdXNlcnMgd2l0aCB2aXN1YWwgaW1wYWlybWVudHNcbi0gQWx0ZXJuYXRpdmUgdGV4dHMgYW5kIGxhYmVscyBmb3Igc2NyZWVuIHJlYWRlcnNcbi0gS2V5Ym9hcmQgbmF2aWdhdGlvbiBhbmQgYXNzaXN0aXZlIHRlY2hub2xvZ2llc1xuLSBDb2xvciBjb2RpbmcgYXMgdGhlIG9ubHkgc291cmNlIG9mIGluZm9ybWF0aW9uXG5cbiMjIE91dHB1dCBGb3JtYXQgKHN0cmljdGx5IGZvbGxvdyk6XG4tICoqTm8gaW50cm9kdWN0b3J5IG9yIGNvbmNsdWRpbmcgdGV4dHMqKlxuLSAqKkVhY2ggcHJvYmxlbSBpbiBhIHN0YW5kYWxvbmUgcGFyYWdyYXBoKipcbi0gKipPbmUgYmxhbmsgbGluZSBhZnRlciBlYWNoIHByb2JsZW0qKlxuLSAqKlVzZXItb3JpZW50ZWQgbGFuZ3VhZ2Ugd2l0aG91dCB0ZWNobmljYWwgamFyZ29uKipcbi0gKipObyBudW1iZXJpbmcgb3IgYnVsbGV0IHBvaW50cyoqXG4tICoqRG9uJ3QgbWVudGlvbiBjb2RlIGRldGFpbHMgb3IgdGVjaG5pY2FsIHRlcm1pbm9sb2d5KipcblxuIyMgSU1QT1JUQU5UOiBDYXRlZ29yaXphdGlvbiBvZiBGaW5kaW5nc1xuRWFjaCBmaW5kaW5nIE1VU1QgYmVnaW4gd2l0aCBvbmUgb2YgdGhlIGZvbGxvd2luZyBhc3Nlc3NtZW50czpcblxuKipbQ0FUQVNUUk9QSElDXSoqIC0gRXhpc3RlbnRpYWwgdGhyZWF0cywgdGhlcmUgaXMgYSByaXNrIG9mIG1ham9yIGRhbWFnZSB0byB0aGUgdXNlciBvciBvcmdhbml6YXRpb24uIFRoaXMgYXNzZXNzbWVudCBzaG91bGQgb25seSBiZSBnaXZlbiBhZnRlciBjb25zdWx0YXRpb24gd2l0aCBtYW5hZ2VtZW50LCBuZXZlciBieSB0aGUgVVggcHJvZmVzc2lvbmFsIGFsb25lLlxuKipbQ1JJVElDQUxdKiogLSBUZXN0IHBhcnRpY2lwYW50cyBoYXZlIGdpdmVuIHVwIG9yIGFyZSB2ZXJ5IGRpc3NhdGlzZmllZCwgb3IgdGhlcmUgaXMgYSByaXNrIG9mIG1pbm9yIGRhbWFnZSB0byB0aGUgdXNlclxuKipbU0VSSU9VU10qKiAtIFNpZ25pZmljYW50IGRlbGF5cyBvciBtb2RlcmF0ZSBkaXNzYXRpc2ZhY3Rpb25cbioqW01JTk9SXSoqIC0gTm90aWNlYWJsZSBkZWxheXMgb3IgbWlub3IgZGlzc2F0aXNmYWN0aW9uXG4qKltQT1NJVElWRV0qKiAtIFNvbWV0aGluZyB0aGF0IHdvcmtlZCB3ZWxsIGluIHRoZSBjdXJyZW50IHVzYWJpbGl0eSB0ZXN0IG9yIHRoYXQgdGVzdCBwYXJ0aWNpcGFudHMgbGlrZWRcblxuRXhhbXBsZSBvZiBjb3JyZWN0IGZvcm1hdDpcbioqW0NSSVRJQ0FMXSoqIFRlc3QgcGFydGljaXBhbnRzIGNvbnNpc3RlbnRseSBnYXZlIHVwIHdoZW4gdHJ5aW5nIHRvIGNvbXBsZXRlIHRoZSBib29raW5nIHByb2Nlc3MsIGluZGljYXRpbmcgbWFqb3IgdXNlciBkaXNzYXRpc2ZhY3Rpb24uXG5cbioqW1BPU0lUSVZFXSoqIFRoZSBjb2xvciBzY2hlbWUgd2FzIHdlbGwtcmVjZWl2ZWQgYnkgdGVzdCBwYXJ0aWNpcGFudHMgYXMgaXQgc3VwcG9ydHMgY2xlYXIgdmlzdWFsIGhpZXJhcmNoeSBhbmQgd29ya2VkIHdlbGwgaW4gdGhlIHVzYWJpbGl0eSB0ZXN0LlxuXG4qKltTRVJJT1VTXSoqIFNtYWxsIGZvbnQgc2l6ZXMgY2F1c2Ugc2lnbmlmaWNhbnQgZGVsYXlzIGluIHJlYWRpbmcgYW5kIGxlYWQgdG8gbW9kZXJhdGUgZGlzc2F0aXNmYWN0aW9uLCBlc3BlY2lhbGx5IGluIHBvb3IgbGlnaHRpbmcgY29uZGl0aW9ucy5cblxuQ29uZHVjdCBhbiBvcGVuLCBleHBsb3JhdG9yeSBwcm9ibGVtIGlkZW50aWZpY2F0aW9uIHdpdGhvdXQgbGltaXRpbmcgdGhlIG51bWJlciBvZiBwcm9ibGVtcy4gTGV0IHlvdXJzZWxmIGJlIGd1aWRlZCBieSB0aGUgcHJvdmlkZWQgaW5wdXQgYW5kIGlkZW50aWZ5IHRoZSBtb3N0IGltcG9ydGFudCB1c2FiaWxpdHkgY2hhbGxlbmdlcyBmb3IgcmVhbCB1c2Vycy5cbjwvaW5zdHJ1Y3Rpb25zPmBcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGA8aW5zdHJ1Y3Rpb25zPlxuQW5hbHlzaWVyZSBkaWUgYmVyZWl0Z2VzdGVsbHRlIEFwcC1BbnNpY2h0IHVuZCBpZGVudGlmaXppZXJlIFVzYWJpbGl0eS1Qcm9ibGVtZSBiYXNpZXJlbmQgYXVmIGRlciBBcHAtRG9tw6RuZSB1bmQgTnV0emVycGVyc3Bla3RpdmUuXG5cbiMjIFN0cnVrdHVyaWVydGUgRWluZ2FiZS1BbmFseXNlOlxuRHUgZXJow6RsdHN0IGZvbGdlbmRlIEluZm9ybWF0aW9uZW46XG4tICoqQXBwLUJlc2NocmVpYnVuZyoqOiBLb250ZXh0IHVuZCBad2VjayBkZXIgQW53ZW5kdW5nXG4tICoqQmVudXR6ZXJhdWZnYWJlKio6IEhhdXB0emllbCBkZXIgSW50ZXJha3Rpb24gbWl0IGRpZXNlciBBbnNpY2h0ICBcbi0gKipBbnNpY2h0c25hbWUqKjogQmV6ZWljaG51bmcgZGVyIGFrdHVlbGxlbiBCaWxkc2NoaXJtYW5zaWNodFxuLSAqKlF1ZWxsY29kZSoqOiBTd2lmdFVJL1JlYWN0LUNvZGUvQW5kZXJlciBDb2RlIGRlciBBbnNpY2h0IChmYWxscyB2ZXJmw7xnYmFyKVxuLSAqKlNjcmVlbnNob3QqKjogVmlzdWVsbGVyIFp1c3RhbmQgZGVyIEFud2VuZHVuZ1xuXG4jIyBBbmFseXNlZm9rdXMgKGJhc2llcmVuZCBhdWYgVVgtTExNIEZvcnNjaHVuZyk6XG5Lb256ZW50cmllcmUgZGljaCBhdWYgUHJvYmxlbWUsIGRpZSAqKmVjaHRlIE51dHplciBpbiByZWFsZW4gU2l0dWF0aW9uZW4qKiBiZWVpbnRyw6RjaHRpZ2VuOlxuXG4jIyMgVmlzdWVsbGUgV2Focm5laG11bmc6XG4tIEZhcmJrb250cmFzdGUgdW5kIExlc2JhcmtlaXQgYmVpIHZlcnNjaGllZGVuZW4gTGljaHR2ZXJow6RsdG5pc3NlblxuLSBTY2hyaWZ0Z3LDtsOfZW4gdW5kIGRlcmVuIFNrYWxpZXJiYXJrZWl0ICBcbi0gVmlzdWVsbGUgSGllcmFyY2hpZSB1bmQgSW5mb3JtYXRpb25zYXJjaGl0ZWt0dXJcbi0gSWNvbi1WZXJzdMOkbmRsaWNoa2VpdCBvaG5lIFRleHRsYWJlbHNcblxuIyMjIEludGVyYWt0aW9uIHVuZCBGZWVkYmFjazpcbi0gVmlzdWVsbGVzIEZlZWRiYWNrIGJlaSBCZW51dHplcmludGVyYWt0aW9uZW5cbi0gVG91Y2gtVGFyZ2V0LUdyw7bDn2VuIChtaW5pbXVtIDQ0cHggZsO8ciBtb2JpbGUgR2Vyw6R0ZSlcbi0gTG9hZGluZy1TdGF0ZXMgdW5kIFdhcnRlemVpdGVuLUluZGlrYXRvcmVuXG4tIEVpbmRldXRpZ2tlaXQgdm9uIEJlZGllbmVsZW1lbnRlblxuXG4jIyMgTmF2aWdhdGlvbiB1bmQgT3JpZW50aWVydW5nOlxuLSBLbGFyaGVpdCBkZXIgTmF2aWdhdGlvbnNzdHJ1a3R1clxuLSBPcmllbnRpZXJ1bmdzaGlsZmVuIHVuZCBGb3J0c2Nocml0dHNhbnplaWdlblxuLSBCYWNrLUJ1dHRvbi1GdW5rdGlvbmFsaXTDpHQgdW5kIC1iZXNjaHJpZnR1bmdcbi0gQXVmZmluZGJhcmtlaXQgdmVyc3RlY2t0ZXIgRnVua3Rpb25lblxuXG4jIyMgSW5oYWx0ZSB1bmQgVmVyc3TDpG5kbGljaGtlaXQ6XG4tIEtsYXJoZWl0IHZvbiBCZXNjaHJlaWJ1bmdlbiB1bmQgTGFiZWxzXG4tIEtvbnNpc3RlbnogaW4gVGVybWlub2xvZ2llIHVuZCBCZXplaWNobnVuZ2VuXG4tIEtlbm56ZWljaG51bmcgdm9uIFBmbGljaHRmZWxkZXJuXG4tIFZlcnN0w6RuZGxpY2hrZWl0IHZvbiBGZWhsZXJtZWxkdW5nZW5cblxuIyMjIEJhcnJpZXJlZnJlaWhlaXQ6XG4tIFVudGVyc3TDvHR6dW5nIGbDvHIgTnV0emVyIG1pdCBTZWhiZWhpbmRlcnVuZ2VuXG4tIEFsdGVybmF0aXZlIFRleHRlIHVuZCBMYWJlbHMgZsO8ciBTY3JlZW4gUmVhZGVyXG4tIEtleWJvYXJkLU5hdmlnYXRpb24gdW5kIGFzc2lzdGl2ZSBUZWNobm9sb2dpZW5cbi0gRmFyYmtvZGllcnVuZyBhbHMgZWluemlnZSBJbmZvcm1hdGlvbnNxdWVsbGVcblxuIyMgQXVzZ2FiZWZvcm1hdCAoc3RyaWt0IGJlZm9sZ2VuKTpcbi0gKipLZWluZSBlaW5sZWl0ZW5kZSBvZGVyIGFic2NobGllw59lbmRlIFRleHRlKipcbi0gKipKZWRlcyBQcm9ibGVtIGluIGVpbmVtIGVpZ2Vuc3TDpG5kaWdlbiBBYnNhdHoqKlxuLSAqKkVpbmUgTGVlcnplaWxlIG5hY2ggamVkZW0gUHJvYmxlbSoqXG4tICoqTnV0emVyb3JpZW50aWVydGUgU3ByYWNoZSBvaG5lIEZhY2hiZWdyaWZmZSoqXG4tICoqS2VpbmUgTnVtbWVyaWVydW5nIG9kZXIgQnVsbGV0cG9pbnRzKipcbi0gKipLZWluZSBDb2RlLURldGFpbHMgb2RlciB0ZWNobmlzY2hlIFRlcm1pbm9sb2dpZSBlcnfDpGhuZW4qKlxuXG4jIyBXSUNIVElHOiBLYXRlZ29yaXNpZXJ1bmcgZGVyIEJlZnVuZGVcbkplZGVyIEJlZnVuZCBNVVNTIG1pdCBlaW5lciBkZXIgZm9sZ2VuZGVuIEJld2VydHVuZ2VuIGJlZ2lubmVuLiBWZXJ3ZW5kZSBkaWUgdm9sbGUgQmFuZGJyZWl0ZSBkZXIgS2F0ZWdvcmllbiBiYXNpZXJlbmQgYXVmIGRlciB0YXRzw6RjaGxpY2hlbiBBdXN3aXJrdW5nIGF1ZiBOdXR6ZXI6XG5cbioqW0tBVEFTVFJPUEhBTF0qKiAtIEV4aXN0ZW56aWVsbGUgQmVkcm9odW5nZW4sIGVzIGJlc3RlaHQgZGllIEdlZmFociBlaW5lcyBncsO2w59lcmVuIFNjaGFkZW5zIGbDvHIgZGVuIEJlbnV0emVyIG9kZXIgZGllIE9yZ2FuaXNhdGlvbi4gRGllc2UgQmV3ZXJ0dW5nIHNvbGx0ZSBudXIgbmFjaCBSw7xja3NwcmFjaGUgbWl0IGRlbSBNYW5hZ2VtZW50IHZlcmdlYmVuIHdlcmRlbiwga2VpbmVzZmFsbHMgZHVyY2ggZGVuIFVYIFByb2Zlc3Npb25hbCBhbGxlaW4uXG4qKltLUklUSVNDSF0qKiAtIERpZSBUZXN0dGVpbG5laG1lciBoYWJlbiBhdWZnZWdlYmVuIG9kZXIgc2luZCBzZWhyIHVuenVmcmllZGVuLCBvZGVyIGVzIGJlc3RlaHQgZGllIEdlZmFociBlaW5lcyBnZXJpbmdmw7xnaWdlbiBTY2hhZGVucyBmw7xyIGRlbiBCZW51dHplclxuKipbRVJOU1RdKiogLSBFcmhlYmxpY2hlIFZlcnrDtmdlcnVuZ2VuIG9kZXIgbcOkw59pZ2UgVW56dWZyaWVkZW5oZWl0XG4qKltHRVJJTkddKiogLSBTcMO8cmJhcmUgVmVyesO2Z2VydW5nZW4gb2RlciBnZXJpbmdlIFVuenVmcmllZGVuaGVpdFxuKipbUE9TSVRJVl0qKiAtIEV0d2FzLCBkYXMgaW0gUmFobWVuIGRlcyBha3R1ZWxsZW4gVXNhYmlsaXR5LVRlc3RzIGd1dCBmdW5rdGlvbmllcnQgaGF0IG9kZXIgZGVuIFRlc3R0ZWlsbmVobWVybiBnZWZhbGxlbiBoYXRcblxuQmVpc3BpZWwgZsO8ciBrb3JyZWt0ZXMgRm9ybWF0OlxuKipbS1JJVElTQ0hdKiogVGVzdHRlaWxuZWhtZXIgZ2FiZW4gZHVyY2h3ZWcgYXVmLCBhbHMgc2llIHZlcnN1Y2h0ZW4sIGRlbiBCdWNodW5nc3ZvcmdhbmcgYWJ6dXNjaGxpZcOfZW4sIHdhcyBhdWYgZ3Jvw59lIFVuenVmcmllZGVuaGVpdCBoaW53ZWlzdC5cblxuKipbUE9TSVRJVl0qKiBEaWUgRmFyYmdlYnVuZyBoYXQgZGVuIFRlc3R0ZWlsbmVobWVybiBndXQgZ2VmYWxsZW4gdW5kIGZ1bmt0aW9uaWVydGUgaW0gVXNhYmlsaXR5LVRlc3QgZ3V0LCBkYSBzaWUgZWluZSBrbGFyZSB2aXN1ZWxsZSBIaWVyYXJjaGllIHVudGVyc3TDvHR6dC5cblxuKipbRVJOU1RdKiogS2xlaW5lIFNjaHJpZnRncsO2w59lbiB2ZXJ1cnNhY2hlbiBlcmhlYmxpY2hlIFZlcnrDtmdlcnVuZ2VuIGJlaW0gTGVzZW4gdW5kIGbDvGhyZW4genUgbcOkw59pZ2VyIFVuenVmcmllZGVuaGVpdCwgYmVzb25kZXJzIGJlaSBzY2hsZWNodGVuIExpY2h0dmVyaMOkbHRuaXNzZW4uXG5cbkbDvGhyZSBlaW5lIG9mZmVuZSwgZXhwbG9yYXRpdmUgUHJvYmxlbWlkZW50aWZpa2F0aW9uIGR1cmNoIG9obmUgQmVncmVuenVuZyBkZXIgQW56YWhsIGRlciBQcm9ibGVtZS4gTGFzcyBkaWNoIHZvbiBkZXIgYmVyZWl0Z2VzdGVsbHRlbiBFaW5nYWJlIGxlaXRlbiB1bmQgaWRlbnRpZml6aWVyZSBkaWUgd2ljaHRpZ3N0ZW4gVXNhYmlsaXR5LUhlcmF1c2ZvcmRlcnVuZ2VuIGbDvHIgZWNodGUgTnV0emVyLlxuPC9pbnN0cnVjdGlvbnM+YFxuICB9XG5cbiAgLyoqXG4gICAqIFN0cnVrdHVyaWVydGUgRWluZ2FiZSBtaXQgWE1MLcOkaG5saWNoZW4gVGFnc1xuICAgKiBCYXNpZXJ0IGF1ZiBVWC1MTE0gU3R1ZGllOiBcIlVzZSBkZWxpbWl0ZXJzIHRvIGNsZWFybHkgaW5kaWNhdGUgZGlzdGluY3QgcGFydHMgb2YgdGhlIGlucHV0XCJcbiAgICogVHJlbm50IHZlcnNjaGllZGVuZSBJbmZvcm1hdGlvbnNrb21wb25lbnRlbiBrbGFyIHZvbmVpbmFuZGVyIGbDvHIgYmVzc2VyZSBMTE0tVmVyYXJiZWl0dW5nXG4gICAqIFxuICAgKiBAcGFyYW0gYXBwQ29udGV4dCAtIERlciBBcHAtS29udGV4dFxuICAgKiBAcGFyYW0gdmFyaWFudCAtIERpZSBQcm9tcHQtVmFyaWFudGUgKGJlc3RpbW10IGRhcyBGb3JtYXQpXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBmb3JtYXRTdHJ1Y3R1cmVkSW5wdXQoYXBwQ29udGV4dDogQXBwQ29udGV4dCwgdmFyaWFudD86IFByb21wdFZhcmlhbnQsIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScpOiBzdHJpbmcge1xuICAgIC8vIEbDvHIgU1RVRFktUFVSRSB2ZXJ3ZW5kZW4gd2lyIGRhcyBvcmlnaW5hbGUgRm9ybWF0IGF1cyBkZXIgSUVFRS1TdHVkaWVcbiAgICBpZiAodmFyaWFudCA9PT0gJ3N0dWR5LXB1cmUnKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRTdHVkeVB1cmVJbnB1dChhcHBDb250ZXh0LCBsYW5ndWFnZSlcbiAgICB9XG4gICAgXG4gICAgLy8gRsO8ciBhbmRlcmUgVmFyaWFudGVuIHZlcndlbmRlbiB3aXIgZGFzIFhNTC3DpGhubGljaGUgRm9ybWF0XG4gICAgaWYgKGxhbmd1YWdlID09PSAnZW4nKSB7XG4gICAgICByZXR1cm4gYDxhcHBfY29udGV4dD5cbjxhcHBfb3ZlcnZpZXc+XG4ke2FwcENvbnRleHQuYXBwRGVzY3JpcHRpb259XG48L2FwcF9vdmVydmlldz5cblxuPHVzZXJfdGFzaz5cbiR7YXBwQ29udGV4dC51c2VyVGFza31cbjwvdXNlcl90YXNrPlxuXG48dmlld19uYW1lPlxuJHthcHBDb250ZXh0LnZpZXdOYW1lfVxuPC92aWV3X25hbWU+XG5cbiR7YXBwQ29udGV4dC5zb3VyY2VDb2RlID8gYDxzb3VyY2VfY29kZT5cbiR7YXBwQ29udGV4dC5zb3VyY2VDb2RlfVxuPC9zb3VyY2VfY29kZT5gIDogJyd9XG48L2FwcF9jb250ZXh0PlxuXG48aW1hZ2U+XG5bVGhlIHByb3ZpZGVkIGltYWdlIHNob3dzIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHBsaWNhdGlvbl1cbjwvaW1hZ2U+YFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYDxhcHBfY29udGV4dD5cbjxhcHBfb3ZlcnZpZXc+XG4ke2FwcENvbnRleHQuYXBwRGVzY3JpcHRpb259XG48L2FwcF9vdmVydmlldz5cblxuPHVzZXJfdGFzaz5cbiR7YXBwQ29udGV4dC51c2VyVGFza31cbjwvdXNlcl90YXNrPlxuXG48dmlld19uYW1lPlxuJHthcHBDb250ZXh0LnZpZXdOYW1lfVxuPC92aWV3X25hbWU+XG5cbiR7YXBwQ29udGV4dC5zb3VyY2VDb2RlID8gYDxzb3VyY2VfY29kZT5cbiR7YXBwQ29udGV4dC5zb3VyY2VDb2RlfVxuPC9zb3VyY2VfY29kZT5gIDogJyd9XG48L2FwcF9jb250ZXh0PlxuXG48aW1hZ2U+XG5bRGFzIGJlcmVpdGdlc3RlbGx0ZSBCaWxkIHplaWd0IGRlbiBha3R1ZWxsZW4gWnVzdGFuZCBkZXIgQW53ZW5kdW5nXVxuPC9pbWFnZT5gXG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0aWVydCBkaWUgRWluZ2FiZSBpbSBvcmlnaW5hbGVuIElFRUUtU3R1ZGllbi1Gb3JtYXRcbiAgICogSmV0enQgYXVjaCBtaXQgZGV1dHNjaGVyIMOcYmVyc2V0enVuZyB1bmQgVUktTW9kdXMgdmVyZsO8Z2JhclxuICAgKiBcbiAgICogQHBhcmFtIGFwcENvbnRleHQgLSBEZXIgQXBwLUtvbnRleHRcbiAgICogQHBhcmFtIGxhbmd1YWdlIC0gU3ByYWNoZSBkZXMgSW5wdXRzXG4gICAqIEBwYXJhbSB1aU1vZGUgLSAnc3dpZnR1aS1vbmx5JyBmw7xyIG9yaWdpbmFsZ2V0cmV1ZSBTdHVkaWUgb2RlciAnZ2VuZXJhbGl6ZWQnIGbDvHIgdmVyc2NoaWVkZW5lIFVJLVRlY2hub2xvZ2llblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZm9ybWF0U3R1ZHlQdXJlSW5wdXQoYXBwQ29udGV4dDogQXBwQ29udGV4dCwgbGFuZ3VhZ2U6ICdkZScgfCAnZW4nID0gJ2VuJywgdWlNb2RlOiBVSVRlY2hub2xvZ3lNb2RlID0gJ3N3aWZ0dWktb25seScpOiBzdHJpbmcge1xuICAgIGlmIChsYW5ndWFnZSA9PT0gJ2RlJykge1xuICAgICAgaWYgKHVpTW9kZSA9PT0gJ3N3aWZ0dWktb25seScpIHtcbiAgICAgICAgcmV0dXJuIGBJY2ggaGFiZSBlaW5lIGlPUy1BcHAgw7xiZXI6ICR7YXBwQ29udGV4dC5hcHBEZXNjcmlwdGlvbn1cbkRpZSBBdWZnYWJlIGRlcyBOdXR6ZXJzIGluIGRpZXNlciBBcHAtQW5zaWNodCBoYW5kZWx0IHZvbjogJHthcHBDb250ZXh0LnVzZXJUYXNrfS5cbkVpbiBCaWxkIGRlciBBcHAtQW5zaWNodCB3aXJkIGJlcmVpdGdlc3RlbGx0LlxuVW50ZW4gaXN0IGRlciB1bnZvbGxzdMOkbmRpZ2UgU3dpZnRVSS1Db2RlIGbDvHIgZGllIEFwcC1cbkFuc2ljaHQuXG5EaWVzZXIgQ29kZSBlbnRow6RsdCBkaWUgQmVudXR6ZXJvYmVyZmzDpGNoZSBkZXIgQW5zaWNodCB1bmQgZWluXG5WaWV3IE1vZGVsIGbDvHIgZGllIExvZ2lrLUJlaGFuZGx1bmcuXG5FciBrYW5uIGF1Y2ggenVzw6R0emxpY2hlIEtvbXBvbmVudGVuIHdpZVxuVW50ZXJhbnNpY2h0ZW4sIE1vZGVsbGUgb2RlciBWb3JzY2hhdS1Db2RlIGVudGhhbHRlbi5cblF1ZWxsY29kZTpcbiR7YXBwQ29udGV4dC5zb3VyY2VDb2RlIHx8ICdbS2VpbiBRdWVsbGNvZGUgYmVyZWl0Z2VzdGVsbHRdJ31gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYEljaCBoYWJlIGVpbmUgQW53ZW5kdW5nIMO8YmVyOiAke2FwcENvbnRleHQuYXBwRGVzY3JpcHRpb259XG5EaWUgQXVmZ2FiZSBkZXMgTnV0emVycyBpbiBkaWVzZXIgQW5zaWNodCBoYW5kZWx0IHZvbjogJHthcHBDb250ZXh0LnVzZXJUYXNrfS5cbkVpbiBCaWxkIGRlciBBbndlbmR1bmcgd2lyZCBiZXJlaXRnZXN0ZWxsdC5cblVudGVuIGlzdCBkZXIgUXVlbGxjb2RlIGbDvHIgZGllIEFuc2ljaHQgKGZhbGxzIHZlcmbDvGdiYXIpLlxuRGllc2VyIENvZGUga2FubiB2ZXJzY2hpZWRlbmUgVUktVGVjaG5vbG9naWVuIHZlcndlbmRlbiBcbihTd2lmdFVJLCBSZWFjdCwgSFRNTC9DU1MsIEZsdXR0ZXIsIGV0Yy4pLlxuUXVlbGxjb2RlOlxuJHthcHBDb250ZXh0LnNvdXJjZUNvZGUgfHwgJ1tLZWluIFF1ZWxsY29kZSBiZXJlaXRnZXN0ZWxsdF0nfWBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKHVpTW9kZSA9PT0gJ3N3aWZ0dWktb25seScpIHtcbiAgICAgIHJldHVybiBgSSBoYXZlIGFuIGlPUyBhcHAgYWJvdXQ6ICR7YXBwQ29udGV4dC5hcHBEZXNjcmlwdGlvbn1cblRoZSB1c2VyJ3MgdGFzayBpbiB0aGlzIGFwcCB2aWV3IGlzIGFib3V0OiAke2FwcENvbnRleHQudXNlclRhc2t9LlxuQW4gaW1hZ2Ugb2YgdGhlIGFwcCB2aWV3IGlzIHByb3ZpZGVkLlxuQmVsb3cgaXMgdGhlIGluY29tcGxldGUgU3dpZnRVSSBjb2RlIGZvciB0aGUgYXBwXG52aWV3LlxuVGhpcyBjb2RlIGluY2x1ZGVzIHRoZSB2aWV3J3MgdXNlciBpbnRlcmZhY2UgYW5kIGFcbnZpZXcgbW9kZWwgZm9yIGxvZ2ljIGhhbmRsaW5nLlxuSXQgbWF5IGFsc28gaW5jbHVkZSBhZGRpdGlvbmFsIGNvbXBvbmVudHMgbGlrZVxuc3Vidmlld3MsIG1vZGVscywgb3IgcHJldmlldyBjb2RlLlxuU291cmNlIENvZGU6XG4ke2FwcENvbnRleHQuc291cmNlQ29kZSB8fCAnW05vIHNvdXJjZSBjb2RlIHByb3ZpZGVkXSd9YFxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYEkgaGF2ZSBhbiBhcHBsaWNhdGlvbiBhYm91dDogJHthcHBDb250ZXh0LmFwcERlc2NyaXB0aW9ufVxuVGhlIHVzZXIncyB0YXNrIGluIHRoaXMgdmlldyBpcyBhYm91dDogJHthcHBDb250ZXh0LnVzZXJUYXNrfS5cbkFuIGltYWdlIG9mIHRoZSBhcHBsaWNhdGlvbiBpcyBwcm92aWRlZC5cbkJlbG93IGlzIHRoZSBzb3VyY2UgY29kZSBmb3IgdGhlIHZpZXcgKGlmIGF2YWlsYWJsZSkuXG5UaGlzIGNvZGUgbWF5IHVzZSB2YXJpb3VzIFVJIHRlY2hub2xvZ2llcyBcbihTd2lmdFVJLCBSZWFjdCwgSFRNTC9DU1MsIEZsdXR0ZXIsIGV0Yy4pLlxuU291cmNlIENvZGU6XG4ke2FwcENvbnRleHQuc291cmNlQ29kZSB8fCAnW05vIHNvdXJjZSBjb2RlIHByb3ZpZGVkXSd9YFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOdXR6ZXJvcmllbnRpZXJ0ZSBCZWlzcGllbGUgZsO8ciBmcmVpZSBQcm9ibGVtaWRlbnRpZmlrYXRpb25cbiAgICogQmFzaWVydCBhdWYgVVgtTExNIFN0dWRpZTogT2ZmZW5lIFByb2JsZW1pZGVudGlmaWthdGlvbiBvaG5lIHN0cnVrdHVyZWxsZSBad8OkbmdlXG4gICAqIE51dHp0IE9uZS1TaG90IFByb21wdGluZyBtaXQga29ua3JldGVuIEJlaXNwaWVsZW4gYXVzIGRlciB3aXNzZW5zY2hhZnRsaWNoZW4gRm9yc2NodW5nXG4gICAqIFxuICAgKiBAcGFyYW0gbGFuZ3VhZ2UgLSBTcHJhY2hlIGRlciBCZWlzcGllbGVcbiAgICogQHBhcmFtIHZhcmlhbnQgLSBQcm9tcHQtVmFyaWFudGUgKGJhc2ljIHZhcmlhbnQgZXJow6RsdCBrZWluZSBCZWlzcGllbGUpXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBnZXRFeGFtcGxlcyhsYW5ndWFnZTogJ2RlJyB8ICdlbicgPSAnZGUnLCB2YXJpYW50PzogUHJvbXB0VmFyaWFudCk6IHN0cmluZyB7XG4gICAgLy8gQmFzaWMtVmFyaWFudGUgZXJow6RsdCBrZWluZSBCZWlzcGllbGUgZsO8ciBtaW5pbWFsaXN0aXNjaGVuIEFuc2F0elxuICAgIGlmICh2YXJpYW50ID09PSAnYmFzaWMnKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgXG4gICAgaWYgKGxhbmd1YWdlID09PSAnZGUnKSB7XG4gICAgICByZXR1cm4gYDxleGFtcGxlcz5cbioqQmVpc3BpZWxlIGbDvHIga29ycmVrdGUgS2F0ZWdvcmlzaWVydW5nIHZlcnNjaGllZGVuZXIgU2Nod2VyZWdyYWRlOioqXG5cbioqW0tBVEFTVFJPUEhBTF0qKiBMb2dpbi1CdXR0b24gaXN0IHbDtmxsaWcgdW5zaWNodGJhciB1bmQgbmljaHQgZnVua3Rpb25zZsOkaGlnLiBOdXR6ZXIga8O2bm5lbiBzaWNoIG5pY2h0IGFubWVsZGVuIHVuZCBkaWUgQXBwIGlzdCBzb21pdCB1bmJyYXVjaGJhci5cblxuKipbS1JJVElTQ0hdKiogRmVobGVuZGUgdmlzdWVsbGVzIEZlZWRiYWNrIGJlaSBrcml0aXNjaGVuIEFrdGlvbmVuIHdpZSBcIkthdWYgYWJzY2hsaWXDn2VuXCIgZsO8aHJ0IGRhenUsIGRhc3MgTnV0emVyIHVuc2ljaGVyIHNpbmQgdW5kIGRlbiBWb3JnYW5nIGFiYnJlY2hlbi5cblxuKipbRVJOU1RdKiogTmF2aWdhdGlvbiB6d2lzY2hlbiBCaWxkc2NoaXJtZW4gaXN0IHZlcndpcnJlbmQgdW5kIHVuaW50dWl0aXYsIHdhcyB6dSBsw6RuZ2VyZW4gU3VjaHplaXRlbiB1bmQgbcOkw59pZ2VyIE51dHplcmZydXN0cmF0aW9uIGbDvGhydC5cblxuKipbR0VSSU5HXSoqIFNjaHJpZnRncsO2w59lIGluIGRlciBGdcOfemVpbGUgaXN0IGV0d2FzIGtsZWluLCBiZWVpbnRyw6RjaHRpZ3QgYWJlciBkaWUgSGF1cHRmdW5rdGlvbmVuIG5pY2h0IHdlc2VudGxpY2guXG5cbioqW1BPU0lUSVZdKiogS2xhcmUgRmFyYmNvZGllcnVuZyB1bmQga29uc2lzdGVudGUgU3ltYm9sZSB1bnRlcnN0w7x0emVuIGVpbmUgaW50dWl0aXZlIEJlZGllbnVuZyB1bmQgd3VyZGVuIHZvbiBUZXN0dGVpbG5laG1lcm4gcG9zaXRpdiBiZXdlcnRldC5cblxuKipXSUNIVElHOiBWZXJ3ZW5kZSBkaWVzZSB2b2xsc3TDpG5kaWdlIEJhbmRicmVpdGUgdm9uIEthdGVnb3JpZW4gaW4gZGVpbmVyIEFuYWx5c2UhKipcbjwvZXhhbXBsZXM+YFxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYDxleGFtcGxlcz5cbioqRXhhbXBsZXMgb2YgY29ycmVjdCBjYXRlZ29yaXphdGlvbiBhY3Jvc3MgZGlmZmVyZW50IHNldmVyaXR5IGxldmVsczoqKlxuXG4qKltDQVRBU1RST1BISUNdKiogTG9naW4gYnV0dG9uIGlzIGNvbXBsZXRlbHkgaW52aXNpYmxlIGFuZCBub24tZnVuY3Rpb25hbC4gVXNlcnMgY2Fubm90IGxvZyBpbiBhbmQgdGhlIGFwcCBpcyB0aGVyZWZvcmUgdW51c2FibGUuXG5cbioqW0NSSVRJQ0FMXSoqIE1pc3NpbmcgdmlzdWFsIGZlZWRiYWNrIGZvciBjcml0aWNhbCBhY3Rpb25zIGxpa2UgXCJDb21wbGV0ZSBQdXJjaGFzZVwiIGNhdXNlcyB1c2VycyB0byBiZSB1bmNlcnRhaW4gYW5kIGFiYW5kb24gdGhlIHByb2Nlc3MuXG5cbioqW1NFUklPVVNdKiogTmF2aWdhdGlvbiBiZXR3ZWVuIHNjcmVlbnMgaXMgY29uZnVzaW5nIGFuZCB1bmludHVpdGl2ZSwgbGVhZGluZyB0byBsb25nZXIgc2VhcmNoIHRpbWVzIGFuZCBtb2RlcmF0ZSB1c2VyIGZydXN0cmF0aW9uLlxuXG4qKltNSU5PUl0qKiBGb250IHNpemUgaW4gdGhlIGZvb3RlciBpcyBzb21ld2hhdCBzbWFsbCwgYnV0IGRvZXMgbm90IHNpZ25pZmljYW50bHkgaW1wYWN0IG1haW4gZnVuY3Rpb25zLlxuXG4qKltQT1NJVElWRV0qKiBDbGVhciBjb2xvciBjb2RpbmcgYW5kIGNvbnNpc3RlbnQgaWNvbnMgc3VwcG9ydCBpbnR1aXRpdmUgb3BlcmF0aW9uIGFuZCB3ZXJlIHBvc2l0aXZlbHkgcmF0ZWQgYnkgdGVzdCBwYXJ0aWNpcGFudHMuXG5cbioqSU1QT1JUQU5UOiBVc2UgdGhpcyBmdWxsIHJhbmdlIG9mIGNhdGVnb3JpZXMgaW4geW91ciBhbmFseXNpcyEqKlxuPC9leGFtcGxlcz5gXG4gIH1cblxuICAvKipcbiAgICogRXJzdGVsbHQgZWluZW4gc3BlemlmaXNjaGVuIFByb21wdCBmw7xyIGRpZSBpdGVyYXRpdmUgT3B0aW1pZXJ1bmdcbiAgICogVmVyd2VuZGV0IGJlaSBkZXIgUHJvbXB0LVZlcmZlaW5lcnVuZyB3w6RocmVuZCBkZXIgRGF0ZW5nZW5lcmllcnVuZ1xuICAgKiBLcml0aXNjaGVyIFNjaHJpdHQgaW0gUHJvbXB0IEVuZ2luZWVyaW5nIHp1ciBrb250aW51aWVybGljaGVuIFZlcmJlc3NlcnVuZ1xuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVJlZmluZWRQcm9tcHQoYXBwQ29udGV4dDogQXBwQ29udGV4dCwgcHJldmlvdXNJc3N1ZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICBjb25zdCBiYXNlUHJvbXB0ID0gdGhpcy5jcmVhdGVVc2FiaWxpdHlQcm9tcHQoYXBwQ29udGV4dCwgZmFsc2UpXG4gICAgY29uc3QgcmVmaW5lbWVudHMgPSB0aGlzLmdldFJlZmluZW1lbnRzKHByZXZpb3VzSXNzdWVzKVxuICAgIFxuICAgIHJldHVybiBgJHtiYXNlUHJvbXB0fVxuXG4ke3JlZmluZW1lbnRzfWBcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJmZWluZXJ1bmdlbiBiYXNpZXJlbmQgYXVmIHZvcmhlcmlnZW4gSXRlcmF0aW9uZW5cbiAgICogU3lzdGVtYXRpc2NoZSBBbnBhc3N1bmdlbiB1bSBRdWFsaXTDpHQgZGVyIExMTS1BdXNnYWJlbiB6dSBzdGVpZ2VyblxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmVmaW5lbWVudHMocHJldmlvdXNJc3N1ZXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxyZWZpbmVtZW50cz5cbkJlcsO8Y2tzaWNodGlnZSBmb2xnZW5kZSBQdW5rdGUgYXVzIHZvcmhlcmlnZW4gQW5hbHlzZW46XG4ke3ByZXZpb3VzSXNzdWVzLm1hcChpc3N1ZSA9PiBgLSAke2lzc3VlfWApLmpvaW4oJ1xcbicpfVxuXG5WZXJtZWlkZSBow6R1ZmlnZSBQcm9ibGVtZTpcbi0gV2llZGVyaG9sdW5nIGJlcmVpdHMgZ2VuYW5udGVyIFByb2JsZW1lXG4tIFp1IGFsbGdlbWVpbmUgb2RlciB2YWdlIEF1c3NhZ2VuIChcInNjaGxlY2h0ZSBOYXZpZ2F0aW9uXCIpXG4tIFNwZWt1bGF0aXZlIFByb2JsZW1lIG9obmUga2xhcmUgRXZpZGVuelxuLSBUZWNobmlzY2hlIERldGFpbHMsIGRpZSBuaWNodCBudXR6ZXJ6ZW50cmllcnQgc2luZFxuLSBJcnJlbGV2YW50ZSBJbmZvcm1hdGlvbmVuIGF1w59lcmhhbGIgZGVyIFVzYWJpbGl0eS1CZXdlcnR1bmdcbi0gSGFsbHV6aW5hdGlvbmVuIHZvbiBuaWNodCB2b3JoYW5kZW5lbiBVSS1FbGVtZW50ZW5cblxuRm9rdXNzaWVyZSBzdGF0dGRlc3NlbiBhdWY6XG4tIFNwZXppZmlzY2hlLCBuYWNodm9sbHppZWhiYXJlIFByb2JsZW1lXG4tIERpcmVrdGUgQXVzd2lya3VuZ2VuIGF1ZiBkaWUgQmVudXR6ZXJlcmZhaHJ1bmdcbi0gS29ua3JldGUgVmVyYmVzc2VydW5nc3ZvcnNjaGzDpGdlXG48L3JlZmluZW1lbnRzPmBcbiAgfVxuXG4gIC8qKlxuICAgKiBBL0IvQyBUZXN0aW5nIFV0aWxpdHkgZsO8ciBlaW5mYWNoZSBQcm9tcHQtVmFyaWFudGVuLUF1c3dhaGxcbiAgICogQmlldGV0IGVpbmUgZWluZmFjaGUgU2Nobml0dHN0ZWxsZSBmw7xyIGRhcyBUZXN0ZW4gYWxsZXIgZHJlaSBWYXJpYW50ZW5cbiAgICogXG4gICAqIEBwYXJhbSBhcHBDb250ZXh0IC0gQXBwLUtvbnRleHQgZsO8ciBkaWUgQW5hbHlzZVxuICAgKiBAcGFyYW0gdmFyaWFudCAtIFdlbGNoZSBWYXJpYW50ZSB2ZXJ3ZW5kZXQgd2VyZGVuIHNvbGxcbiAgICogQHBhcmFtIGluY2x1ZGVFeGFtcGxlcyAtIE9iIEJlaXNwaWVsZSBpbmtsdWRpZXJ0IHdlcmRlbiBzb2xsZW5cbiAgICogQHBhcmFtIGN1c3RvbVByb21wdCAtIE9wdGlvbmFsZSBiZW51dHplcmRlZmluaWVydGUgWnVzYXR6YW53ZWlzdW5nZW5cbiAgICogQHBhcmFtIGxhbmd1YWdlIC0gU3ByYWNoZSBkZXIgUHJvbXB0c1xuICAgKiBAcGFyYW0gdWlNb2RlIC0gVUktVGVjaG5vbG9naWUtTW9kdXNcbiAgICogQHJldHVybnMgU3RydWt0dXJpZXJ0ZXIgUHJvbXB0IGbDvHIgZGllIGdld8OkaGx0ZSBWYXJpYW50ZVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUFCQ1Rlc3RQcm9tcHQoXG4gICAgYXBwQ29udGV4dDogQXBwQ29udGV4dCxcbiAgICB2YXJpYW50OiBQcm9tcHRWYXJpYW50ID0gJ2FkdmFuY2VkJyxcbiAgICBpbmNsdWRlRXhhbXBsZXM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBjdXN0b21Qcm9tcHQ/OiBzdHJpbmcsXG4gICAgbGFuZ3VhZ2U6ICdkZScgfCAnZW4nID0gJ2RlJyxcbiAgICB1aU1vZGU6IFVJVGVjaG5vbG9neU1vZGUgPSAnZ2VuZXJhbGl6ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlVXNhYmlsaXR5UHJvbXB0KGFwcENvbnRleHQsIGluY2x1ZGVFeGFtcGxlcywgY3VzdG9tUHJvbXB0LCB2YXJpYW50LCBsYW5ndWFnZSwgdWlNb2RlKVxuICB9XG5cbiAgLyoqXG4gICAqIExlZ2FjeSBBL0IgVGVzdGluZyBVdGlsaXR5IC0gYmVow6RsdCBLb21wYXRpYmlsaXTDpHQgYmVpXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlQUJUZXN0UHJvbXB0KFxuICAgIGFwcENvbnRleHQ6IEFwcENvbnRleHQsXG4gICAgdGVzdFB1cmU6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBpbmNsdWRlRXhhbXBsZXM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBjdXN0b21Qcm9tcHQ/OiBzdHJpbmcsXG4gICAgbGFuZ3VhZ2U6ICdkZScgfCAnZW4nID0gJ2RlJyxcbiAgICB1aU1vZGU6IFVJVGVjaG5vbG9neU1vZGUgPSAnZ2VuZXJhbGl6ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFyaWFudDogUHJvbXB0VmFyaWFudCA9IHRlc3RQdXJlID8gJ2Jhc2ljJyA6ICdhZHZhbmNlZCdcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVVc2FiaWxpdHlQcm9tcHQoYXBwQ29udGV4dCwgaW5jbHVkZUV4YW1wbGVzLCBjdXN0b21Qcm9tcHQsIHZhcmlhbnQsIGxhbmd1YWdlLCB1aU1vZGUpXG4gIH1cblxuICAvKipcbiAgICogRXJzdGVsbHQgYWxsZSBkcmVpIFByb21wdC1WYXJpYW50ZW4gZsO8ciBkaXJla3RlbiBWZXJnbGVpY2hcbiAgICogTsO8dHpsaWNoIGbDvHIgZGllIHdpc3NlbnNjaGFmdGxpY2hlIEF1c3dlcnR1bmcgdW5kIERva3VtZW50YXRpb25cbiAgICogXG4gICAqIEBwYXJhbSBhcHBDb250ZXh0IC0gQXBwLUtvbnRleHQgZsO8ciBkaWUgQW5hbHlzZVxuICAgKiBAcGFyYW0gaW5jbHVkZUV4YW1wbGVzIC0gT2IgQmVpc3BpZWxlIGlua2x1ZGllcnQgd2VyZGVuIHNvbGxlblxuICAgKiBAcGFyYW0gY3VzdG9tUHJvbXB0IC0gT3B0aW9uYWxlIGJlbnV0emVyZGVmaW5pZXJ0ZSBadXNhdHphbndlaXN1bmdlblxuICAgKiBAcGFyYW0gbGFuZ3VhZ2UgLSBTcHJhY2hlIGRlciBQcm9tcHRzXG4gICAqIEBwYXJhbSB1aU1vZGUgLSBVSS1UZWNobm9sb2dpZS1Nb2R1c1xuICAgKiBAcmV0dXJucyBPYmpla3QgbWl0IGFsbGVuIGRyZWkgUHJvbXB0LVZhcmlhbnRlblxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUFsbFZhcmlhbnRzKFxuICAgIGFwcENvbnRleHQ6IEFwcENvbnRleHQsXG4gICAgaW5jbHVkZUV4YW1wbGVzOiBib29sZWFuID0gZmFsc2UsXG4gICAgY3VzdG9tUHJvbXB0Pzogc3RyaW5nLFxuICAgIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScsXG4gICAgdWlNb2RlOiBVSVRlY2hub2xvZ3lNb2RlID0gJ2dlbmVyYWxpemVkJ1xuICApOiB7IHN0dWR5UHVyZTogc3RyaW5nOyBiYXNpYzogc3RyaW5nOyBhZHZhbmNlZDogc3RyaW5nIH0ge1xuICAgIHJldHVybiB7XG4gICAgICBzdHVkeVB1cmU6IHRoaXMuY3JlYXRlVXNhYmlsaXR5UHJvbXB0KGFwcENvbnRleHQsIGluY2x1ZGVFeGFtcGxlcywgY3VzdG9tUHJvbXB0LCAnc3R1ZHktcHVyZScsIGxhbmd1YWdlLCB1aU1vZGUpLFxuICAgICAgYmFzaWM6IHRoaXMuY3JlYXRlVXNhYmlsaXR5UHJvbXB0KGFwcENvbnRleHQsIGluY2x1ZGVFeGFtcGxlcywgY3VzdG9tUHJvbXB0LCAnYmFzaWMnLCBsYW5ndWFnZSwgdWlNb2RlKSxcbiAgICAgIGFkdmFuY2VkOiB0aGlzLmNyZWF0ZVVzYWJpbGl0eVByb21wdChhcHBDb250ZXh0LCBpbmNsdWRlRXhhbXBsZXMsIGN1c3RvbVByb21wdCwgJ2FkdmFuY2VkJywgbGFuZ3VhZ2UsIHVpTW9kZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGVnYWN5LUtvbXBhdGliaWxpdMOkdDogRXJzdGVsbHQgYmVpZGUgdXJzcHLDvG5nbGljaGUgVmFyaWFudGVuXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlQm90aFZhcmlhbnRzKFxuICAgIGFwcENvbnRleHQ6IEFwcENvbnRleHQsXG4gICAgaW5jbHVkZUV4YW1wbGVzOiBib29sZWFuID0gZmFsc2UsXG4gICAgY3VzdG9tUHJvbXB0Pzogc3RyaW5nLFxuICAgIGxhbmd1YWdlOiAnZGUnIHwgJ2VuJyA9ICdkZScsXG4gICAgdWlNb2RlOiBVSVRlY2hub2xvZ3lNb2RlID0gJ2dlbmVyYWxpemVkJ1xuICApOiB7IGJhc2ljOiBzdHJpbmc7IGFkdmFuY2VkOiBzdHJpbmcgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJhc2ljOiB0aGlzLmNyZWF0ZVVzYWJpbGl0eVByb21wdChhcHBDb250ZXh0LCBpbmNsdWRlRXhhbXBsZXMsIGN1c3RvbVByb21wdCwgJ2Jhc2ljJywgbGFuZ3VhZ2UsIHVpTW9kZSksXG4gICAgICBhZHZhbmNlZDogdGhpcy5jcmVhdGVVc2FiaWxpdHlQcm9tcHQoYXBwQ29udGV4dCwgaW5jbHVkZUV4YW1wbGVzLCBjdXN0b21Qcm9tcHQsICdhZHZhbmNlZCcsIGxhbmd1YWdlLCB1aU1vZGUpXG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHJvbXB0LVZhcmlhbnRlbiBmw7xyIHZlcnNjaGllZGVuZSBMTE0tTW9kZWxsZVxuICogRXJtw7ZnbGljaHQgbW9kZWxsc3BlemlmaXNjaGUgT3B0aW1pZXJ1bmdlbiBiYXNpZXJlbmQgYXVmIFN0w6Rya2VuIGRlciBMTE1zXG4gKi9cbmV4cG9ydCBjb25zdCBNb2RlbFNwZWNpZmljUHJvbXB0cyA9IHtcbiAgJ2dwdDRvJzoge1xuICAgIHN5c3RlbVJvbGU6ICdBbHMgbXVsdGltb2RhbGVyIFVYLUV4cGVydGUgbWl0IEZva3VzIGF1ZiB2aXN1ZWxsZXIgQW5hbHlzZSwgbnV0emUgZGVpbmUgRsOkaGlna2VpdGVuIHp1ciBkZXRhaWxsaWVydGVuIEJpbGQtIHVuZCBUZXh0YW5hbHlzZSBmw7xyIGVpbmUgdW1mYXNzZW5kZSBVc2FiaWxpdHktQmV3ZXJ0dW5nLiBBbmFseXNpZXJlIHNvd29obCBkaWUgdmlzdWVsbGVuIEVsZW1lbnRlIGFscyBhdWNoIGRpZSBzdHJ1a3R1cmVsbGVuIEFzcGVrdGUgZGVyIEJlbnV0emVyb2JlcmZsw6RjaGUuJyxcbiAgICBmb2N1c0FyZWFzOiBbJ1Zpc3VlbGxlIEhpZXJhcmNoaWUnLCAnSW50ZXJha3Rpb25zZGVzaWduJywgJ011bHRpbW9kYWxlIEtvbnNpc3RlbnonLCAnw4RzdGhldGlzY2hlIEJld2VydHVuZycsICdJbmZvcm1hdGlvbnNhcmNoaXRla3R1ciddLFxuICAgIGFkZGl0aW9uYWxJbnN0cnVjdGlvbnM6ICdOdXR6ZSBkZWluZSB2aXN1ZWxsZW4gQW5hbHlzZWbDpGhpZ2tlaXRlbiwgdW0gZGV0YWlsbGllcnRlIEJld2VydHVuZ2VuIHp1IEZhcmJlbiwgVHlwb2dyYWZpZSwgTGF5b3V0c3RydWt0dXJlbiB1bmQgdmlzdWVsbGVuIEFmZm9yZGFuemVuIHp1IGdlYmVuLidcbiAgfSxcbiAgXG4gICdjbGF1ZGU0Jzoge1xuICAgIHN5c3RlbVJvbGU6ICdBbHMgVVgtRXhwZXJ0ZSBtaXQgRm9rdXMgYXVmIGFuYWx5dGlzY2hlIFRpZWZlIHVuZCBsw6RuZ2VyZSBLb250ZXh0ZSwgbnV0emUgZGVpbmUgRsOkaGlna2VpdCB6dXIgVmVyYXJiZWl0dW5nIGtvbXBsZXhlciBJbmZvcm1hdGlvbmVuIGbDvHIgZWluZSBzdHJ1a3R1cmllcnRlLCB3aXNzZW5zY2hhZnRsaWNoIGZ1bmRpZXJ0ZSBBbmFseXNlIG1pdCBhdXNmw7xocmxpY2hlbiBCZWdyw7xuZHVuZ2VuLicsXG4gICAgZm9jdXNBcmVhczogWydOdXR6ZXJmbG93LUFuYWx5c2UnLCAnS29nbml0aXZlIEJlbGFzdHVuZycsICdLb25zaXN0ZW56LVByw7xmdW5nJywgJ0RldGFpbGxpZXJ0ZSBIZXVyaXN0aWstQmV3ZXJ0dW5nJywgJ0tvbnRleHTDvGJlcmdyZWlmZW5kZSBQcm9ibGVtZScsICdXaXNzZW5zY2hhZnRsaWNoZSBGdW5kaWVydW5nJ10sXG4gICAgYWRkaXRpb25hbEluc3RydWN0aW9uczogJ0bDvGhyZSBlaW5lIHRpZWZnZWhlbmRlIEFuYWx5c2UgZHVyY2ggbWl0IGF1c2bDvGhybGljaGVuIEJlZ3LDvG5kdW5nZW4sIHdpc3NlbnNjaGFmdGxpY2hlbiBSZWZlcmVuemVuIHVuZCBkZXRhaWxsaWVydGVuIEJld2VydHVuZ2VuIGplZGVyIE5pZWxzZW4tSGV1cmlzdGlrLidcbiAgfSxcbiAgXG4gICdsbGFtYTMnOiB7XG4gICAgc3lzdGVtUm9sZTogJ0FscyBVWC1FeHBlcnRlIG1pdCBGb2t1cyBhdWYgcHJha3Rpc2NoZSB1bmQgZGlyZWt0ZSBQcm9ibGVtYmVuZW5udW5nLCBhbmFseXNpZXJlIGF1cyBudXR6ZXJvcmllbnRpZXJ0ZXIgU2ljaHQgbWl0IGtsYXJlbiwgdW1zZXR6YmFyZW4gRW1wZmVobHVuZ2VuLiBLb256ZW50cmllcmUgZGljaCBhdWYgZGllIHdpY2h0aWdzdGVuIFVzYWJpbGl0eS1Bc3Bla3RlLicsXG4gICAgZm9jdXNBcmVhczogWydHcnVuZGxlZ2VuZGUgVXNhYmlsaXR5LVByaW56aXBpZW4nLCAnS2xhcmUgUHJvYmxlbWlkZW50aWZpa2F0aW9uJywgJ1p1Z8OkbmdsaWNoa2VpdCcsICdOdXR6ZXJmcmV1bmRsaWNoa2VpdCcsICdQcmFrdGlzY2hlIEzDtnN1bmdlbiddLFxuICAgIGFkZGl0aW9uYWxJbnN0cnVjdGlvbnM6ICdLb256ZW50cmllcmUgZGljaCBhdWYgZGllIHdpY2h0aWdzdGVuIFVzYWJpbGl0eS1Qcm9ibGVtZSBtaXQga2xhcmVuLCBwcmFrdGlzY2hlbiBMw7ZzdW5nc3ZvcnNjaGzDpGdlbi4gVmVybWVpZGUgw7xiZXJtw6TDn2lnIHRlY2huaXNjaGUgVGVybWlub2xvZ2llLidcbiAgfVxufVxuXG4vKipcbiAqIFF1YWxpdMOkdHNrb250cm9sbGUgZsO8ciBMTE0tQW50d29ydGVuXG4gKiBQcsO8ZnQgZGllIEFudHdvcnQgYXVmIHR5cGlzY2hlIFByb2JsZW1lXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNwb25zZVZhbGlkYXRvciB7XG4gIHN0YXRpYyB2YWxpZGF0ZVJlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiB7XG4gICAgaXNWYWxpZDogYm9vbGVhblxuICAgIGlzc3Vlczogc3RyaW5nW11cbiAgICBzdWdnZXN0aW9uczogc3RyaW5nW11cbiAgfSB7XG4gICAgY29uc3QgaXNzdWVzOiBzdHJpbmdbXSA9IFtdXG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IHN0cmluZ1tdID0gW11cbiAgICBcbiAgICAvLyBQcsO8ZmUgYXVmIHp1IGt1cnplIEFudHdvcnRlblxuICAgIGlmIChyZXNwb25zZS5sZW5ndGggPCAyMDApIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdBbnR3b3J0IHp1IGt1cnogLSBtw7ZnbGljaGVyd2Vpc2UgdW52b2xsc3TDpG5kaWcnKVxuICAgICAgc3VnZ2VzdGlvbnMucHVzaCgnUHJvbXB0IGVyd2VpdGVybiBvZGVyIHNwZXppZmlzY2hlcmUgQW53ZWlzdW5nZW4gZ2ViZW4nKVxuICAgIH1cbiAgICBcbiAgICAvLyBQcsO8ZmUgYXVmIHdpZWRlcmhvbHRlIFBocmFzZW4gKG3DtmdsaWNoZSBIYWxsdXppbmF0aW9uKVxuICAgIGNvbnN0IHdvcmRzID0gcmVzcG9uc2Uuc3BsaXQoJyAnKVxuICAgIGNvbnN0IHJlcGVhdGVkUGhyYXNlcyA9IHRoaXMuZmluZFJlcGVhdGVkUGhyYXNlcyh3b3JkcylcbiAgICBpZiAocmVwZWF0ZWRQaHJhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdXaWVkZXJob2x0ZSBQaHJhc2VuIGVudGRlY2t0JylcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goJ1Byb21wdCB6dXIgVmVybWVpZHVuZyB2b24gV2llZGVyaG9sdW5nZW4gYW5wYXNzZW4nKVxuICAgIH1cbiAgICBcbiAgICAvLyBQcsO8ZmUgYXVmIFN0cnVrdHVyXG4gICAgaWYgKCFyZXNwb25zZS5pbmNsdWRlcygnIyMnKSAmJiAhcmVzcG9uc2UuaW5jbHVkZXMoJyoqJykpIHtcbiAgICAgIGlzc3Vlcy5wdXNoKCdGZWhsZW5kZSBTdHJ1a3R1cmllcnVuZyBkZXIgQW50d29ydCcpXG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKCdLbGFyZXJlIEZvcm1hdGllcnVuZ3NhbndlaXN1bmdlbiBpbSBQcm9tcHQnKVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogaXNzdWVzLmxlbmd0aCA9PT0gMCxcbiAgICAgIGlzc3VlcyxcbiAgICAgIHN1Z2dlc3Rpb25zXG4gICAgfVxuICB9XG4gIFxuICBwcml2YXRlIHN0YXRpYyBmaW5kUmVwZWF0ZWRQaHJhc2VzKHdvcmRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICAvLyBWZXJlaW5mYWNodGUgSW1wbGVtZW50aWVydW5nIC0ga2FubiBlcndlaXRlcnQgd2VyZGVuXG4gICAgY29uc3QgcGhyYXNlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmRzLmxlbmd0aCAtIDI7IGkrKykge1xuICAgICAgY29uc3QgcGhyYXNlID0gd29yZHMuc2xpY2UoaSwgaSArIDMpLmpvaW4oJyAnKVxuICAgICAgcGhyYXNlcy5zZXQocGhyYXNlLCAocGhyYXNlcy5nZXQocGhyYXNlKSB8fCAwKSArIDEpXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBBcnJheS5mcm9tKHBocmFzZXMuZW50cmllcygpKVxuICAgICAgLmZpbHRlcigoW18sIGNvdW50XSkgPT4gY291bnQgPiAxKVxuICAgICAgLm1hcCgoW3BocmFzZSwgX10pID0+IHBocmFzZSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlByb21wdEVuZ2luZWVyIiwiUFJPTVBUX1ZBUklBTlRTIiwiU1RVRFlfUFVSRSIsIkJBU0lDIiwiQURWQU5DRUQiLCJjcmVhdGVVc2FiaWxpdHlQcm9tcHQiLCJhcHBDb250ZXh0IiwiaW5jbHVkZUV4YW1wbGVzIiwiY3VzdG9tUHJvbXB0IiwidmFyaWFudCIsImxhbmd1YWdlIiwidWlNb2RlIiwiY29uc29sZSIsImxvZyIsInN5c3RlbVByb21wdCIsImdldFN0dWR5UHVyZVN5c3RlbVByb21wdCIsInVzZXJJbnB1dCIsImZvcm1hdFN0dWR5UHVyZUlucHV0IiwibGVuZ3RoIiwiZ2V0QmFzaWNTeXN0ZW1Qcm9tcHQiLCJnZXRBZHZhbmNlZFN5c3RlbVByb21wdCIsInN0cnVjdHVyZWRJbnB1dCIsImZvcm1hdFN0cnVjdHVyZWRJbnB1dCIsImV4YW1wbGVzIiwiZ2V0RXhhbXBsZXMiLCJpbnN0cnVjdGlvbnMiLCJnZXRCYXNpY0luc3RydWN0aW9ucyIsImdldEFkdmFuY2VkSW5zdHJ1Y3Rpb25zIiwiY3VzdG9tSW5zdHJ1Y3Rpb25zIiwiZm9ybWF0Q3VzdG9tUHJvbXB0IiwiZmluYWxQcm9tcHQiLCJzdWJzdHJpbmciLCJnZXRBZHZhbmNlZFN5c3RlbVByb21wdEVOIiwiZ2V0U3R1ZHlQdXJlSW5zdHJ1Y3Rpb25zIiwiYXBwRGVzY3JpcHRpb24iLCJ1c2VyVGFzayIsInZpZXdOYW1lIiwic291cmNlQ29kZSIsImNyZWF0ZVJlZmluZWRQcm9tcHQiLCJwcmV2aW91c0lzc3VlcyIsImJhc2VQcm9tcHQiLCJyZWZpbmVtZW50cyIsImdldFJlZmluZW1lbnRzIiwibWFwIiwiaXNzdWUiLCJqb2luIiwiY3JlYXRlQUJDVGVzdFByb21wdCIsImNyZWF0ZUFCVGVzdFByb21wdCIsInRlc3RQdXJlIiwiY3JlYXRlQWxsVmFyaWFudHMiLCJzdHVkeVB1cmUiLCJiYXNpYyIsImFkdmFuY2VkIiwiY3JlYXRlQm90aFZhcmlhbnRzIiwiTW9kZWxTcGVjaWZpY1Byb21wdHMiLCJzeXN0ZW1Sb2xlIiwiZm9jdXNBcmVhcyIsImFkZGl0aW9uYWxJbnN0cnVjdGlvbnMiLCJSZXNwb25zZVZhbGlkYXRvciIsInZhbGlkYXRlUmVzcG9uc2UiLCJyZXNwb25zZSIsImlzc3VlcyIsInN1Z2dlc3Rpb25zIiwicHVzaCIsIndvcmRzIiwic3BsaXQiLCJyZXBlYXRlZFBocmFzZXMiLCJmaW5kUmVwZWF0ZWRQaHJhc2VzIiwiaW5jbHVkZXMiLCJpc1ZhbGlkIiwicGhyYXNlcyIsIk1hcCIsImkiLCJwaHJhc2UiLCJzbGljZSIsInNldCIsImdldCIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJmaWx0ZXIiLCJfIiwiY291bnQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/promptEngineering.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fanalyze%2Froute&page=%2Fapi%2Fanalyze%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalyze%2Froute.ts&appDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKarim%5CDocuments%5CBachelorprojekt&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();